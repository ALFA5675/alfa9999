
--[[ Encrypted by TARNO ]]--
local b='ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/'
function dec(data)
    data = string.gsub(data, '[^'..b..'=]', '')
    return (data:gsub('.', function(x)
        if (x == '=') then return '' end
        local r,f='',(b:find(x)-1)
        for i=6,1,-1 do r=r..(f%2^i - f%2^(i-1) > 0 and '1' or '0') end
        return r;
    end):gsub('%d%d%d?%d?%d?%d?%d?%d?', function(x)
        if (#x ~= 8) then return '' end
        local c=0
        for i=1,8 do c=c + (x:sub(i,i)=='1' and 2^(8-i) or 0) end
        return string.char(c)
    end))
end
loadstring(dec([[
bG9jYWwgQ29uZmlnc19IVUIgPSB7CiAgQ29yX0h1YiA9IENvbG9yMy5mcm9tUkdCKDE1LCAxNSwgMTUpLAogIENvcl9PcHRpb25zID0gQ29sb3IzLmZyb21SR0IoMjMwLCAxOTAsIDEzOCksCiAgQ29yX1N0cm9rZSA9IENvbG9yMy5mcm9tUkdCKDIzMCwgMTkwLCAxMzgpLCAKICBDb3JfVGV4dCA9IENvbG9yMy5mcm9tUkdCKDIzMCwgMTkwLCAxMzgpLAogIENvcl9EYXJrVGV4dCA9IENvbG9yMy5mcm9tUkdCKDI0MCwgMjQwLCAyNDApLAogIENvcm5lcl9SYWRpdXMgPSBVRGltLm5ldygwLDQpLAogIFRleHRfRm9udCA9IEVudW0uRm9udC5GcmVkb2thT25lCn0KCmxvY2FsIENvcmVHdWkgPSBnYW1lOkdldFNlcnZpY2UoIkNvcmVHdWkiKQpsb2NhbCBUd2VlblNlcnZpY2UgPSBnYW1lOkdldFNlcnZpY2UoIlR3ZWVuU2VydmljZSIpCmxvY2FsIFVzZXJJbnB1dFNlcnZpY2UgPSBnYW1lOkdldFNlcnZpY2UoIlVzZXJJbnB1dFNlcnZpY2UiKQoKbG9jYWwgZnVuY3Rpb24gQ3JlYXRlKGluc3RhbmNlLCBwYXJlbnQsIHByb3BzKQogIGxvY2FsIG5ldyA9IEluc3RhbmNlLm5ldyhpbnN0YW5jZSwgcGFyZW50KQogIGlmIHByb3BzIHRoZW4KICAgIHRhYmxlLmZvcmVhY2gocHJvcHMsIGZ1bmN0aW9uKHByb3AsIHZhbHVlKQogICAgICBuZXdbcHJvcF0gPSB2YWx1ZQogICAgZW5kKQogIGVuZAogIHJldHVybiBuZXcKZW5kCgpsb2NhbCBmdW5jdGlvbiBTZXRQcm9wcyhpbnN0YW5jZSwgcHJvcHMpCiAgaWYgaW5zdGFuY2UgYW5kIHByb3BzIHRoZW4KICAgIHRhYmxlLmZvcmVhY2gocHJvcHMsIGZ1bmN0aW9uKHByb3AsIHZhbHVlKQogICAgICBpbnN0YW5jZVtwcm9wXSA9IHZhbHVlCiAgICBlbmQpCiAgZW5kCiAgcmV0dXJuIGluc3RhbmNlCmVuZAoKbG9jYWwgZnVuY3Rpb24gQ29ybmVyKHBhcmVudCwgcHJvcHMpCiAgbG9jYWwgbmV3ID0gQ3JlYXRlKCJVSUNvcm5lciIsIHBhcmVudCkKICBuZXcuQ29ybmVyUmFkaXVzID0gQ29uZmlnc19IVUIuQ29ybmVyX1JhZGl1cwogIGlmIHByb3BzIHRoZW4KICAgIFNldFByb3BzKG5ldywgcHJvcHMpCiAgZW5kCiAgcmV0dXJuIG5ldwplbmQKCmxvY2FsIGZ1bmN0aW9uIFN0cm9rZShwYXJlbnQsIHByb3BzKQogIGxvY2FsIG5ldyA9IENyZWF0ZSgiVUlTdHJva2UiLCBwYXJlbnQpCiAgbmV3LkNvbG9yID0gQ29uZmlnc19IVUIuQ29yX1N0cm9rZQogIG5ldy5BcHBseVN0cm9rZU1vZGUgPSAiQm9yZGVyIgogIGlmIHByb3BzIHRoZW4KICAgIFNldFByb3BzKG5ldywgcHJvcHMpCiAgZW5kCiAgcmV0dXJuIG5ldwplbmQKCmxvY2FsIGZ1bmN0aW9uIENyZWF0ZVR3ZWVuKGluc3RhbmNlLCBwcm9wLCB2YWx1ZSwgdGltZSwgdHdlZW5XYWl0KQogIGxvY2FsIHR3ZWVuID0gVHdlZW5TZXJ2aWNlOkNyZWF0ZShpbnN0YW5jZSwKICBUd2VlbkluZm8ubmV3KHRpbWUsIEVudW0uRWFzaW5nU3R5bGUuTGluZWFyKSwKICB7W3Byb3BdID0gdmFsdWV9KQogIHR3ZWVuOlBsYXkoKQogIGlmIHR3ZWVuV2FpdCB0aGVuCiAgICB0d2Vlbi5Db21wbGV0ZWQ6V2FpdCgpCiAgZW5kCmVuZAoKbG9jYWwgZnVuY3Rpb24gVGV4dFNldENvbG9yKGluc3RhbmNlKQogIGluc3RhbmNlLk1vdXNlRW50ZXI6Q29ubmVjdChmdW5jdGlvbigpCiAgICBDcmVhdGVUd2VlbihpbnN0YW5jZSwgIlRleHRDb2xvcjMiLCBDb2xvcjMuZnJvbVJHQigzMCwgMTQwLCAyMDApLCAwLjQsIHRydWUpCiAgZW5kKQogIGluc3RhbmNlLk1vdXNlTGVhdmU6Q29ubmVjdChmdW5jdGlvbigpCiAgICBDcmVhdGVUd2VlbihpbnN0YW5jZSwgIlRleHRDb2xvcjMiLCBDb25maWdzX0hVQi5Db3JfVGV4dCwgMC40LCBmYWxzZSkKICBlbmQpCmVuZAoKbG9jYWwgU2NyZWVuR3VpID0gQ3JlYXRlKCJTY3JlZW5HdWkiLCBDb3JlR3VpLCB7CiAgTmFtZSA9ICJZSFVCIGxpYnJhcnkiCn0pCgpTY3JlZW5GaW5kID0gQ29yZUd1aTpGaW5kRmlyc3RDaGlsZChTY3JlZW5HdWkuTmFtZSkKaWYgU2NyZWVuRmluZCBhbmQgU2NyZWVuRmluZCB+PSBTY3JlZW5HdWkgdGhlbgogIFNjcmVlbkZpbmQ6RGVzdHJveSgpCmVuZAoKZnVuY3Rpb24gRGVzdHJveVNjcmlwdCgpCiAgU2NyZWVuR3VpOkRlc3Ryb3koKQplbmQKCmxvY2FsIE1lbnVfTm90aWZpID0gQ3JlYXRlKCJGcmFtZSIsIFNjcmVlbkd1aSwgewogIFNpemUgPSBVRGltMi5uZXcoMCwgMzAwLCAxLCAwKSwKICBQb3NpdGlvbiA9IFVEaW0yLm5ldygxLCAwLCAwLCAwKSwKICBBbmNob3JQb2ludCA9IFZlY3RvcjIubmV3KDEsIDApLAogIEJhY2tncm91bmRUcmFuc3BhcmVuY3kgPSAxCn0pCgpsb2NhbCBQYWRkaW5nID0gQ3JlYXRlKCJVSVBhZGRpbmciLCBNZW51X05vdGlmaSwgewogIFBhZGRpbmdMZWZ0ID0gVURpbS5uZXcoMCwgMjUpLAogIFBhZGRpbmdUb3AgPSBVRGltLm5ldygwLCAyNSksCiAgUGFkZGluZ0JvdHRvbSA9IFVEaW0ubmV3KDAsIDUwKQp9KQoKbG9jYWwgTGlzdExheW91dCA9IENyZWF0ZSgiVUlMaXN0TGF5b3V0IiwgTWVudV9Ob3RpZmksIHsKICBQYWRkaW5nID0gVURpbS5uZXcoMCwgMTUpLAogIFZlcnRpY2FsQWxpZ25tZW50ID0gIkJvdHRvbSIKfSkKCmZ1bmN0aW9uIE1ha2VOb3RpZmkoQ29uZmlncykKICBsb2NhbCBUaXRsZSA9IENvbmZpZ3MuVGl0bGUgb3IgIlJFRHogSFVCIgogIGxvY2FsIHRleHQgPSBDb25maWdzLlRleHQgb3IgIk5vdGlmaWNhw6fDo28iCiAgbG9jYWwgdGltZXdhaXQgPSBDb25maWdzLlRpbWUgb3IgNQogIAogIGxvY2FsIEZyYW1lMSA9IENyZWF0ZSgiRnJhbWUiLCBNZW51X05vdGlmaSwgewogICAgU2l6ZSA9IFVEaW0yLm5ldygyLCAwLCAwLCAwKSwKICAgIEJhY2tncm91bmRUcmFuc3BhcmVuY3kgPSAxLAogICAgQXV0b21hdGljU2l6ZSA9ICJZIiwKICAgIE5hbWUgPSAiVGl0bGUiCiAgfSkKICAKICBsb2NhbCBGcmFtZTIgPSBDcmVhdGUoIkZyYW1lIiwgRnJhbWUxLCB7CiAgICBTaXplID0gVURpbTIubmV3KDAsIE1lbnVfTm90aWZpLlNpemUuWC5PZmZzZXQgLSA1MCwgMCwgMCksCiAgICBCYWNrZ3JvdW5kQ29sb3IzID0gQ29uZmlnc19IVUIuQ29yX0h1YiwKICAgIFBvc2l0aW9uID0gVURpbTIubmV3KDAsIE1lbnVfTm90aWZpLlNpemUuWC5PZmZzZXQsIDAsIDApLAogICAgQXV0b21hdGljU2l6ZSA9ICJZIgogIH0pQ29ybmVyKEZyYW1lMikKICAKICBsb2NhbCBUZXh0TGFiZWwgPSBDcmVhdGUoIlRleHRMYWJlbCIsIEZyYW1lMiwgewogICAgU2l6ZSA9IFVEaW0yLm5ldygxLCAwLCAwLCAyNSksCiAgICBGb250ID0gQ29uZmlnc19IVUIuVGV4dF9Gb250LAogICAgQmFja2dyb3VuZFRyYW5zcGFyZW5jeSA9IDEsCiAgICBUZXh0ID0gVGl0bGUsCiAgICBUZXh0U2l6ZSA9IDIwLAogICAgUG9zaXRpb24gPSBVRGltMi5uZXcoMCwgMjAsIDAsIDUpLAogICAgVGV4dFhBbGlnbm1lbnQgPSAiTGVmdCIsCiAgICBUZXh0Q29sb3IzID0gQ29uZmlnc19IVUIuQ29yX1RleHQKICB9KQogIAogIGxvY2FsIFRleHRCdXR0b24gPSBDcmVhdGUoIlRleHRCdXR0b24iLCBGcmFtZTIsIHsKICAgIFRleHQgPSAiWCIsCiAgICBGb250ID0gQ29uZmlnc19IVUIuVGV4dF9Gb250LAogICAgVGV4dFNpemUgPSAyMCwKICAgIEJhY2tncm91bmRUcmFuc3BhcmVuY3kgPSAxLAogICAgVGV4dENvbG9yMyA9IENvbG9yMy5mcm9tUkdCKDIwMCwgMjAwLCAyMDApLAogICAgUG9zaXRpb24gPSBVRGltMi5uZXcoMSwgLTUsIDAsIDUpLAogICAgQW5jaG9yUG9pbnQgPSBWZWN0b3IyLm5ldygxLCAwKSwKICAgIFNpemUgPSBVRGltMi5uZXcoMCwgMjUsIDAsIDI1KQogIH0pCiAgCiAgbG9jYWwgVGV4dExhYmVsID0gQ3JlYXRlKCJUZXh0TGFiZWwiLCBGcmFtZTIsIHsKICAgIFNpemUgPSBVRGltMi5uZXcoMSwgLTMwLCAwLCAwKSwKICAgIFBvc2l0aW9uID0gVURpbTIubmV3KDAsIDIwLCAwLCBUZXh0QnV0dG9uLlNpemUuWS5PZmZzZXQgKyAxMCksCiAgICBUZXh0U2l6ZSA9IDE1LAogICAgVGV4dENvbG9yMyA9IENvbmZpZ3NfSFVCLkNvcl9EYXJrVGV4dCwKICAgIFRleHRYQWxpZ25tZW50ID0gIkxlZnQiLAogICAgVGV4dFlBbGlnbm1lbnQgPSAiVG9wIiwKICAgIEF1dG9tYXRpY1NpemUgPSAiWSIsCiAgICBUZXh0ID0gdGV4dCwKICAgIEZvbnQgPSBDb25maWdzX0hVQi5UZXh0X0ZvbnQsCiAgICBCYWNrZ3JvdW5kVHJhbnNwYXJlbmN5ID0gMSwKICAgIEF1dG9tYXRpY1NpemUgPSBFbnVtLkF1dG9tYXRpY1NpemUuWSwKICAgIFRleHRXcmFwcGVkID0gdHJ1ZQogIH0pCiAgCiAgbG9jYWwgRnJhbWVTaXplID0gQ3JlYXRlKCJGcmFtZSIsIEZyYW1lMiwgewogICAgU2l6ZSA9IFVEaW0yLm5ldygxLCAwLCAwLCAyKSwKICAgIEJhY2tncm91bmRDb2xvcjMgPSBDb25maWdzX0hVQi5Db3JfU3Ryb2tlLAogICAgUG9zaXRpb24gPSBVRGltMi5uZXcoMCwgMiwgMCwgMzApLAogICAgQm9yZGVyU2l6ZVBpeGVsID0gMAogIH0pQ29ybmVyKEZyYW1lU2l6ZSlDcmVhdGUoIkZyYW1lIiwgRnJhbWUyLCB7CiAgICBTaXplID0gVURpbTIubmV3KDAsIDAsIDAsIDUpLAogICAgUG9zaXRpb24gPSBVRGltMi5uZXcoMCwgMCwgMSwgNSksCiAgICBCYWNrZ3JvdW5kVHJhbnNwYXJlbmN5ID0gMQogIH0pCiAgCiAgdGFzay5zcGF3bihmdW5jdGlvbigpCiAgICBDcmVhdGVUd2VlbihGcmFtZVNpemUsICJTaXplIiwgVURpbTIubmV3KDAsIDAsIDAsIDIpLCB0aW1ld2FpdCwgdHJ1ZSkKICBlbmQpCiAgCiAgVGV4dEJ1dHRvbi5Nb3VzZUJ1dHRvbjFDbGljazpDb25uZWN0KGZ1bmN0aW9uKCkKICAgIENyZWF0ZVR3ZWVuKEZyYW1lMiwgIlBvc2l0aW9uIiwgVURpbTIubmV3KDAsIC0yMCwgMCwgMCksIDAuMSwgdHJ1ZSkKICAgIENyZWF0ZVR3ZWVuKEZyYW1lMiwgIlBvc2l0aW9uIiwgVURpbTIubmV3KDAsIE1lbnVfTm90aWZpLlNpemUuWC5PZmZzZXQsIDAsIDApLCAwLjUsIHRydWUpCiAgICBGcmFtZTE6RGVzdHJveSgpCiAgZW5kKQogIAogIHRhc2suc3Bhd24oZnVuY3Rpb24oKQogICAgQ3JlYXRlVHdlZW4oRnJhbWUyLCAiUG9zaXRpb24iLCBVRGltMi5uZXcoMCwgLTIwLCAwLCAwKSwgMC41LCB0cnVlKQogICAgQ3JlYXRlVHdlZW4oRnJhbWUyLCAiUG9zaXRpb24iLCBVRGltMi5uZXcoKSwgMC4xLCB0cnVlKXRhc2sud2FpdCh0aW1ld2FpdCkKICAgIGlmIEZyYW1lMiB0aGVuCiAgICAgIENyZWF0ZVR3ZWVuKEZyYW1lMiwgIlBvc2l0aW9uIiwgVURpbTIubmV3KDAsIC0yMCwgMCwgMCksIDAuMSwgdHJ1ZSkKICAgICAgQ3JlYXRlVHdlZW4oRnJhbWUyLCAiUG9zaXRpb24iLCBVRGltMi5uZXcoMCwgTWVudV9Ob3RpZmkuU2l6ZS5YLk9mZnNldCwgMCwgMCksIDAuNSwgdHJ1ZSkKICAgICAgRnJhbWUxOkRlc3Ryb3koKQogICAgZW5kCiAgZW5kKQplbmQKCmZ1bmN0aW9uIE1ha2VXaW5kb3coQ29uZmlncykKICBsb2NhbCB0aXRsZSA9IENvbmZpZ3MuSHViLlRpdGxlIG9yICJSRUR6IEhVQiIKICBsb2NhbCBBbmltX1RpdGxlID0gQ29uZmlncy5IdWIuQW5pbWF0aW9uIG9yICJieSA6IHJlZHo5OTk5IgogIAogIGxvY2FsIEtleVN5c3RlbSA9IENvbmZpZ3MuS2V5LktleVN5c3RlbSBvciBmYWxzZQogIGxvY2FsIEtleVRpdGxlID0gQ29uZmlncy5LZXkuVGl0bGUgb3IgIktleSBTeXN0ZW0iCiAgbG9jYWwgS2V5RGVzY3JpcHRpb24gPSBDb25maWdzLktleS5EZXNjcmlwdGlvbiBvciAiLi0uIgogIGxvY2FsIEtleUtleSA9IENvbmZpZ3MuS2V5LktleXMgb3IgeyIxMjMiLCAiMzIxIn0KICBsb2NhbCBLZXlMaW5rID0gQ29uZmlncy5LZXkuS2V5TGluayBvciAiIgogIGxvY2FsIEtleU5vdGlmaWNhdGlvbnMgPSBDb25maWdzLktleS5Ob3RpZmkuTm90aWZpY2F0aW9ucyBvciB0cnVlCiAgbG9jYWwgS2V5Tm90U3VjY2VzcyA9IENvbmZpZ3MuS2V5Lk5vdGlmaS5JbmNvcnJlY3RrZXkgb3IgIlRoZSBrZXkgaXMgaW5jb3JyZWN0IgogIGxvY2FsIEtleVN1Y2Nlc3MgPSBDb25maWdzLktleS5Ob3RpZmkuQ29ycmVjdEtleSBvciAiUnVubmluZyB0aGUgU2NyaXB0Li4uIgogIGxvY2FsIEtleUNvcHlLZXlMaW5rID0gQ29uZmlncy5LZXkuTm90aWZpLkNvcHlLZXlMaW5rIG9yICJDb3BpZWQgdG8gQ2xpcGJvYXJkIgogIAogIGlmIEtleVN5c3RlbSB0aGVuCiAgICBsb2NhbCBLZXlNZW51ID0gQ3JlYXRlKCJGcmFtZSIsIFNjcmVlbkd1aSwgewogICAgICBTaXplID0gVURpbTIubmV3KDAsIDQwMCwgMCwgMjIwKSwKICAgICAgUG9zaXRpb24gPSBVRGltMi5uZXcoMC41LCAwLCAwLjUsIDApLAogICAgICBCYWNrZ3JvdW5kQ29sb3IzID0gQ29uZmlnc19IVUIuQ29yX0h1YiwKICAgICAgQW5jaG9yUG9pbnQgPSBWZWN0b3IyLm5ldygwLjUsIDAuNSksCiAgICAgIEFjdGl2ZSA9IHRydWUsCiAgICAgIERyYWdnYWJsZSA9IHRydWUKICAgIH0pQ29ybmVyKEtleU1lbnUpCiAgICAKICAgIGxvY2FsIENsb3NlQnV0dG9uID0gQ3JlYXRlKCJUZXh0QnV0dG9uIiwgS2V5TWVudSwgewogICAgICBTaXplID0gVURpbTIubmV3KDAsIDMwLCAwLCAzMCksCiAgICAgIFBvc2l0aW9uID0gVURpbTIubmV3KDEsIC0xMCwgMCwgNSksCiAgICAgIEFuY2hvclBvaW50ID0gVmVjdG9yMi5uZXcoMSwgMCksCiAgICAgIFRleHQgPSAiWCIsCiAgICAgIEZvbnQgPSBFbnVtLkZvbnQuRnJlZG9rYU9uZSwKICAgICAgVGV4dFNjYWxlZCA9IHRydWUsCiAgICAgIFRleHRDb2xvcjMgPSBDb2xvcjMuZnJvbVJHQigyNDAsIDAsIDApLAogICAgICBCYWNrZ3JvdW5kVHJhbnNwYXJlbmN5ID0gMSwKICAgIH0pQ29ybmVyKENsb3NlQnV0dG9uKQogICAgCiAgICBsb2NhbCBUaXRsZSA9IENyZWF0ZSgiVGV4dExhYmVsIiwgS2V5TWVudSwgewogICAgICBTaXplID0gVURpbTIubmV3KDEsIC04MCwgMCwgMjApLAogICAgICBQb3NpdGlvbiA9IFVEaW0yLm5ldygwLCAyMCwgMCwgNSksCiAgICAgIFRleHQgPSBLZXlUaXRsZSwKICAgICAgRm9udCA9IENvbmZpZ3NfSFVCLlRleHRfRm9udCwKICAgICAgVGV4dFNjYWxlZCA9IHRydWUsCiAgICAgIFRleHRDb2xvcjMgPSBDb25maWdzX0hVQi5Db3JfVGV4dCwKICAgICAgVGV4dFhBbGlnbm1lbnQgPSAiTGVmdCIsCiAgICAgIEJhY2tncm91bmRUcmFuc3BhcmVuY3kgPSAxCiAgICB9KQogICAgCiAgICBsb2NhbCBEZXNjcmlwdGlvbiA9IENyZWF0ZSgiVGV4dExhYmVsIiwgS2V5TWVudSwgewogICAgICBTaXplID0gVURpbTIubmV3KDEsIC04MCwgMCwgMCksCiAgICAgIFRleHQgPSBLZXlEZXNjcmlwdGlvbiwKICAgICAgVGV4dFNpemUgPSAxNywKICAgICAgVGV4dENvbG9yMyA9IENvbmZpZ3NfSFVCLkNvcl9EYXJrVGV4dCwKICAgICAgRm9udCA9IENvbmZpZ3NfSFVCLlRleHRfRm9udCwKICAgICAgUG9zaXRpb24gPSBVRGltMi5uZXcoMCwgMjAsIDAsIDI1KSwKICAgICAgVGV4dFhBbGlnbm1lbnQgPSAiTGVmdCIsCiAgICAgIEF1dG9tYXRpY1NpemUgPSAiWSIsCiAgICAgIFRleHRZQWxpZ25tZW50ID0gIlRvcCIsCiAgICAgIEJhY2tncm91bmRUcmFuc3BhcmVuY3kgPSAxCiAgICB9KQogICAgCiAgICBsb2NhbCBDb25maXJtQnV0dG9uID0gQ3JlYXRlKCJUZXh0QnV0dG9uIiwgS2V5TWVudSwgewogICAgICBUZXh0ID0gItij2K/Yrtin2YQiLAogICAgICBGb250ID0gQ29uZmlnc19IVUIuVGV4dF9Gb250LAogICAgICBUZXh0U2l6ZSA9IDIwLAogICAgICBUZXh0Q29sb3IzID0gQ29uZmlnc19IVUIuQ29yX1RleHQsCiAgICAgIFNpemUgPSBVRGltMi5uZXcoMCwgMTUwLCAwLCA0MCksCiAgICAgIEFuY2hvclBvaW50ID0gVmVjdG9yMi5uZXcoMSwgMCksCiAgICAgIFBvc2l0aW9uID0gVURpbTIubmV3KDEsIC0zNSwgMCwgMTQwKSwKICAgICAgQmFja2dyb3VuZENvbG9yMyA9IENvbmZpZ3NfSFVCLkNvcl9PcHRpb25zCiAgICB9KUNvcm5lcihDb25maXJtQnV0dG9uKQogICAgCiAgICBsb2NhbCBHZXRLZXlMaW5rID0gQ3JlYXRlKCJUZXh0QnV0dG9uIiwgS2V5TWVudSwgewogICAgICBUZXh0ID0gItin2YTYrdi12YjZhCDYudmE2Ykg2KfZhNix2KfYqNi3IiwKICAgICAgRm9udCA9IENvbmZpZ3NfSFVCLlRleHRfRm9udCwKICAgICAgVGV4dFNpemUgPSAyMCwKICAgICAgVGV4dENvbG9yMyA9IENvbmZpZ3NfSFVCLkNvcl9UZXh0LAogICAgICBTaXplID0gVURpbTIubmV3KDAsIDE1MCwgMCwgNDApLAogICAgICBQb3NpdGlvbiA9IFVEaW0yLm5ldygwLCAzNSwgMCwgMTQwKSwKICAgICAgQmFja2dyb3VuZENvbG9yMyA9IENvbmZpZ3NfSFVCLkNvcl9PcHRpb25zCiAgICB9KUNvcm5lcihHZXRLZXlMaW5rKQogICAgCiAgICBsb2NhbCBUZXh0Qm94ID0gQ3JlYXRlKCJUZXh0Qm94IiwgS2V5TWVudSwgewogICAgICBTaXplID0gVURpbTIubmV3KDEsIC03MCwgMCwgNDApLAogICAgICBQb3NpdGlvbiA9IFVEaW0yLm5ldygwLCAzNSwgMCwgOTApLAogICAgICBCYWNrZ3JvdW5kQ29sb3IzID0gQ29uZmlnc19IVUIuQ29yX09wdGlvbnMsCiAgICAgIFBsYWNlaG9sZGVyVGV4dCA9ICLYp9mD2KrYqNmHINmH2YbYp9inIiwKICAgICAgVGV4dCA9ICIiLAogICAgICBUZXh0Q29sb3IzID0gQ29uZmlnc19IVUIuQ29yX1RleHQsCiAgICAgIEZvbnQgPSBDb25maWdzX0hVQi5UZXh0X0ZvbnQsCiAgICAgIFRleHRTaXplID0gMjUKICAgIH0pQ29ybmVyKFRleHRCb3gpCiAgICAKICAgIGxvY2FsIEtleVZlcmlmeSA9IGZhbHNlCiAgICBDbG9zZUJ1dHRvbi5Nb3VzZUJ1dHRvbjFDbGljazpDb25uZWN0KGZ1bmN0aW9uKCkKICAgICAgbG9jYWwgVUlTY2FsZSA9IENyZWF0ZSgiVUlTY2FsZSIsIFNjcmVlbkd1aSkKICAgICAgQ3JlYXRlVHdlZW4oVUlTY2FsZSwgIlNjYWxlIiwgMCwgMC4yMCwgdHJ1ZSkKICAgICAgU2NyZWVuR3VpOkRlc3Ryb3koKQogICAgZW5kKQogICAgCiAgICBDb25maXJtQnV0dG9uLk1vdXNlQnV0dG9uMUNsaWNrOkNvbm5lY3QoZnVuY3Rpb24oKQogICAgICBmb3IgXyx2IGluIHBhaXJzKEtleUtleSkgZG8KICAgICAgICBpZiBUZXh0Qm94LlRleHQgPT0gdiB0aGVuCiAgICAgICAgICBLZXlWZXJpZnkgPSB0cnVlCiAgICAgICAgZW5kCiAgICAgIGVuZAogICAgICBpZiBLZXlOb3RpZmljYXRpb25zIGFuZCBub3QgS2V5VmVyaWZ5IHRoZW4KICAgICAgICBNYWtlTm90aWZpKHsKICAgICAgICAgIFRpdGxlID0gS2V5VGl0bGUsCiAgICAgICAgICBUZXh0ID0gS2V5Tm90U3VjY2VzcywKICAgICAgICAgIFRpbWUgPSA1CiAgICAgICAgfSkKICAgICAgZWxzZWlmIEtleU5vdGlmaWNhdGlvbnMgdGhlbgogICAgICAgIE1ha2VOb3RpZmkoewogICAgICAgICAgVGl0bGUgPSBLZXlUaXRsZSwKICAgICAgICAgIFRleHQgPSBLZXlTdWNjZXNzLAogICAgICAgICAgVGltZSA9IDUKICAgICAgICB9KQogICAgICBlbmQKICAgIGVuZCkKICAgIAogICAgR2V0S2V5TGluay5Nb3VzZUJ1dHRvbjFDbGljazpDb25uZWN0KGZ1bmN0aW9uKCkKICAgICAgaWYgS2V5Tm90aWZpY2F0aW9ucyB0aGVuCiAgICAgICAgc2V0Y2xpcGJvYXJkKEtleUxpbmspCiAgICAgICAgTWFrZU5vdGlmaSh7CiAgICAgICAgICBUaXRsZSA9IEtleVRpdGxlLAogICAgICAgICAgVGV4dCA9IEtleUNvcHlLZXlMaW5rLAogICAgICAgICAgVGltZSA9IDUKICAgICAgICB9KQogICAgICBlbmQKICAgIGVuZCkKICAgIAogICAgcmVwZWF0IHRhc2sud2FpdCgpCiAgICB1bnRpbCBLZXlWZXJpZnkKICAgIGxvY2FsIFVJU2NhbGUgPSBDcmVhdGUoIlVJU2NhbGUiLCBLZXlNZW51KQogICAgQ3JlYXRlVHdlZW4oVUlTY2FsZSwgIlNjYWxlIiwgMCwgMC40MCwgdHJ1ZSkKICAgIEtleU1lbnU6RGVzdHJveSgpCiAgZW5kCiAgCiAgbG9jYWwgTWVudSA9IENyZWF0ZSgiRnJhbWUiLCBTY3JlZW5HdWksIHsKICAgIEJhY2tncm91bmRDb2xvcjMgPSBDb25maWdzX0hVQi5Db3JfSHViLAogICAgUG9zaXRpb24gPSBVRGltMi5uZXcoMC41LCAtNTAwLzIsIDAuNSwgLTI3MC8yKSwKICAgIEFjdGl2ZSA9IHRydWUsCiAgICBEcmFnZ2FibGUgPSB0cnVlCiAgfSlDb3JuZXIoTWVudSkKICAKICBsb2NhbCBUb3BCYXIgPSBDcmVhdGUoIkZyYW1lIiwgTWVudSwgewogICAgQmFja2dyb3VuZFRyYW5zcGFyZW5jeSA9IDEsCiAgICBTaXplID0gVURpbTIubmV3KDEsIDAsIDAsIDI1KSwKICAgIFZpc2libGUgPSBmYWxzZQogIH0pCiAgCiAgbG9jYWwgQnV0dG9uc0ZyYW1lID0gQ3JlYXRlKCJGcmFtZSIsIFRvcEJhciwgewogICAgU2l6ZSA9IFVEaW0yLm5ldygwLCA0MCwgMSwgLTUpLAogICAgUG9zaXRpb24gPSBVRGltMi5uZXcoMSwgLTEwLCAwLCAyLjUpLAogICAgQW5jaG9yUG9pbnQgPSBWZWN0b3IyLm5ldygxLCAwKSwKICAgIEJhY2tncm91bmRUcmFuc3BhcmVuY3kgPSAxCiAgfSkKICAKICBsb2NhbCBUaXRsZSA9IENyZWF0ZSgiVGV4dExhYmVsIiwgVG9wQmFyLCB7CiAgICBTaXplID0gVURpbTIubmV3KDEsIDAsIDEsIDApLAogICAgUG9zaXRpb24gPSBVRGltMi5uZXcoMCwgMjAsIDAsIDApLAogICAgVGV4dENvbG9yMyA9IENvbmZpZ3NfSFVCLkNvcl9UZXh0LAogICAgRm9udCA9IENvbmZpZ3NfSFVCLlRleHRfRm9udCwKICAgIFRleHRYQWxpZ25tZW50ID0gIkxlZnQiLAogICAgVGV4dCA9IHRpdGxlLAogICAgVGV4dFNpemUgPSAyMCwKICAgIEJhY2tncm91bmRUcmFuc3BhcmVuY3kgPSAxCiAgfSkKICAKICBsb2NhbCBNaW5pbWl6ZV9CVE4gPSBDcmVhdGUoIlRleHRCdXR0b24iLCBCdXR0b25zRnJhbWUsIHsKICAgIFRleHQgPSAiLSIsCiAgICBUZXh0Q29sb3IzID0gQ29uZmlnc19IVUIuQ29yX1RleHQsCiAgICBTaXplID0gVURpbTIubmV3KDAuNSwgMCwgMSwgMCksCiAgICBCYWNrZ3JvdW5kVHJhbnNwYXJlbmN5ID0gMSwKICAgIEZvbnQgPSBDb25maWdzX0hVQi5UZXh0X0ZvbnQsCiAgICBUZXh0WUFsaWdubWVudCA9ICJCb3R0b20iLAogICAgVGV4dFNpemUgPSAyNQogIH0pCiAgCiAgSXNNaW5pbWl6ZWQgPSBmYWxzZQogIE1pbmltaXplX0JUTi5Nb3VzZUJ1dHRvbjFDbGljazpDb25uZWN0KGZ1bmN0aW9uKCkKICAgIE1pbmltaXplX0JUTi5UZXh0ID0gbm90IElzTWluaW1pemVkIGFuZCAiKyIgb3IgIi0iCiAgICBpZiBJc01pbmltaXplZCB0aGVuCiAgICAgIElzTWluaW1pemVkID0gZmFsc2UKICAgICAgQ3JlYXRlVHdlZW4oTWVudSwgIlNpemUiLCBVRGltMi5uZXcoMCwgNTAwLCAwLCAyNzApLCAwLjE1LCBmYWxzZSkKICAgIGVsc2UKICAgICAgSXNNaW5pbWl6ZWQgPSB0cnVlCiAgICAgIENyZWF0ZVR3ZWVuKE1lbnUsICJTaXplIiwgVURpbTIubmV3KDAsIDUwMCwgMCwgMjUpLCAwLjE1LCB0cnVlKQogICAgZW5kCiAgZW5kKQogIAogIGxvY2FsIENsb3NlX0J1dHRvbiA9IENyZWF0ZSgiVGV4dEJ1dHRvbiIsIEJ1dHRvbnNGcmFtZSwgewogICAgVGV4dCA9ICLDlyIsCiAgICBUZXh0WUFsaWdubWVudCA9ICJCb3R0b20iLAogICAgVGV4dENvbG9yMyA9IENvbmZpZ3NfSFVCLkNvcl9UZXh0LAogICAgU2l6ZSA9IFVEaW0yLm5ldygwLjUsIDAsIDEsIDApLAogICAgQW5jaG9yUG9pbnQgPSBWZWN0b3IyLm5ldygxLCAwKSwKICAgIFBvc2l0aW9uID0gVURpbTIubmV3KDEsIDAsIDAsIDApLAogICAgQmFja2dyb3VuZFRyYW5zcGFyZW5jeSA9IDEsCiAgICBGb250ID0gQ29uZmlnc19IVUIuVGV4dF9Gb250LAogICAgVGV4dFNpemUgPSAyNQogIH0pCiAgCiAgbG9jYWwgZnVuY3Rpb24gQ3JlYXRlQ2xvc2UoKQogICAgSXNNaW5pbWl6ZWQgPSBmYWxzZQogICAgQ3JlYXRlVHdlZW4oTWVudSwgIlNpemUiLCBVRGltMi5uZXcoMCwgNTAwLCAwLCAyNzApLCAwLjMsIGZhbHNlKQogICAgbG9jYWwgQ2xvc2VHdWkgPSBDcmVhdGUoIlRleHRCdXR0b24iLCBNZW51LCB7CiAgICAgIEJhY2tncm91bmRUcmFuc3BhcmVuY3kgPSAwLjUsCiAgICAgIEJhY2tncm91bmRDb2xvcjMgPSBDb25maWdzX0hVQi5Db3JfSHViLAogICAgICBTaXplID0gVURpbTIubmV3KDEsIDAsIDEsIDApLAogICAgICBBdXRvQnV0dG9uQ29sb3IgPSBmYWxzZSwKICAgICAgVGV4dCA9ICIiLAogICAgICBCYWNrZ3JvdW5kVHJhbnNwYXJlbmN5ID0gMC41LAogICAgICBWaXNpYmxlID0gZmFsc2UKICAgIH0pQ29ybmVyKENsb3NlR3VpKQogICAgCiAgICBsb2NhbCBDbG9zZU1lbnUgPSBDcmVhdGUoIkZyYW1lIiwgQ2xvc2VHdWksIHsKICAgICAgU2l6ZSA9IFVEaW0yLm5ldygpLAogICAgICBBbmNob3JQb2ludCA9IFZlY3RvcjIubmV3KDAuNSwgMC41KSwKICAgICAgUG9zaXRpb24gPSBVRGltMi5uZXcoMC41LCAwLCAwLjUsIDApLAogICAgICBUcmFuc3BhcmVuY3kgPSAxLAogICAgICBCYWNrZ3JvdW5kQ29sb3IzID0gQ29uZmlnc19IVUIuQ29yX0h1YgogICAgfSlDb3JuZXIoQ2xvc2VNZW51KVN0cm9rZShDbG9zZU1lbnUpCiAgICAKICAgIGxvY2FsIE1lbnNhZ2UgPSBDcmVhdGUoIlRleHRMYWJlbCIsIENsb3NlTWVudSwgewogICAgICBTaXplID0gVURpbTIubmV3KDAuOCwgMCwgMC4yNSwgMCksCiAgICAgIFRleHQgPSAi2YfZhCDYp9mG2Kog2YXYqtij2YPYryDYp9mG2YMg2KrYsdmK2K8g2KfYutmE2KfZgtmHINifIiwKICAgICAgUG9zaXRpb24gPSBVRGltMi5uZXcoMC4xLCAwLCAwLjIpLAogICAgICBUZXh0Q29sb3IzID0gQ29uZmlnc19IVUIuQ29yX1RleHQsCiAgICAgIEZvbnQgPSBDb25maWdzX0hVQi5UZXh0X0ZvbnQsCiAgICAgIFRleHRTY2FsZWQgPSB0cnVlLAogICAgICBCYWNrZ3JvdW5kVHJhbnNwYXJlbmN5ID0gMQogICAgfSkKICAgIAogICAgbG9jYWwgQ29uZmlybSA9IENyZWF0ZSgiVGV4dEJ1dHRvbiIsIENsb3NlTWVudSwgewogICAgICBTaXplID0gVURpbTIubmV3KDAuMzUsIDAsIDAuMywgMCksCiAgICAgIFBvc2l0aW9uID0gVURpbTIubmV3KDAuMSwgMCwgMC41LCAwKSwKICAgICAgQmFja2dyb3VuZENvbG9yMyA9IENvbmZpZ3NfSFVCLkNvcl9IdWIsCiAgICAgIFRleHQgPSAi2KfYutmE2KfZgiDYp9mE2LPZg9ix2KjYqiIsCiAgICAgIEZvbnQgPSBDb25maWdzX0hVQi5UZXh0X0ZvbnQsCiAgICAgIFRleHRDb2xvcjMgPSBDb2xvcjMuZnJvbVJHQigyNDAsIDAsIDApLAogICAgICBUZXh0U2l6ZSA9IDIwCiAgICB9KUNvcm5lcihDb25maXJtKVN0cm9rZShDb25maXJtKQogICAgCiAgICBsb2NhbCBDYW5jZWwgPSBDcmVhdGUoIlRleHRCdXR0b24iLCBDbG9zZU1lbnUsIHsKICAgICAgU2l6ZSA9IFVEaW0yLm5ldygwLjM1LCAwLCAwLjMsIDApLAogICAgICBQb3NpdGlvbiA9IFVEaW0yLm5ldygwLjksIDAsIDAuNSwgMCksCiAgICAgIEFuY2hvclBvaW50ID0gVmVjdG9yMi5uZXcoMSwgMCksCiAgICAgIEJhY2tncm91bmRDb2xvcjMgPSBDb25maWdzX0hVQi5Db3JfSHViLAogICAgICBUZXh0ID0gItin2YTYutin2KEiLAogICAgICBGb250ID0gQ29uZmlnc19IVUIuVGV4dF9Gb250LAogICAgICBUZXh0Q29sb3IzID0gQ29sb3IzLmZyb21SR0IoMCwgMjQwLCAwKSwKICAgICAgVGV4dFNpemUgPSAyMAogICAgfSlDb3JuZXIoQ2FuY2VsKVN0cm9rZShDYW5jZWwpCiAgICAKICAgIGxvY2FsIGZ1bmN0aW9uIFNldFZpc2libGUoKQogICAgICBpZiBNZW51LlNpemUuWS5PZmZzZXQgPiAxMDAgdGhlbgogICAgICAgIENsb3NlR3VpLlZpc2libGUgPSB0cnVlCiAgICAgIGVsc2UKICAgICAgICBDbG9zZUd1aS5WaXNpYmxlID0gZmFsc2UKICAgICAgZW5kCiAgICBlbmQKICAgIAogICAgU2V0VmlzaWJsZSgpCiAgICBNZW51OkdldFByb3BlcnR5Q2hhbmdlZFNpZ25hbCgiU2l6ZSIpOkNvbm5lY3QoU2V0VmlzaWJsZSkKICAgIAogICAgQ3JlYXRlVHdlZW4oQ2xvc2VNZW51LCAiVHJhbnNwYXJlbmN5IiwgMCwgMC4yLCBmYWxzZSkKICAgIENyZWF0ZVR3ZWVuKENsb3NlTWVudSwgIlNpemUiLCBVRGltMi5uZXcoMC43LCAwLCAwLjcsIDApLCAwLjIsIGZhbHNlKQogICAgCiAgICBDYW5jZWwuTW91c2VCdXR0b24xQ2xpY2s6Q29ubmVjdChmdW5jdGlvbigpCiAgICAgIENyZWF0ZVR3ZWVuKENsb3NlTWVudSwgIlRyYW5zcGFyZW5jeSIsIDEsIDAuMywgZmFsc2UpCiAgICAgIENyZWF0ZVR3ZWVuKENsb3NlTWVudSwgIlNpemUiLCBVRGltMi5uZXcoKSwgMC4yLCB0cnVlKQogICAgICBDbG9zZUd1aTpEZXN0cm95KCkKICAgIGVuZCkKICAgIAogICAgQ29uZmlybS5Nb3VzZUJ1dHRvbjFDbGljazpDb25uZWN0KGZ1bmN0aW9uKCkKICAgICAgQ2xvc2VHdWk6RGVzdHJveSgpCiAgICAgIENyZWF0ZVR3ZWVuKE1lbnUsICJTaXplIiwgVURpbTIubmV3KCksIDAuMywgdHJ1ZSkKICAgICAgRGVzdHJveVNjcmlwdCgpCiAgICBlbmQpCiAgICAKICAgIENsb3NlR3VpLk1vdXNlQnV0dG9uMUNsaWNrOkNvbm5lY3QoZnVuY3Rpb24oKQogICAgICBDcmVhdGVUd2VlbihDbG9zZU1lbnUsICJUcmFuc3BhcmVuY3kiLCAxLCAwLjMsIGZhbHNlKQogICAgICBDcmVhdGVUd2VlbihDbG9zZU1lbnUsICJTaXplIiwgVURpbTIubmV3KCksIDAuMiwgdHJ1ZSkKICAgICAgQ2xvc2VHdWk6RGVzdHJveSgpCiAgICBlbmQpCiAgZW5kCiAgCiAgQ2xvc2VfQnV0dG9uLk1vdXNlQnV0dG9uMUNsaWNrOkNvbm5lY3QoQ3JlYXRlQ2xvc2UpCiAgCiAgbG9jYWwgQW5pbU1lbnUgPSBDcmVhdGUoIkZyYW1lIiwgU2NyZWVuR3VpLCB7CiAgICBQb3NpdGlvbiA9IFVEaW0yLm5ldygwLjUsIDAsIDAuNSwgMCksCiAgICBBbmNob3JQb2ludCA9IFZlY3RvcjIubmV3KDAuNSwgMC41KSwKICAgIEJhY2tncm91bmRDb2xvcjMgPSBDb25maWdzX0hVQi5Db3JfSHViCiAgfSlDb3JuZXIoQW5pbU1lbnUsIHtDb3JuZXJSYWRpdXMgPSBVRGltLm5ldygwLCA2KX0pCiAgCiAgbG9jYWwgQW5pbV9DcmVkaXRzID0gQ3JlYXRlKCJUZXh0TGFiZWwiLCBBbmltTWVudSwgewogICAgVGV4dCA9IEFuaW1fVGl0bGUsCiAgICBCYWNrZ3JvdW5kVHJhbnNwYXJlbmN5ID0gMSwKICAgIFNpemUgPSBVRGltMi5uZXcoMSwgMCwgMSwgMCksCiAgICBWaXNpYmxlID0gZmFsc2UsCiAgICBGb250ID0gQ29uZmlnc19IVUIuVGV4dF9Gb250LAogICAgVGV4dFRyYW5zcGFyZW5jeSA9IDEsCiAgICBUZXh0Q29sb3IzID0gQ29uZmlnc19IVUIuQ29yX1RleHQsCiAgICBQb3NpdGlvbiA9IFVEaW0yLm5ldygwLCAxMCwgMCwgMCksCiAgICBUZXh0WEFsaWdubWVudCA9ICJMZWZ0IiwKICAgIFRleHRTaXplID0gMTUKICB9KQogIAogIENyZWF0ZVR3ZWVuKEFuaW1NZW51LCAiU2l6ZSIsIFVEaW0yLm5ldygwLCAwLCAwLCAzNSksIDAuNSwgdHJ1ZSkKICBDcmVhdGVUd2VlbihBbmltTWVudSwgIlNpemUiLCBVRGltMi5uZXcoMCwgMTUwLCAwLCAzNSksIDAuNSwgdHJ1ZSkKICBBbmltX0NyZWRpdHMuVmlzaWJsZSA9IHRydWUKICB0YXNrLndhaXQoMC41KQogIGZvciBpID0gMSwgMCwgLTAuMSBkbyB0YXNrLndhaXQoKQogICAgQW5pbV9DcmVkaXRzLlRleHRUcmFuc3BhcmVuY3kgPSBpCiAgZW5kCiAgdGFzay53YWl0KDEpCiAgZm9yIGkgPSAwLCAxLCAwLjEgZG8gdGFzay53YWl0KCkKICAgIEFuaW1fQ3JlZGl0cy5UZXh0VHJhbnNwYXJlbmN5ID0gaQogIGVuZAogIEFuaW1fQ3JlZGl0czpEZXN0cm95KCkKICBBbmltTWVudTpEZXN0cm95KCkKICBDcmVhdGVUd2VlbihNZW51LCAiU2l6ZSIsIFVEaW0yLm5ldygwLCA1MDAsIDAsIDM1KSwgMC41LCB0cnVlKQogIFRvcEJhci5WaXNpYmxlID0gdHJ1ZQogIENyZWF0ZVR3ZWVuKE1lbnUsICJTaXplIiwgVURpbTIubmV3KDAsIDUwMCwgMCwgMjcwKSwgMC4zLCB0cnVlKQogIE1lbnUuRHJhZ2dhYmxlID0gdHJ1ZQogIAogIGxvY2FsIGxpbmVfQ29udGFpbmVycyA9IENyZWF0ZSgiRnJhbWUiLCBNZW51LCB7CiAgICBCYWNrZ3JvdW5kVHJhbnNwYXJlbmN5ID0gMSwKICAgIFNpemUgPSBVRGltMi5uZXcoMSwgMCwgMSwgMCkKICB9KQogIAogIGZ1bmN0aW9uIE1pbmltaXplQnV0dG9uKENvbmZpZ3MpCiAgICBsb2NhbCBpbWFnZSA9IENvbmZpZ3MuSW1hZ2Ugb3IgIiIKICAgIGxvY2FsIHNpemUgPSBDb25maWdzLlNpemUgb3IgezMwLCAzMH0KICAgIGxvY2FsIGNvbG9yID0gQ29uZmlncy5Db2xvciBvciBDb25maWdzX0hVQi5Db3JfSHViCiAgICBsb2NhbCBjb3JuZXIgPSBDb25maWdzLkNvcm5lciBvciB0cnVlCiAgICBsb2NhbCBzdHJva2UgPSBDb25maWdzLlN0cm9rZSBvciBmYWxzZQogICAgbG9jYWwgc3Ryb2tlY29sb3IgPSBDb25maWdzLlN0cm9rZUNvbG9yIG9yIENvbmZpZ3NfSFVCLkNvcl9TdHJva2UKICAgIAogICAgbG9jYWwgQnV0dG9uID0gQ3JlYXRlKCJJbWFnZUJ1dHRvbiIsIFNjcmVlbkd1aSwgewogICAgICBTaXplID0gVURpbTIubmV3KDAsIHNpemVbMV0sIDAsIHNpemVbMl0pLAogICAgICBQb3NpdGlvbiA9IFVEaW0yLm5ldygwLjE1LCAwLCAwLjE1LCAwKSwKICAgICAgQmFja2dyb3VuZENvbG9yMyA9IGNvbG9yLAogICAgICBJbWFnZSA9IGltYWdlLAogICAgICBBY3RpdmUgPSB0cnVlLAogICAgICBEcmFnZ2FibGUgPSB0cnVlCiAgICB9KWlmIGNvcm5lciB0aGVuIENvcm5lcihCdXR0b24pIGVuZCBpZiBzdHJva2UgdGhlbiBTdHJva2UoQnV0dG9uLCB7Q29sb3IgPSBzdHJva2Vjb2xvcn0pIGVuZAogICAgCiAgICBsb2NhbCBtaW5pbWl6ZSA9IGZhbHNlCiAgICBCdXR0b24uTW91c2VCdXR0b24xQ2xpY2s6Q29ubmVjdChmdW5jdGlvbigpCiAgICAgIGlmIG1pbmltaXplIHRoZW4KICAgICAgICBtaW5pbWl6ZSA9IGZhbHNlCiAgICAgICAgTWVudS5WaXNpYmxlID0gdHJ1ZQogICAgICAgIGlmIG5vdCBJc01pbmltaXplZCB0aGVuCiAgICAgICAgICBDcmVhdGVUd2VlbihNZW51LCAiU2l6ZSIsIFVEaW0yLm5ldygwLCA1MDAsIDAsIDI3MCksIDAuMywgZmFsc2UpCiAgICAgICAgZWxzZQogICAgICAgICAgQ3JlYXRlVHdlZW4oTWVudSwgIlNpemUiLCBVRGltMi5uZXcoMCwgNTAwLCAwLCAyNSksIDAuMywgZmFsc2UpCiAgICAgICAgZW5kCiAgICAgIGVsc2UKICAgICAgICBtaW5pbWl6ZSA9IHRydWUKICAgICAgICBDcmVhdGVUd2VlbihNZW51LCAiU2l6ZSIsIFVEaW0yLm5ldygwLCA1MDAsIDAsIDApLCAwLjMsIHRydWUpCiAgICAgICAgTWVudS5WaXNpYmxlID0gZmFsc2UKICAgICAgZW5kCiAgICBlbmQpCiAgZW5kCiAgCiAgbG9jYWwgU2Nyb2xsQmFyID0gQ3JlYXRlKCJTY3JvbGxpbmdGcmFtZSIsIE1lbnUsIHsKICAgIFNpemUgPSBVRGltMi5uZXcoMCwgMTQwLCAxLCAtdG9udW1iZXIoVG9wQmFyLlNpemUuWS5PZmZzZXQgKyAyKSksCiAgICBQb3NpdGlvbiA9IFVEaW0yLm5ldygwLCAwLCAxLCAwKSwKICAgIEFuY2hvclBvaW50ID0gVmVjdG9yMi5uZXcoMCwgMSksCiAgICBDYW52YXNTaXplID0gVURpbTIubmV3KCksCiAgICBTY3JvbGxpbmdEaXJlY3Rpb24gPSAiWSIsCiAgICBBdXRvbWF0aWNDYW52YXNTaXplID0gIlkiLAogICAgQmFja2dyb3VuZFRyYW5zcGFyZW5jeSA9IDEsCiAgICBTY3JvbGxCYXJUaGlja25lc3MgPSAyCiAgfSlDcmVhdGUoIlVJUGFkZGluZyIsIFNjcm9sbEJhciwgewogICAgUGFkZGluZ0xlZnQgPSBVRGltLm5ldygwLCAxMCksCiAgICBQYWRkaW5nUmlnaHQgPSBVRGltLm5ldygwLCAxMCksCiAgICBQYWRkaW5nVG9wID0gVURpbS5uZXcoMCwgMTApLAogICAgUGFkZGluZ0JvdHRvbSA9IFVEaW0ubmV3KDAsIDEwKQogIH0pQ3JlYXRlKCJVSUxpc3RMYXlvdXQiLCBTY3JvbGxCYXIsIHsKICAgIFBhZGRpbmcgPSBVRGltLm5ldygwLCA1KQogIH0pCiAgCiAgbG9jYWwgQ29udGFpbmVycyA9IENyZWF0ZSgiRnJhbWUiLCBNZW51LCB7CiAgICBTaXplID0gVURpbTIubmV3KDEsIC10b251bWJlcihTY3JvbGxCYXIuU2l6ZS5YLk9mZnNldCArIDIpLCAxLCAtdG9udW1iZXIoVG9wQmFyLlNpemUuWS5PZmZzZXQgKyAyKSksCiAgICBBbmNob3JQb2ludCA9IFZlY3RvcjIubmV3KDEsIDEpLAogICAgUG9zaXRpb24gPSBVRGltMi5uZXcoMSwgMCwgMSwgMCksCiAgICBCYWNrZ3JvdW5kVHJhbnNwYXJlbmN5ID0gMQogIH0pQ29ybmVyKENvbnRhaW5lcnMpCiAgCiAgbG9jYWwgZnVuY3Rpb24gQWRkX0xpbmUocHJvcHMpCiAgICBsb2NhbCBsaW5lID0gQ3JlYXRlKCJGcmFtZSIsIGxpbmVfQ29udGFpbmVycywgcHJvcHMpCiAgICBsaW5lLkJhY2tncm91bmRDb2xvcjMgPSBDb25maWdzX0hVQi5Db3JfU3Ryb2tlCiAgICBsaW5lLkJvcmRlclNpemVQaXhlbCA9IDAKICBlbmQKICAKICBBZGRfTGluZSh7U2l6ZSA9IFVEaW0yLm5ldygxLCAwLCAwLCAxKSxQb3NpdGlvbiA9IFVEaW0yLm5ldygwLCAwLCAwLCBUb3BCYXIuU2l6ZS5ZLk9mZnNldCl9KQogIEFkZF9MaW5lKHtTaXplID0gVURpbTIubmV3KDAsIDEsIDEsIC10b251bWJlcihUb3BCYXIuU2l6ZS5ZLk9mZnNldCArIDEpKSwKICBQb3NpdGlvbiA9IFVEaW0yLm5ldygwLCBTY3JvbGxCYXIuU2l6ZS5YLk9mZnNldCwgMCwgVG9wQmFyLlNpemUuWS5PZmZzZXQpfSkKICAKICBsb2NhbCBmaXJzdFZpc2libGUgPSB0cnVlCiAgbG9jYWwgRmlyc3RUYWIgPSB0cnVlCiAgbG9jYWwgdGV4dHNpemUgPSAxNQogIGxvY2FsIHRleHRjb2xvciA9IENvbmZpZ3NfSFVCLkNvcl9UZXh0CiAgCiAgTWVudTpHZXRQcm9wZXJ0eUNoYW5nZWRTaWduYWwoIlNpemUiKTpDb25uZWN0KGZ1bmN0aW9uKCkKICAgIGlmIE1lbnUuU2l6ZS5ZLk9mZnNldCA+IDcwIHRoZW4KICAgICAgU2Nyb2xsQmFyLlZpc2libGUgPSB0cnVlCiAgICAgIENvbnRhaW5lcnMuVmlzaWJsZSA9IHRydWUKICAgICAgbGluZV9Db250YWluZXJzLlZpc2libGUgPSB0cnVlCiAgICBlbHNlCiAgICAgIFNjcm9sbEJhci5WaXNpYmxlID0gZmFsc2UKICAgICAgQ29udGFpbmVycy5WaXNpYmxlID0gZmFsc2UKICAgICAgbGluZV9Db250YWluZXJzLlZpc2libGUgPSBmYWxzZQogICAgZW5kCiAgZW5kKQogIAogIGZ1bmN0aW9uIE1ha2VUYWIoQ29uZmlncykKICAgIGxvY2FsIFRhYk5hbWUgPSBDb25maWdzLk5hbWUgb3IgIlRhYiIKICAgIGxvY2FsIFRhYlRpdGxlID0gQ29uZmlncy5UYWJUaXRsZSBvciBmYWxzZQogICAgCiAgICBsb2NhbCBGcmFtZSA9IENyZWF0ZSgiRnJhbWUiLCBTY3JvbGxCYXIsIHsKICAgICAgU2l6ZSA9IFVEaW0yLm5ldygxLCAwLCAwLCAyNSksCiAgICAgIEJhY2tncm91bmRUcmFuc3BhcmVuY3kgPSAxCiAgICB9KUNvcm5lcihGcmFtZSlTdHJva2UoRnJhbWUpCiAgICAKICAgIGxvY2FsIFRleHRCdXR0b24gPSBDcmVhdGUoIlRleHRCdXR0b24iLCBGcmFtZSwgewogICAgICBTaXplID0gVURpbTIubmV3KDEsIDAsIDEsIDApLAogICAgICBCYWNrZ3JvdW5kVHJhbnNwYXJlbmN5ID0gMSwKICAgICAgVGV4dCA9ICIiCiAgICB9KQogICAgCiAgICBsb2NhbCBUZXh0TGFiZWwgPSBDcmVhdGUoIlRleHRMYWJlbCIsIEZyYW1lLCB7CiAgICAgIFNpemUgPSBVRGltMi5uZXcoMSwgMCwgMSwgMCksCiAgICAgIEJhY2tncm91bmRUcmFuc3BhcmVuY3kgPSAxLAogICAgICBGb250ID0gQ29uZmlnc19IVUIuVGV4dF9Gb250LAogICAgICBUZXh0Q29sb3IzID0gdGV4dGNvbG9yLAogICAgICBUZXh0U2l6ZSA9IHRleHRzaXplLAogICAgICBUZXh0ID0gVGFiTmFtZQogICAgfSkKICAgIAogICAgbG9jYWwgQ29udGFpbmVyID0gQ3JlYXRlKCJTY3JvbGxpbmdGcmFtZSIsIENvbnRhaW5lcnMsIHsKICAgICAgU2l6ZSA9IFVEaW0yLm5ldygxLCAwLCAxLCAwKSwKICAgICAgU2Nyb2xsaW5nRGlyZWN0aW9uID0gIlkiLAogICAgICBBdXRvbWF0aWNDYW52YXNTaXplID0gIlkiLAogICAgICBDYW52YXNTaXplID0gVURpbTIubmV3KCksCiAgICAgIEJhY2tncm91bmRUcmFuc3BhcmVuY3kgPSAxLAogICAgICBTY3JvbGxCYXJUaGlja25lc3MgPSAyLAogICAgICBWaXNpYmxlID0gZmlyc3RWaXNpYmxlCiAgICB9KUNyZWF0ZSgiVUlQYWRkaW5nIiwgQ29udGFpbmVyLCB7CiAgICAgIFBhZGRpbmdMZWZ0ID0gVURpbS5uZXcoMCwgMTApLAogICAgICBQYWRkaW5nUmlnaHQgPSBVRGltLm5ldygwLCAxMCksCiAgICAgIFBhZGRpbmdUb3AgPSBVRGltLm5ldygwLCAxMCksCiAgICAgIFBhZGRpbmdCb3R0b20gPSBVRGltLm5ldygwLCAxMCkKICAgIH0pQ3JlYXRlKCJVSUxpc3RMYXlvdXQiLCBDb250YWluZXIsIHsKICAgICAgUGFkZGluZyA9IFVEaW0ubmV3KDAsIDUpCiAgICB9KQogICAgCiAgICBpZiBUYWJUaXRsZSB0aGVuCiAgICAgIENyZWF0ZSgiVGV4dExhYmVsIixDb250YWluZXIse0JhY2tncm91bmRUcmFuc3BhcmVuY3k9MSxUZXh0PSIjIi4uc3RyaW5nLmdzdWIoVGFiTmFtZSwiICIsIi0iKSxUZXh0U2l6ZT0yNSxGb250PUNvbmZpZ3NfSFVCLlRleHRfRm9udCxUZXh0WEFsaWdubWVudD0iTGVmdCIsVGV4dENvbG9yMz1Db25maWdzX0hVQi5Db3JfVGV4dCxTaXplPVVEaW0yLm5ldygxLCAwLCAwLCAzMCksUG9zaXRpb249VURpbTIubmV3KDAsIDMwLCAwLCAwKSxOYW1lPSJGcmFtZSJ9KQogICAgZW5kCiAgICAKICAgIFRleHRCdXR0b24uTW91c2VCdXR0b24xQ2xpY2s6Q29ubmVjdChmdW5jdGlvbigpCiAgICAgIGZvciBfLGNvbnRhaW5lciBpbiBwYWlycyhDb250YWluZXJzOkdldENoaWxkcmVuKCkpIGRvCiAgICAgICAgaWYgY29udGFpbmVyOklzQSgiU2Nyb2xsaW5nRnJhbWUiKSB0aGVuCiAgICAgICAgICBjb250YWluZXIuVmlzaWJsZSA9IGZhbHNlCiAgICAgICAgZW5kCiAgICAgIGVuZAogICAgICBmb3IgXyxmcmFtZSBpbiBwYWlycyhTY3JvbGxCYXI6R2V0Q2hpbGRyZW4oKSkgZG8KICAgICAgICBpZiBmcmFtZTpJc0EoIkZyYW1lIikgYW5kIGZyYW1lOkZpbmRGaXJzdENoaWxkKCJUZXh0TGFiZWwiKSBhbmQgZnJhbWUuVGV4dExhYmVsIH49IFRleHRMYWJlbCB0aGVuCiAgICAgICAgICBDcmVhdGVUd2VlbihmcmFtZS5UZXh0TGFiZWwsICJUZXh0Q29sb3IzIiwgQ29uZmlnc19IVUIuQ29yX0RhcmtUZXh0LCAwLjMsIGZhbHNlKQogICAgICAgICAgZnJhbWUuVGV4dExhYmVsLlRleHRTaXplID0gMTQKICAgICAgICBlbmQKICAgICAgZW5kCiAgICAgIENvbnRhaW5lci5WaXNpYmxlID0gdHJ1ZQogICAgICBDcmVhdGVUd2VlbihUZXh0TGFiZWwsICJUZXh0Q29sb3IzIiwgQ29uZmlnc19IVUIuQ29yX1RleHQsIDAuMywgZmFsc2UpCiAgICAgIFRleHRMYWJlbC5UZXh0U2l6ZSA9IDE1CiAgICBlbmQpCiAgICAKICAgIGZpcnN0VmlzaWJsZSA9IGZhbHNlCiAgICBGaXJzdFRhYiA9IGZhbHNlCiAgICB0ZXh0c2l6ZSA9IDE0CiAgICB0ZXh0Y29sb3IgPSBDb25maWdzX0hVQi5Db3JfRGFya1RleHQKICAgIHJldHVybiBDb250YWluZXIKICBlbmQKICAKICBmdW5jdGlvbiBBZGRCdXR0b24ocGFyZW50LCBDb25maWdzKQogICAgbG9jYWwgQnV0dG9uTmFtZSA9IENvbmZpZ3MuTmFtZSBvciAiQnV0dG9uISEiCiAgICBsb2NhbCBDYWxsYmFjayA9IENvbmZpZ3MuQ2FsbGJhY2sgb3IgZnVuY3Rpb24oKSBlbmQKICAgIAogICAgbG9jYWwgVGV4dEJ1dHRvbiA9IENyZWF0ZSgiVGV4dEJ1dHRvbiIsIHBhcmVudCwgewogICAgICBTaXplID0gVURpbTIubmV3KDEsIDAsIDAsIDI1KSwKICAgICAgQmFja2dyb3VuZENvbG9yMyA9IENvbmZpZ3NfSFVCLkNvcl9PcHRpb25zLAogICAgICBOYW1lID0gIkZyYW1lIiwKICAgICAgVGV4dCA9ICIiLAogICAgICBBdXRvQnV0dG9uQ29sb3IgPSBmYWxzZQogICAgfSlDb3JuZXIoVGV4dEJ1dHRvbilTdHJva2UoVGV4dEJ1dHRvbikKICAgIAogICAgbG9jYWwgVGV4dExhYmVsID0gQ3JlYXRlKCJUZXh0TGFiZWwiLCBUZXh0QnV0dG9uLCB7CiAgICAgIFRleHRTaXplID0gMTIsCiAgICAgIFRleHRDb2xvcjMgPSBDb25maWdzX0hVQi5Db3JfVGV4dCwKICAgICAgVGV4dCA9IEJ1dHRvbk5hbWUsCiAgICAgIFNpemUgPSBVRGltMi5uZXcoMSwgMCwgMSwgMCksCiAgICAgIFBvc2l0aW9uID0gVURpbTIubmV3KDAsIDM1LCAwLCAwKSwKICAgICAgQmFja2dyb3VuZFRyYW5zcGFyZW5jeSA9IDEsCiAgICAgIFRleHRYQWxpZ25tZW50ID0gIkxlZnQiLAogICAgICBGb250ID0gQ29uZmlnc19IVUIuVGV4dF9Gb250CiAgICB9KQogICAgCiAgICBsb2NhbCBJbWFnZUxhYmVsID0gQ3JlYXRlKCJJbWFnZUxhYmVsIiwgVGV4dEJ1dHRvbiwgewogICAgICBJbWFnZSA9ICJyYnhhc3NldGlkOi8vMTUxNTUyMTk0MDUiLAogICAgICBTaXplID0gVURpbTIubmV3KDAsIDIwLCAwLCAyMCksCiAgICAgIFBvc2l0aW9uID0gVURpbTIubmV3KDAsIDUsIDAsIDIuNSksCiAgICAgIEJhY2tncm91bmRUcmFuc3BhcmVuY3kgPSAxLAogICAgICBJbWFnZUNvbG9yMyA9IENvbmZpZ3NfSFVCLkNvcl9TdHJva2UKICAgIH0pCiAgICAKICAgIFRleHRCdXR0b24uTW91c2VCdXR0b24xQ2xpY2s6Q29ubmVjdChmdW5jdGlvbigpCiAgICAgIENhbGxiYWNrKCJDbGljayEhIikKICAgICAgQ3JlYXRlVHdlZW4oSW1hZ2VMYWJlbCwgIkltYWdlQ29sb3IzIiwgQ29sb3IzLmZyb21SR0IoMzAsIDE0MCwgMjAwKSwgMC4yLCB0cnVlKQogICAgICBDcmVhdGVUd2VlbihJbWFnZUxhYmVsLCAiSW1hZ2VDb2xvcjMiLCBDb25maWdzX0hVQi5Db3JfU3Ryb2tlLCAwLjIsIGZhbHNlKQogICAgZW5kKQogICAgCiAgICBUZXh0U2V0Q29sb3IoVGV4dExhYmVsKQogIGVuZAogIAogIGZ1bmN0aW9uIEFkZFRvZ2dsZShwYXJlbnQsIENvbmZpZ3MpCiAgICBsb2NhbCBUb2dnbGVOYW1lID0gQ29uZmlncy5OYW1lIG9yICJUb2dnbGUhISIKICAgIGxvY2FsIERlZmF1bHQgPSBDb25maWdzLkRlZmF1bHQgb3IgZmFsc2UKICAgIGxvY2FsIENhbGxiYWNrID0gQ29uZmlncy5DYWxsYmFjayBvciBmdW5jdGlvbigpIGVuZAogICAgCiAgICBsb2NhbCBUZXh0QnV0dG9uID0gQ3JlYXRlKCJUZXh0QnV0dG9uIiwgcGFyZW50LCB7CiAgICAgIFNpemUgPSBVRGltMi5uZXcoMSwgMCwgMCwgMjUpLAogICAgICBCYWNrZ3JvdW5kQ29sb3IzID0gQ29uZmlnc19IVUIuQ29yX09wdGlvbnMsCiAgICAgIE5hbWUgPSAiRnJhbWUiLAogICAgICBUZXh0ID0gIiIsCiAgICAgIEF1dG9CdXR0b25Db2xvciA9IGZhbHNlCiAgICB9KUNvcm5lcihUZXh0QnV0dG9uKVN0cm9rZShUZXh0QnV0dG9uKQogICAgCiAgICBsb2NhbCBUZXh0TGFiZWwgPSBDcmVhdGUoIlRleHRMYWJlbCIsIFRleHRCdXR0b24sIHsKICAgICAgVGV4dFNpemUgPSAxMiwKICAgICAgVGV4dENvbG9yMyA9IENvbmZpZ3NfSFVCLkNvcl9UZXh0LAogICAgICBUZXh0ID0gVG9nZ2xlTmFtZSwKICAgICAgU2l6ZSA9IFVEaW0yLm5ldygxLCAwLCAxLCAwKSwKICAgICAgUG9zaXRpb24gPSBVRGltMi5uZXcoMCwgMzUsIDAsIDApLAogICAgICBCYWNrZ3JvdW5kVHJhbnNwYXJlbmN5ID0gMSwKICAgICAgVGV4dFhBbGlnbm1lbnQgPSAiTGVmdCIsCiAgICAgIEZvbnQgPSBDb25maWdzX0hVQi5UZXh0X0ZvbnQKICAgIH0pCiAgICAKICAgIGxvY2FsIEZyYW1lMSA9IENyZWF0ZSgiRnJhbWUiLCBUZXh0QnV0dG9uLCB7CiAgICAgIFNpemUgPSBVRGltMi5uZXcoMCwgMjUsIDAsIDE1KSwKICAgICAgUG9zaXRpb24gPSBVRGltMi5uZXcoMCwgNSwgMCwgNSksCiAgICAgIEJhY2tncm91bmRUcmFuc3BhcmVuY3kgPSAxLAogICAgfSlDb3JuZXIoRnJhbWUxLCB7Q29ybmVyUmFkaXVzID0gVURpbS5uZXcoMSwgMCl9KQogICAgbG9jYWwgU3Ryb2tlID0gU3Ryb2tlKEZyYW1lMSwge1RoaWNrbmVzcyA9IDJ9KQogICAgCiAgICBsb2NhbCBGcmFtZTIgPSBDcmVhdGUoIkZyYW1lIiwgRnJhbWUxLCB7CiAgICAgIFNpemUgPSBVRGltMi5uZXcoMCwgMTMsIDAsIDEzKSwKICAgICAgUG9zaXRpb24gPSBVRGltMi5uZXcoMCwgMiwgMC41LCAwKSwKICAgICAgQW5jaG9yUG9pbnQgPSBWZWN0b3IyLm5ldygwLCAwLjUpLAogICAgICBCYWNrZ3JvdW5kQ29sb3IzID0gQ29uZmlnc19IVUIuQ29yX1N0cm9rZQogICAgfSlDb3JuZXIoRnJhbWUyLCB7Q29ybmVyUmFkaXVzID0gVURpbS5uZXcoMSwgMCl9KQogICAgCiAgICBsb2NhbCBPbk9mZiA9IGZhbHNlCiAgICBpZiBEZWZhdWx0IHRoZW4KICAgICAgT25PZmYgPSB0cnVlCiAgICAgIENyZWF0ZVR3ZWVuKEZyYW1lMiwgIlBvc2l0aW9uIiwgVURpbTIubmV3KDAsIDEwLCAwLjUsIDApLCAwLjIsIGZhbHNlKQogICAgICBDcmVhdGVUd2VlbihGcmFtZTIsICJCYWNrZ3JvdW5kQ29sb3IzIiwgQ29sb3IzLmZyb21SR0IoMzAsIDE0MCwgMjAwKSwgMC4yLCBmYWxzZSkKICAgICAgQ3JlYXRlVHdlZW4oU3Ryb2tlLCAiQ29sb3IiLCBDb2xvcjMuZnJvbVJHQigzMCwgMTQwLCAyMDApLCAwLjIsIGZhbHNlKQogICAgICBDcmVhdGVUd2VlbihUZXh0TGFiZWwsICJUZXh0Q29sb3IzIiwgQ29sb3IzLmZyb21SR0IoMzAsIDE0MCwgMjAwKSwgMC4yLCBmYWxzZSkKICAgIGVuZAogICAgQ2FsbGJhY2soT25PZmYpCiAgICBUZXh0QnV0dG9uLk1vdXNlQnV0dG9uMUNsaWNrOkNvbm5lY3QoZnVuY3Rpb24oKQogICAgICBpZiBGcmFtZTIuUG9zaXRpb24uWC5PZmZzZXQgPCA1IHRoZW4KICAgICAgICBPbk9mZiA9IHRydWUKICAgICAgICBDcmVhdGVUd2VlbihGcmFtZTIsICJQb3NpdGlvbiIsIFVEaW0yLm5ldygwLCAxMCwgMC41LCAwKSwgMC4yLCBmYWxzZSkKICAgICAgICBDcmVhdGVUd2VlbihGcmFtZTIsICJCYWNrZ3JvdW5kQ29sb3IzIiwgQ29sb3IzLmZyb21SR0IoMzAsIDE0MCwgMjAwKSwgMC4yLCBmYWxzZSkKICAgICAgICBDcmVhdGVUd2VlbihTdHJva2UsICJDb2xvciIsIENvbG9yMy5mcm9tUkdCKDMwLCAxNDAsIDIwMCksIDAuMiwgZmFsc2UpCiAgICAgICAgQ3JlYXRlVHdlZW4oVGV4dExhYmVsLCAiVGV4dENvbG9yMyIsIENvbG9yMy5mcm9tUkdCKDMwLCAxNDAsIDIwMCksIDAuMiwgZmFsc2UpCiAgICAgICAgQ2FsbGJhY2sodHJ1ZSkKICAgICAgZWxzZQogICAgICAgIE9uT2ZmID0gZmFsc2UKICAgICAgICBDcmVhdGVUd2VlbihGcmFtZTIsICJQb3NpdGlvbiIsIFVEaW0yLm5ldygwLCAyLCAwLjUsIDApLCAwLjIsIGZhbHNlKQogICAgICAgIENyZWF0ZVR3ZWVuKEZyYW1lMiwgIkJhY2tncm91bmRDb2xvcjMiLCBDb25maWdzX0hVQi5Db3JfU3Ryb2tlLCAwLjIsIGZhbHNlKQogICAgICAgIENyZWF0ZVR3ZWVuKFN0cm9rZSwgIkNvbG9yIiwgQ29uZmlnc19IVUIuQ29yX1N0cm9rZSwgMC4yLCBmYWxzZSkKICAgICAgICBDcmVhdGVUd2VlbihUZXh0TGFiZWwsICJUZXh0Q29sb3IzIiwgQ29uZmlnc19IVUIuQ29yX1RleHQsIDAuMiwgZmFsc2UpCiAgICAgICAgQ2FsbGJhY2soZmFsc2UpCiAgICAgIGVuZAogICAgZW5kKQogICAgcmV0dXJuIHtGcmFtZTIsIFN0cm9rZSwgT25PZmYsIENhbGxiYWNrfQogIGVuZAogIAogIGZ1bmN0aW9uIEFkZE1vYmlsZVRvZ2dsZShDb25maWdzKQogICAgbG9jYWwgbmFtZSA9IENvbmZpZ3MuTmFtZSBvciAiQXRhbGhvIgogICAgbG9jYWwgQ2FsbGJhY2sgPSBDb25maWdzLkNhbGxiYWNrIG9yIGZ1bmN0aW9uKCkgZW5kCiAgICBsb2NhbCB2aXNpYmxlID0gQ29uZmlncy5WaXNpYmxlIG9yIGZhbHNlCiAgICAKICAgIGxvY2FsIFRvZ2dsZV9BdGFsaG8gPSBDcmVhdGUoIkZyYW1lIiwgU2NyZWVuR3VpLCB7CiAgICAgIFNpemUgPSBVRGltMi5uZXcoMCwgMTAwLCAwLCA2MCksCiAgICAgIFBvc2l0aW9uID0gVURpbTIubmV3KDAuOCwgMCwgMC44LCAwKSwKICAgICAgQW5jaG9yUG9pbnQgPSBWZWN0b3IyLm5ldygwLjUsIDAuNSksCiAgICAgIEJhY2tncm91bmRDb2xvcjMgPSBDb25maWdzX0hVQi5Db3JfSHViLAogICAgICBEcmFnZ2FibGUgPSB0cnVlLAogICAgICBBY3RpdmUgPSB0cnVlLAogICAgICBWaXNpYmxlID0gdmlzaWJsZQogICAgfSlDb3JuZXIoVG9nZ2xlX0F0YWxobykKICAgIAogICAgbG9jYWwgVGV4dExhYmVsID0gQ3JlYXRlKCJUZXh0TGFiZWwiLCBUb2dnbGVfQXRhbGhvLCB7CiAgICAgIFNpemUgPSBVRGltMi5uZXcoMSwgMCwgMCwgMjApLAogICAgICBUZXh0U2l6ZSA9IDIwLAogICAgICBGb250ID0gQ29uZmlnc19IVUIuVGV4dF9Gb250LAogICAgICBUZXh0Q29sb3IzID0gQ29uZmlnc19IVUIuQ29yX1RleHQsCiAgICAgIFRleHQgPSBuYW1lLAogICAgICBCYWNrZ3JvdW5kVHJhbnNwYXJlbmN5ID0gMQogICAgfSkKICAgIAogICAgbG9jYWwgQnV0dG9uID0gQ3JlYXRlKCJUZXh0QnV0dG9uIiwgVG9nZ2xlX0F0YWxobywgewogICAgICBTaXplID0gVURpbTIubmV3KDEsIDAsIDAsIDQwKSwKICAgICAgUG9zaXRpb24gPSBVRGltMi5uZXcoMCwgMCwgMCwgMjApLAogICAgICBCYWNrZ3JvdW5kVHJhbnNwYXJlbmN5ID0gMSwKICAgICAgVGV4dCA9ICIiCiAgICB9KQogICAgCiAgICBsb2NhbCBGcmFtZSA9IENyZWF0ZSgiRnJhbWUiLCBCdXR0b24sIHsKICAgICAgUG9zaXRpb24gPSBVRGltMi5uZXcoMC41LCAwLCAwLjUsIDApLAogICAgICBBbmNob3JQb2ludCA9IFZlY3RvcjIubmV3KDAuNSwgMC41KSwKICAgICAgU2l6ZSA9IFVEaW0yLm5ldygxLCAtNDAsIDEsIC0xNSksCiAgICAgIEJhY2tncm91bmRUcmFuc3BhcmVuY3kgPSAxCiAgICB9KUNvcm5lcihGcmFtZSwge0Nvcm5lclJhZGl1cyA9IFVEaW0ubmV3KDIsIDApfSkKICAgIAogICAgbG9jYWwgRnJhbWUyID0gQ3JlYXRlKCJGcmFtZSIsIEZyYW1lLCB7CiAgICAgIFBvc2l0aW9uID0gVURpbTIubmV3KDAsIDUsIDAuNSwgMCksCiAgICAgIEFuY2hvclBvaW50ID0gVmVjdG9yMi5uZXcoMCwgMC41KSwKICAgICAgU2l6ZSA9IFVEaW0yLm5ldygwLCAxNywgMCwgMTcpLAogICAgICBCYWNrZ3JvdW5kVHJhbnNwYXJlbmN5ID0gMQogICAgfSlDb3JuZXIoRnJhbWUyLCB7Q29ybmVyUmFkaXVzID0gVURpbS5uZXcoNSwgMCl9KQogICAgCiAgICBsb2NhbCBzdHJva2UgPSBTdHJva2UoRnJhbWUsIHsKICAgICAgQ29sb3IgPSBDb2xvcjMuZnJvbVJHQigxMDAsIDEwMCwgMTAwKSwKICAgICAgVGhpY2tuZXNzID0gMwogICAgfSkKICAgIAogICAgbG9jYWwgc3Ryb2tlID0gU3Ryb2tlKEZyYW1lMiwgewogICAgICBDb2xvciA9IENvbG9yMy5mcm9tUkdCKDEwMCwgMTAwLCAxMDApLAogICAgICBUaGlja25lc3MgPSAzCiAgICB9KQogICAgCiAgICBsb2NhbCBPbk9mZiA9IGZhbHNlCiAgICBDYWxsYmFjayhPbk9mZikKICAgIEJ1dHRvbi5Nb3VzZUJ1dHRvbjFDbGljazpDb25uZWN0KGZ1bmN0aW9uKCkKICAgICAgaWYgT25PZmYgPT0gZmFsc2UgdGhlbgogICAgICAgIENyZWF0ZVR3ZWVuKEZyYW1lMiwgIlBvc2l0aW9uIiwgVURpbTIubmV3KDEsIC0yMiwgMC41LCAwKSwgMC4yLCBmYWxzZSkKICAgICAgZWxzZQogICAgICAgIENyZWF0ZVR3ZWVuKEZyYW1lMiwgIlBvc2l0aW9uIiwgVURpbTIubmV3KDAsIDUsIDAuNSwgMCksIDAuMiwgZmFsc2UpCiAgICAgIGVuZAogICAgICBPbk9mZiA9IG5vdCBPbk9mZgogICAgICBDYWxsYmFjayhPbk9mZikKICAgIGVuZCkKICAgIAogICAgcmV0dXJuIFRvZ2dsZV9BdGFsaG8KICBlbmQKICAKICBmdW5jdGlvbiBVcGRhdGVUb2dnbGUodG9nZ2xlLCB2YWx1ZSkKICAgIGxvY2FsIEZyYW1lMiA9IHRvZ2dsZVsxXQogICAgbG9jYWwgU3Ryb2tlID0gdG9nZ2xlWzJdCiAgICBsb2NhbCBPbk9mZiA9IHZhbHVlCiAgICBsb2NhbCBDYWxsYmFjayA9IHRvZ2dsZVs0XQogICAgCiAgICBpZiBPbk9mZiB0aGVuCiAgICAgIENhbGxiYWNrKHRydWUpCiAgICAgIENyZWF0ZVR3ZWVuKEZyYW1lMiwgIlBvc2l0aW9uIiwgVURpbTIubmV3KDAsIDEwLCAwLjUsIDApLCAwLjIsIGZhbHNlKQogICAgICBDcmVhdGVUd2VlbihGcmFtZTIsICJCYWNrZ3JvdW5kQ29sb3IzIiwgQ29sb3IzLmZyb21SR0IoMzAsIDE0MCwgMjAwKSwgMC4yLCBmYWxzZSkKICAgICAgQ3JlYXRlVHdlZW4oU3Ryb2tlLCAiQ29sb3IiLCBDb2xvcjMuZnJvbVJHQigzMCwgMTQwLCAyMDApLCAwLjIsIGZhbHNlKQogICAgICBDcmVhdGVUd2VlbihUZXh0TGFiZWwsICJUZXh0Q29sb3IzIiwgQ29sb3IzLmZyb21SR0IoMzAsIDE0MCwgMjAwKSwgMC4yLCBmYWxzZSkKICAgIGVsc2UKICAgICAgQ2FsbGJhY2soZmFsc2UpCiAgICAgIENyZWF0ZVR3ZWVuKEZyYW1lMiwgIlBvc2l0aW9uIiwgVURpbTIubmV3KDAsIDIsIDAuNSwgMCksIDAuMiwgZmFsc2UpCiAgICAgIENyZWF0ZVR3ZWVuKEZyYW1lMiwgIkJhY2tncm91bmRDb2xvcjMiLCBDb25maWdzX0hVQi5Db3JfU3Ryb2tlLCAwLjIsIGZhbHNlKQogICAgICBDcmVhdGVUd2VlbihTdHJva2UsICJDb2xvciIsIENvbmZpZ3NfSFVCLkNvcl9TdHJva2UsIDAuMiwgZmFsc2UpCiAgICAgIENyZWF0ZVR3ZWVuKFRleHRMYWJlbCwgIlRleHRDb2xvcjMiLCBDb25maWdzX0hVQi5Db3JfVGV4dCwgMC4yLCBmYWxzZSkKICAgIGVuZAogIGVuZAogIAogIGZ1bmN0aW9uIEFkZFNsaWRlcihwYXJlbnQsIENvbmZpZ3MpCiAgICBsb2NhbCBTbGlkZXJOYW1lID0gQ29uZmlncy5OYW1lIG9yICJTbGlkZXIhISIKICAgIGxvY2FsIEluY3JlYXNlID0gQ29uZmlncy5JbmNyZWFzZSBvciAxCiAgICBsb2NhbCBNaW5WYWx1ZSA9IENvbmZpZ3MuTWluVmFsdWUgLyBJbmNyZWFzZSBvciAxMCAvIEluY3JlYXNlCiAgICBsb2NhbCBNYXhWYWx1ZSA9IENvbmZpZ3MuTWF4VmFsdWUgLyBJbmNyZWFzZSBvciAxMDAgLyBJbmNyZWFzZQogICAgbG9jYWwgRGVmYXVsdCA9IENvbmZpZ3MuRGVmYXVsdCBvciAyNQogICAgbG9jYWwgQ2FsbGJhY2sgPSBDb25maWdzLkNhbGxiYWNrIG9yIGZ1bmN0aW9uKCkgZW5kCiAgICAKICAgIGxvY2FsIEZyYW1lID0gQ3JlYXRlKCJUZXh0QnV0dG9uIiwgcGFyZW50LCB7CiAgICAgIFNpemUgPSBVRGltMi5uZXcoMSwgMCwgMCwgMjUpLAogICAgICBCYWNrZ3JvdW5kQ29sb3IzID0gQ29uZmlnc19IVUIuQ29yX09wdGlvbnMsCiAgICAgIE5hbWUgPSAiRnJhbWUiLAogICAgICBUZXh0ID0gMAogICAgfSlDb3JuZXIoRnJhbWUpU3Ryb2tlKEZyYW1lKQogICAgCiAgICBsb2NhbCBUZXh0TGFiZWwgPSBDcmVhdGUoIlRleHRCdXR0b24iLCBGcmFtZSwgewogICAgICBUZXh0U2l6ZSA9IDEyLAogICAgICBUZXh0Q29sb3IzID0gQ29uZmlnc19IVUIuQ29yX1RleHQsCiAgICAgIFRleHQgPSBTbGlkZXJOYW1lLAogICAgICBTaXplID0gVURpbTIubmV3KDEsIDAsIDEsIDApLAogICAgICBQb3NpdGlvbiA9IFVEaW0yLm5ldygwLCAxNTAsIDAsIDApLAogICAgICBCYWNrZ3JvdW5kVHJhbnNwYXJlbmN5ID0gMSwKICAgICAgVGV4dFhBbGlnbm1lbnQgPSAiTGVmdCIsCiAgICAgIEZvbnQgPSBDb25maWdzX0hVQi5UZXh0X0ZvbnQKICAgIH0pVGV4dFNldENvbG9yKFRleHRMYWJlbCkKICAgIAogICAgbG9jYWwgVGV4dExhYmVsTnVtYmVyID0gQ3JlYXRlKCJUZXh0TGFiZWwiLCBGcmFtZSwgewogICAgICBGb250ID0gQ29uZmlnc19IVUIuVGV4dF9Gb250LAogICAgICBTaXplID0gVURpbTIubmV3KDAsIDIwLCAwLCAyMCksCiAgICAgIFRleHQgPSAiLi4uIiwKICAgICAgUG9zaXRpb24gPSBVRGltMi5uZXcoMCwgNSwgMCwgMi41KSwKICAgICAgVGV4dFNjYWxlZCA9IHRydWUsCiAgICAgIFRleHRDb2xvcjMgPSBDb25maWdzX0hVQi5Db3JfVGV4dCwKICAgICAgQmFja2dyb3VuZFRyYW5zcGFyZW5jeSA9IDEKICAgIH0pCiAgICAKICAgIGxvY2FsIFNsaWRlckJhcjEgPSBDcmVhdGUoIlRleHRMYWJlbCIsIEZyYW1lLCB7CiAgICAgIFNpemUgPSBVRGltMi5uZXcoMCwgMTAwLCAwLCA3LjUpLAogICAgICBQb3NpdGlvbiA9IFVEaW0yLm5ldygwLCAzNSwgMC41LCAwKSwKICAgICAgQW5jaG9yUG9pbnQgPSBWZWN0b3IyLm5ldygwLCAwLjUpLAogICAgICBCYWNrZ3JvdW5kQ29sb3IzID0gQ29uZmlnc19IVUIuQ29yX1N0cm9rZSwKICAgICAgVGV4dCA9ICIiCiAgICB9KUNvcm5lcihTbGlkZXJCYXIxKQogICAgCiAgICBsb2NhbCBTYXZlUG9zID0gQ3JlYXRlKCJGcmFtZSIsIFNsaWRlckJhcjEsIHsKICAgICAgU2l6ZSA9IFVEaW0yLm5ldygwLCAxLCAwLCAwKSwKICAgICAgVmlzaWJsZSA9IGZhbHNlCiAgICB9KQogICAgCiAgICBsb2NhbCBTbGlkZXIgPSBDcmVhdGUoIkZyYW1lIiwgU2xpZGVyQmFyMSwgewogICAgICBCYWNrZ3JvdW5kQ29sb3IzID0gQ29uZmlnc19IVUIuQ29yX1RleHQsCiAgICAgIFNpemUgPSBVRGltMi5uZXcoMCwgNy41LCAwLCAxNSksCiAgICAgIFBvc2l0aW9uID0gVURpbTIubmV3KDAsIDAsIDAuNSwgMCksCiAgICAgIEFuY2hvclBvaW50ID0gVmVjdG9yMi5uZXcoMCwgMC41KSwKICAgICAgQWN0aXZlID0gdHJ1ZSwKICAgICAgRHJhZ2dhYmxlID0gdHJ1ZQogICAgfSlDb3JuZXIoU2xpZGVyKQogICAgCiAgICBsb2NhbCBTbGlkZXJCYXIyID0gQ3JlYXRlKCJGcmFtZSIsIFNsaWRlckJhcjEsIHsKICAgICAgQmFja2dyb3VuZENvbG9yMyA9IENvbG9yMy5mcm9tUkdCKDMwLCAxNDAsIDIwMCksCiAgICAgIFNpemUgPSBVRGltMi5uZXcoMCwgU2xpZGVyLlBvc2l0aW9uLlguT2Zmc2V0LCAxLCAwKQogICAgfSlDb3JuZXIoU2xpZGVyQmFyMikKICAgIAogICAgbG9jYWwgZnVuY3Rpb24gVXBkQ291bnRlcihWYWx1ZSkKICAgICAgbG9jYWwgU3RyaW5nID0gdG9zdHJpbmcoVmFsdWUgKiBJbmNyZWFzZSkKICAgICAgaWYgc3RyaW5nLmZpbmQoU3RyaW5nLCAiLiIpIHRoZW4KICAgICAgICBTdHJpbmcgPSBTdHJpbmc6c3ViKDEsIDUpCiAgICAgIGVuZAogICAgICBUZXh0TGFiZWxOdW1iZXIuVGV4dCA9IFN0cmluZwogICAgICBDYWxsYmFjayhWYWx1ZSAqIEluY3JlYXNlKQogICAgZW5kCiAgICAKICAgIGxvY2FsIE1vdXNlRW50ZXJPckxlYXZlID0gZmFsc2UKICAgIEZyYW1lLk1vdXNlQnV0dG9uMURvd246Q29ubmVjdChmdW5jdGlvbigpCiAgICAgIE1vdXNlRW50ZXJPckxlYXZlID0gdHJ1ZQogICAgICB3aGlsZSBNb3VzZUVudGVyT3JMZWF2ZSBkbyB0YXNrLndhaXQoKQogICAgICAgIGxvY2FsIE1vdXNlUG9zID0gVXNlcklucHV0U2VydmljZTpHZXRNb3VzZUxvY2F0aW9uKCkuWCAtIFNhdmVQb3MuQWJzb2x1dGVQb3NpdGlvbi5YCiAgICAgICAgU2xpZGVyLlBvc2l0aW9uID0gVURpbTIubmV3KDAsIE1vdXNlUG9zLCAwLjUsIDApCiAgICAgIGVuZAogICAgZW5kKQogICAgRnJhbWUuTW91c2VMZWF2ZTpDb25uZWN0KGZ1bmN0aW9uKCkKICAgICAgTW91c2VFbnRlck9yTGVhdmUgPSBmYWxzZQogICAgZW5kKQogICAgCiAgICBsb2NhbCBmdW5jdGlvbiBTbGlkZXJTZXQoTmV3VmFsdWUpCiAgICAgIGxvY2FsIG1heCwgbWluID0gTWF4VmFsdWUgKiBJbmNyZWFzZSwgTWluVmFsdWUgKiBJbmNyZWFzZQogICAgICBsb2NhbCBTbGlkZXJQb3MgPSAoTmV3VmFsdWUgLSBtaW4pIC8gKG1heCAtIG1pbikKICAgICAgbG9jYWwgWF9PZmZzZXQgPSBTbGlkZXJQb3MgKiAxMDAKICAgICAgbG9jYWwgU2xpZGVyUG9zaXRpb24gPSBVRGltMi5uZXcoMCwgWF9PZmZzZXQgKyAxLCAwLCAwKQogICAgICBDcmVhdGVUd2VlbihTbGlkZXIsICJQb3NpdGlvbiIsIFNsaWRlclBvc2l0aW9uLCAwLjUsIGZhbHNlKQogICAgZW5kCiAgICBTbGlkZXJTZXQoRGVmYXVsdCkKICAgIAogICAgU2xpZGVyLkNoYW5nZWQ6Q29ubmVjdChmdW5jdGlvbihwcm9wKQogICAgICBpZiBwcm9wID09ICJQb3NpdGlvbiIgdGhlbgogICAgICAgIFNsaWRlci5Qb3NpdGlvbiA9IFVEaW0yLm5ldygwLCBtYXRoLmNsYW1wKFNsaWRlci5Qb3NpdGlvbi5YLk9mZnNldCwgMCwgMTAwKSwgMC41LCAwKQogICAgICAgIFNsaWRlckJhcjIuU2l6ZSA9IFVEaW0yLm5ldygwLCBTbGlkZXIuUG9zaXRpb24uWC5PZmZzZXQsIDEsIDApCiAgICAgICAgbG9jYWwgU2xpZGVyUG9zID0gU2xpZGVyLlBvc2l0aW9uLlguT2Zmc2V0IC8gMTAwCiAgICAgICAgbG9jYWwgQV8xID0gbWF0aC5mbG9vcigoKFNsaWRlclBvcyAqIE1heFZhbHVlKSAvIE1heFZhbHVlKSAqIChNYXhWYWx1ZSAtIE1pblZhbHVlKSArIE1pblZhbHVlKQogICAgICAgIFVwZENvdW50ZXIoQV8xKQogICAgICBlbmQKICAgIGVuZCkKICAgIHJldHVybiB7U2xpZGVyLCBJbmNyZWFzZSwgTWF4VmFsdWUsIE1pblZhbHVlfQogIGVuZAogIAogIGZ1bmN0aW9uIFVwZGF0ZVNsaWRlcihTbGlkZXIsIE5ld1ZhbHVlKQogICAgbG9jYWwgRnJhbWUgPSBTbGlkZXJbMV0KICAgIGxvY2FsIEluY3JlYXNlID0gU2xpZGVyWzJdCiAgICBsb2NhbCBNYXggPSBTbGlkZXJbM10gKiBJbmNyZWFzZQogICAgbG9jYWwgTWluID0gU2xpZGVyWzRdICogSW5jcmVhc2UKICAgIAogICAgbG9jYWwgU2xpZGVyUG9zID0gKE5ld1ZhbHVlIC0gTWluKSAvIChNYXggLSBNaW4pCiAgICBsb2NhbCBYX09mZnNldCA9IFNsaWRlclBvcyAqIDEwMAogICAgbG9jYWwgU2xpZGVyUG9zaXRpb24gPSBVRGltMi5uZXcoMCwgWF9PZmZzZXQgKyAxLCAwLCAwKQogICAgQ3JlYXRlVHdlZW4oRnJhbWUsICJQb3NpdGlvbiIsIFNsaWRlclBvc2l0aW9uLCAwLjUsIGZhbHNlKQogIGVuZAogIAogIGZ1bmN0aW9uIEFkZEtleWJpbmQocGFyZW50LCBDb25maWdzKQogICAgbG9jYWwgS2V5YmluZE5hbWUgPSBDb25maWdzLk5hbWUgb3IgIlNsaWRlciEhIgogICAgbG9jYWwgS2V5Q29kZSA9IENvbmZpZ3MuS2V5Q29kZSBvciAiRSIKICAgIGxvY2FsIERlZmF1bHQgPSBDb25maWdzLkRlZmF1bHQgb3IgZmFsc2UKICAgIGxvY2FsIENhbGxiYWNrID0gQ29uZmlncy5DYWxsYmFjayBvciBmdW5jdGlvbigpIGVuZAogICAgCiAgICBsb2NhbCBGcmFtZSA9IENyZWF0ZSgiRnJhbWUiLCBwYXJlbnQsIHsKICAgICAgU2l6ZSA9IFVEaW0yLm5ldygxLCAwLCAwLCAyNSksCiAgICAgIEJhY2tncm91bmRDb2xvcjMgPSBDb25maWdzX0hVQi5Db3JfT3B0aW9ucywKICAgICAgTmFtZSA9ICJGcmFtZSIKICAgIH0pQ29ybmVyKEZyYW1lKVN0cm9rZShGcmFtZSkKICAgIAogICAgbG9jYWwgVGV4dExhYmVsID0gQ3JlYXRlKCJUZXh0QnV0dG9uIiwgRnJhbWUsIHsKICAgICAgVGV4dFNpemUgPSAxMiwKICAgICAgVGV4dENvbG9yMyA9IENvbmZpZ3NfSFVCLkNvcl9UZXh0LAogICAgICBUZXh0ID0gS2V5YmluZE5hbWUsCiAgICAgIFNpemUgPSBVRGltMi5uZXcoMSwgMCwgMSwgMCksCiAgICAgIFBvc2l0aW9uID0gVURpbTIubmV3KDAsIDM1LCAwLCAwKSwKICAgICAgQmFja2dyb3VuZFRyYW5zcGFyZW5jeSA9IDEsCiAgICAgIFRleHRYQWxpZ25tZW50ID0gIkxlZnQiLAogICAgICBGb250ID0gQ29uZmlnc19IVUIuVGV4dF9Gb250CiAgICB9KQogICAgCiAgICBsb2NhbCBLZXliaW5kID0gQ3JlYXRlKCJUZXh0TGFiZWwiLCBGcmFtZSwgewogICAgICBGb250ID0gQ29uZmlnc19IVUIuVGV4dF9Gb250LAogICAgICBTaXplID0gVURpbTIubmV3KDAsIDE4LCAwLCAxOCksCiAgICAgIFRleHQgPSBLZXlDb2RlLAogICAgICBQb3NpdGlvbiA9IFVEaW0yLm5ldygwLCA1LCAwLCAzLjUpLAogICAgICBUZXh0U2NhbGVkID0gdHJ1ZSwKICAgICAgVGV4dENvbG9yMyA9IENvbmZpZ3NfSFVCLkNvcl9UZXh0LAogICAgICBCYWNrZ3JvdW5kVHJhbnNwYXJlbmN5ID0gMQogICAgfSlDb3JuZXIoS2V5YmluZClTdHJva2UoS2V5YmluZCkKICAgIAogICAgbG9jYWwgT25PZmYgPSBEZWZhdWx0CiAgICBVc2VySW5wdXRTZXJ2aWNlLklucHV0QmVnYW46Q29ubmVjdChmdW5jdGlvbihpbnB1dCkKICAgICAgaWYgaW5wdXQuS2V5Q29kZSA9PSBFbnVtLktleUNvZGVbS2V5Q29kZV0gdGhlbgogICAgICAgIE9uT2ZmID0gbm90IE9uT2ZmCiAgICAgICAgQ2FsbGJhY2soT25PZmYpCiAgICAgIGVuZAogICAgZW5kKQogICAgVGV4dFNldENvbG9yKFRleHRMYWJlbCkKICBlbmQKICAKICBmdW5jdGlvbiBBZGRUZXh0Qm94KHBhcmVudCwgQ29uZmlncykKICAgIGxvY2FsIFRleHRCb3hOYW1lID0gQ29uZmlncy5OYW1lIG9yICJUZXh0Qm94ISEiCiAgICBsb2NhbCBEZWZhdWx0ID0gQ29uZmlncy5EZWZhdWx0IG9yICJUZXh0Qm94IgogICAgbG9jYWwgcGxhY2Vob2xkZXJUZXh0ID0gQ29uZmlncy5QbGFjZWhvbGRlclRleHQgb3IgIlRleHRCb3giCiAgICBsb2NhbCBDbGVhclRleHQgPSBDb25maWdzLkNsZWFyVGV4dCBvciBmYWxzZQogICAgbG9jYWwgQ2FsbGJhY2sgPSBDb25maWdzLkNhbGxiYWNrIG9yIGZ1bmN0aW9uKCkgZW5kCiAgICAKICAgIGxvY2FsIEZyYW1lID0gQ3JlYXRlKCJGcmFtZSIsIHBhcmVudCwgewogICAgICBTaXplID0gVURpbTIubmV3KDEsIDAsIDAsIDI1KSwKICAgICAgQmFja2dyb3VuZENvbG9yMyA9IENvbmZpZ3NfSFVCLkNvcl9PcHRpb25zLAogICAgICBOYW1lID0gIkZyYW1lIgogICAgfSlDb3JuZXIoRnJhbWUpU3Ryb2tlKEZyYW1lKQogICAgCiAgICBsb2NhbCBUZXh0TGFiZWwgPSBDcmVhdGUoIlRleHRCdXR0b24iLCBGcmFtZSwgewogICAgICBUZXh0U2l6ZSA9IDEyLAogICAgICBUZXh0Q29sb3IzID0gQ29uZmlnc19IVUIuQ29yX1RleHQsCiAgICAgIFRleHQgPSBUZXh0Qm94TmFtZSwKICAgICAgU2l6ZSA9IFVEaW0yLm5ldygxLCAwLCAxLCAwKSwKICAgICAgUG9zaXRpb24gPSBVRGltMi5uZXcoMCwgMTUwLCAwLCAwKSwKICAgICAgQmFja2dyb3VuZFRyYW5zcGFyZW5jeSA9IDEsCiAgICAgIFRleHRYQWxpZ25tZW50ID0gIkxlZnQiLAogICAgICBGb250ID0gQ29uZmlnc19IVUIuVGV4dF9Gb250CiAgICB9KQogICAgVGV4dFNldENvbG9yKFRleHRMYWJlbCkKICAgIAogICAgbG9jYWwgVGV4dEJveCA9IENyZWF0ZSgiVGV4dEJveCIsIEZyYW1lLCB7CiAgICAgIFNpemUgPSBVRGltMi5uZXcoMCwgMTIwLCAwLCAyMCksCiAgICAgIFBvc2l0aW9uID0gVURpbTIubmV3KDAsIDE1LCAwLCAyLjUpLAogICAgICBUZXh0Q29sb3IzID0gQ29uZmlnc19IVUIuQ29yX1RleHQsCiAgICAgIFRleHQgPSBEZWZhdWx0LAogICAgICBDbGVhclRleHRPbkZvY3VzID0gQ2xlYXJUZXh0LAogICAgICBQbGFjZWhvbGRlclRleHQgPSBwbGFjZWhvbGRlclRleHQsCiAgICAgIFRleHRTY2FsZWQgPSB0cnVlLAogICAgICBGb250ID0gQ29uZmlnc19IVUIuVGV4dF9Gb250LAogICAgICBCYWNrZ3JvdW5kVHJhbnNwYXJlbmN5ID0gMQogICAgfSkKICAgIAogICAgbG9jYWwgTGluZSA9IENyZWF0ZSgiRnJhbWUiLCBUZXh0Qm94LCB7CiAgICAgIFNpemUgPSBVRGltMi5uZXcoMSwgMCwgMCwgMSksCiAgICAgIFBvc2l0aW9uID0gVURpbTIubmV3KDAuNSwgMCwgMSwgMCksCiAgICAgIEFuY2hvclBvaW50ID0gVmVjdG9yMi5uZXcoMC41LCAwLjUpLAogICAgICBCYWNrZ3JvdW5kQ29sb3IzID0gQ29uZmlnc19IVUIuQ29yX1N0cm9rZSwKICAgICAgQm9yZGVyU2l6ZVBpeGVsID0gMAogICAgfSkKICAgIAogICAgVGV4dEJveC5Nb3VzZUVudGVyOkNvbm5lY3QoZnVuY3Rpb24oKQogICAgICBDcmVhdGVUd2VlbihMaW5lLCAiU2l6ZSIsIFVEaW0yLm5ldygwLCAwLCAwLCAxKSwgMC4zLCB0cnVlKQogICAgICBDcmVhdGVUd2VlbihMaW5lLCAiU2l6ZSIsIFVEaW0yLm5ldygxLCAwLCAwLCAxKSwgMC4zLCB0cnVlKQogICAgZW5kKQogICAgCiAgICBUZXh0Qm94LkZvY3VzTG9zdDpDb25uZWN0KGZ1bmN0aW9uKCkKICAgICAgQ2FsbGJhY2soVGV4dEJveC5UZXh0KQogICAgZW5kKQogIGVuZAogIAogIGZ1bmN0aW9uIEFkZENvbG9yUGlja2VyKHBhcmVudCwgQ29uZmlncykKICAgIGxvY2FsIG5hbWUgPSBDb25maWdzLk5hbWUgb3IgIkNvbG9yIFBpY2tlciIKICAgIGxvY2FsIERlZmF1bHQgPSBDb25maWdzLkRlZmF1bHQgb3IgQ29sb3IzLmZyb21SR0IoMCwgMCwgMjAwKQogICAgbG9jYWwgQ2FsbGJhY2sgPSBDb25maWdzLkNhbGxiYWNrIG9yIGZ1bmN0aW9uKCkgZW5kCiAgICBsb2NhbCBDb2xvckgsIENvbG9yUywgQ29sb3JWID0gMSwgMSwgMQogICAgQ2FsbGJhY2soRGVmYXVsdCkKICAgIAogICAgbG9jYWwgVGV4dEJ1dHRvbiA9IENyZWF0ZSgiRnJhbWUiLCBwYXJlbnQsIHsKICAgICAgU2l6ZSA9IFVEaW0yLm5ldygxLCAwLCAwLCAyNSksCiAgICAgIEJhY2tncm91bmRDb2xvcjMgPSBDb25maWdzX0hVQi5Db3JfT3B0aW9ucywKICAgIH0pU3Ryb2tlKFRleHRCdXR0b24pQ29ybmVyKFRleHRCdXR0b24pCiAgICAKICAgIGxvY2FsIGNsaWNrID0gQ3JlYXRlKCJUZXh0QnV0dG9uIiwgVGV4dEJ1dHRvbiwgewogICAgICBTaXplID0gVURpbTIubmV3KDEsIDAsIDAsIDI1KSwKICAgICAgQmFja2dyb3VuZFRyYW5zcGFyZW5jeSA9IDEsCiAgICAgIEF1dG9CdXR0b25Db2xvciA9IGZhbHNlLAogICAgICBUZXh0ID0gIiIKICAgIH0pCiAgICAKICAgIGxvY2FsIFRleHRMYWJlbCA9IENyZWF0ZSgiVGV4dExhYmVsIiwgVGV4dEJ1dHRvbiwgewogICAgICBTaXplID0gVURpbTIubmV3KDEsIC0xMCwgMCwgMjUpLAogICAgICBQb3NpdGlvbiA9IFVEaW0yLm5ldygwLCAzNSwgMCwgMCksCiAgICAgIFRleHRTaXplID0gMTIsCiAgICAgIFRleHRDb2xvcjMgPSBDb25maWdzX0hVQi5Db3JfVGV4dCwKICAgICAgVGV4dFhBbGlnbm1lbnQgPSAiTGVmdCIsCiAgICAgIFRleHQgPSBuYW1lLAogICAgICBGb250ID0gQ29uZmlnc19IVUIuVGV4dF9Gb250LAogICAgICBCYWNrZ3JvdW5kVHJhbnNwYXJlbmN5ID0gMQogICAgfSkKICAgIAogICAgbG9jYWwgcGlja2VyID0gQ3JlYXRlKCJGcmFtZSIsIFRleHRCdXR0b24sIHsKICAgICAgU2l6ZSA9IFVEaW0yLm5ldygwLCAyMCwgMCwgMjApLAogICAgICBQb3NpdGlvbiA9IFVEaW0yLm5ldygwLCA1LCAwLCAyLjUpLAogICAgICBCYWNrZ3JvdW5kQ29sb3IzID0gRGVmYXVsdAogICAgfSlDb3JuZXIocGlja2VyKVN0cm9rZShwaWNrZXIpCiAgICAKICAgIGxvY2FsIFVJX0dyYWRlID0gQ3JlYXRlKCJJbWFnZUJ1dHRvbiIsIFRleHRCdXR0b24sIHsKICAgICAgU2l6ZSA9IFVEaW0yLm5ldygxLCAtMTAwLCAxLCB0b251bWJlcigtVGV4dEJ1dHRvbi5TaXplLlkuT2Zmc2V0IC0gMjApKSwKICAgICAgUG9zaXRpb24gPSBVRGltMi5uZXcoMCwgMTAsIDAsIHRvbnVtYmVyKFRleHRCdXR0b24uU2l6ZS5ZLk9mZnNldCArIDEyLjUpKSwKICAgICAgVmlzaWJsZSA9IGZhbHNlLAogICAgICBJbWFnZSA9ICJyYnhhc3NldGlkOi8vNDE1NTgwMTI1MiIKICAgIH0pQ29ybmVyKFVJX0dyYWRlKVN0cm9rZShVSV9HcmFkZSlsb2NhbCBTYXZlUG9zID0gQ3JlYXRlKCJGcmFtZSIsIFVJX0dyYWRlLCB7VmlzaWJsZSA9IGZhbHNlfSkKICAgIAogICAgbG9jYWwgZ3JhZGUgPSBDcmVhdGUoIlRleHRCdXR0b24iLCBUZXh0QnV0dG9uLCB7CiAgICAgIFNpemUgPSBVRGltMi5uZXcoMCwgMzAsIDEsIHRvbnVtYmVyKC1UZXh0QnV0dG9uLlNpemUuWS5PZmZzZXQgLSAyMCkpLAogICAgICBQb3NpdGlvbiA9IFVEaW0yLm5ldygxLCAtMTAsIDAsIHRvbnVtYmVyKFRleHRCdXR0b24uU2l6ZS5ZLk9mZnNldCArIDEyLjUpKSwKICAgICAgQW5jaG9yUG9pbnQgPSBWZWN0b3IyLm5ldygxLCAwKSwKICAgICAgVmlzaWJsZSA9IGZhbHNlLAogICAgICBUZXh0ID0gIiIKICAgIH0pQ29ybmVyKGdyYWRlKVN0cm9rZShncmFkZSlDcmVhdGUoIlVJR3JhZGllbnQiLCBncmFkZSwgewogICAgICBSb3RhdGlvbiA9IDkwLAogICAgICBDb2xvciA9IENvbG9yU2VxdWVuY2UubmV3KHsKICAgICAgICBDb2xvclNlcXVlbmNlS2V5cG9pbnQubmV3KDAuMDAsIENvbG9yMy5mcm9tUkdCKDI1NSwgMCwgNCkpLAogICAgICAgIENvbG9yU2VxdWVuY2VLZXlwb2ludC5uZXcoMC4yMCwgQ29sb3IzLmZyb21SR0IoMjM0LCAyNTUsIDApKSwKICAgICAgICBDb2xvclNlcXVlbmNlS2V5cG9pbnQubmV3KDAuNDAsIENvbG9yMy5mcm9tUkdCKDIxLCAyNTUsIDApKSwKICAgICAgICBDb2xvclNlcXVlbmNlS2V5cG9pbnQubmV3KDAuNjAsIENvbG9yMy5mcm9tUkdCKDI0MCwgMjQwLCAyNDApKSwKICAgICAgICBDb2xvclNlcXVlbmNlS2V5cG9pbnQubmV3KDAuODAsIENvbG9yMy5mcm9tUkdCKDAsIDE3LCAyNTUpKSwKICAgICAgICBDb2xvclNlcXVlbmNlS2V5cG9pbnQubmV3KDAuOTAsIENvbG9yMy5mcm9tUkdCKDI1NSwgMCwgMjUxKSksCiAgICAgICAgQ29sb3JTZXF1ZW5jZUtleXBvaW50Lm5ldygxLjAwLCBDb2xvcjMuZnJvbVJHQigyNTUsIDAsIDQpKQogICAgICB9KQogICAgfSlsb2NhbCBTYXZlUG9zMiA9IENyZWF0ZSgiRnJhbWUiLCBncmFkZSwge1Zpc2libGUgPSBmYWxzZSwgU2l6ZSA9IFVEaW0yLm5ldygxLCAwLCAwLCAwKX0pCiAgICAKICAgIGxvY2FsIEFfMSA9IENyZWF0ZSgiRnJhbWUiLCBUZXh0QnV0dG9uLCB7CiAgICAgIFNpemUgPSBVRGltMi5uZXcoMSwgMCwgMCwgMCksCiAgICAgIFBvc2l0aW9uID0gVURpbTIubmV3KDAsIDAsIDAsIDMwKSwKICAgICAgVmlzaWJsZSA9IGZhbHNlCiAgICB9KVN0cm9rZShBXzEpCiAgICAKICAgIGxvY2FsIFNlbGVjdDEgPSBDcmVhdGUoIkZyYW1lIiwgZ3JhZGUsIHsKICAgICAgU2l6ZSA9IFVEaW0yLm5ldygxLCAwLCAwLCAxMCksCiAgICAgIFBvc2l0aW9uID0gVURpbTIubmV3KDAsIDAsIDAsIHNlbGVjdCgzLCBDb2xvcjMudG9IU1YoRGVmYXVsdCkpKSwKICAgICAgQmFja2dyb3VuZFRyYW5zcGFyZW5jeSA9IDEsCiAgICAgIEFjdGl2ZSA9IHRydWUsCiAgICAgIERyYWdnYWJsZSA9IHRydWUKICAgIH0pQ29ybmVyKFNlbGVjdDEsIHtDb3JuZXJSYWRpdXMgPSBVRGltLm5ldygyLCAwKX0pU3Ryb2tlKFNlbGVjdDEsIHtDb2xvciA9IENvbG9yMy5mcm9tUkdCKDI1NSwgMjU1LCAyNTUpfSkKICAgIAogICAgbG9jYWwgU2VsZWN0MiA9IENyZWF0ZSgiRnJhbWUiLCBVSV9HcmFkZSwgewogICAgICBTaXplID0gVURpbTIubmV3KDAsIDE1LCAwLCAxNSksCiAgICAgIFBvc2l0aW9uID0gVURpbTIubmV3KDAsIHNlbGVjdCgyLCBDb2xvcjMudG9IU1YoRGVmYXVsdCkpLCAwLCBzZWxlY3QoMSwgQ29sb3IzLnRvSFNWKERlZmF1bHQpKSksCiAgICAgIEJhY2tncm91bmRUcmFuc3BhcmVuY3kgPSAxLAogICAgICBBY3RpdmUgPSB0cnVlLAogICAgICBEcmFnZ2FibGUgPSB0cnVlCiAgICB9KUNvcm5lcihTZWxlY3QyLCB7Q29ybmVyUmFkaXVzID0gVURpbS5uZXcoMiwgMCl9KVN0cm9rZShTZWxlY3QyLCB7Q29sb3IgPSBDb2xvcjMuZnJvbVJHQigyNTUsIDI1NSwgMjU1KX0pCiAgCiAgICBVSV9HcmFkZS5Nb3VzZUJ1dHRvbjFDbGljazpDb25uZWN0KGZ1bmN0aW9uKCkKICAgICAgbG9jYWwgbW91c2UgPSBVc2VySW5wdXRTZXJ2aWNlOkdldE1vdXNlTG9jYXRpb24oKQogICAgICBsb2NhbCBzYXZlcG9zID0gU2F2ZVBvcy5BYnNvbHV0ZVBvc2l0aW9uCiAgICAgIENyZWF0ZVR3ZWVuKFNlbGVjdDIsICJQb3NpdGlvbiIsIFVEaW0yLm5ldygwLCBtb3VzZS5YIC0gc2F2ZXBvcy5YLCAwLCB0b251bWJlcihtb3VzZS5ZIC0gc2F2ZXBvcy5ZKSAtIDM1KSwgMC4zLCBmYWxzZSkKICAgIGVuZCkKICAgIAogICAgZ3JhZGUuTW91c2VCdXR0b24xQ2xpY2s6Q29ubmVjdChmdW5jdGlvbigpCiAgICAgIGxvY2FsIG1vdXNlID0gVXNlcklucHV0U2VydmljZTpHZXRNb3VzZUxvY2F0aW9uKCkuWSAtIDM1CiAgICAgIGxvY2FsIHNhdmVwb3MgPSBTYXZlUG9zMi5BYnNvbHV0ZVBvc2l0aW9uLlkKICAgICAgQ3JlYXRlVHdlZW4oU2VsZWN0MSwgIlBvc2l0aW9uIiwgVURpbTIubmV3KDAsIDAsIDAsIG1vdXNlIC0gc2F2ZXBvcyksIDAuMywgZmFsc2UpCiAgICBlbmQpCiAgICAKICAgIGxvY2FsIGZ1bmN0aW9uIGNhbGxiYWNrKClDYWxsYmFjayhDb2xvcjMuZnJvbUhTVihDb2xvckgsIENvbG9yUywgQ29sb3JWKSllbmQKICAgIGxvY2FsIGZ1bmN0aW9uIHVwZGNvbG9ycGlja2VyKCkKICAgICAgQ29sb3JIID0gdG9udW1iZXIoU2VsZWN0MS5Qb3NpdGlvbi5ZLk9mZnNldCkgLyA4MAogICAgICBDb2xvclMgPSB0b251bWJlcigyMTUgLSBTZWxlY3QyLlBvc2l0aW9uLlguT2Zmc2V0KSAvIDIxNQogICAgICBDb2xvclYgPSB0b251bWJlcig3NSAtIFNlbGVjdDIuUG9zaXRpb24uWS5PZmZzZXQpIC8gNzUKICAgICAgVUlfR3JhZGUuSW1hZ2VDb2xvcjMgPSBDb2xvcjMuZnJvbUhTVihDb2xvckgsIDEsIDEpCiAgICAgIHBpY2tlci5CYWNrZ3JvdW5kQ29sb3IzID0gQ29sb3IzLmZyb21IU1YoQ29sb3JILCBDb2xvclMsIENvbG9yVikKICAgICAgY2FsbGJhY2soKQogICAgZW5kCiAgICAKICAgIHVwZGNvbG9ycGlja2VyKCkKICAgIAogICAgU2VsZWN0MS5DaGFuZ2VkOkNvbm5lY3QoZnVuY3Rpb24ocHJvcCkKICAgICAgaWYgcHJvcCA9PSAiUG9zaXRpb24iIHRoZW4KICAgICAgICBTZWxlY3QxLlBvc2l0aW9uID0gVURpbTIubmV3KDAsIDAsIDAsIG1hdGguY2xhbXAoU2VsZWN0MS5Qb3NpdGlvbi5ZLk9mZnNldCwgMCwgODApKQogICAgICAgIHVwZGNvbG9ycGlja2VyKCkKICAgICAgZW5kCiAgICBlbmQpCiAgICAKICAgIFNlbGVjdDIuQ2hhbmdlZDpDb25uZWN0KGZ1bmN0aW9uKHByb3ApCiAgICAgIGlmIHByb3AgPT0gIlBvc2l0aW9uIiB0aGVuCiAgICAgICAgU2VsZWN0Mi5Qb3NpdGlvbiA9IFVEaW0yLm5ldygwLCBtYXRoLmNsYW1wKFNlbGVjdDIuUG9zaXRpb24uWC5PZmZzZXQsIDAsIDIyMiksIDAsIG1hdGguY2xhbXAoU2VsZWN0Mi5Qb3NpdGlvbi5ZLk9mZnNldCwgMCwgNzUpKQogICAgICAgIHVwZGNvbG9ycGlja2VyKCkKICAgICAgZW5kCiAgICBlbmQpCiAgICAKICAgIFRleHRCdXR0b24uQ2hhbmdlZDpDb25uZWN0KGZ1bmN0aW9uKHByb3ApCiAgICAgIGlmIHByb3AgPT0gIlNpemUiIHRoZW4KICAgICAgICBpZiBUZXh0QnV0dG9uLlNpemUuWS5PZmZzZXQgPj0gNjAgdGhlbgogICAgICAgICAgcGlja2VyLlBvc2l0aW9uID0gVURpbTIubmV3KDAsIDUsIDAsIDUpCiAgICAgICAgICBVSV9HcmFkZS5WaXNpYmxlID0gdHJ1ZQogICAgICAgICAgQV8xLlZpc2libGUgPSB0cnVlCiAgICAgICAgICBncmFkZS5WaXNpYmxlID0gdHJ1ZQogICAgICAgIGVsc2UKICAgICAgICAgIHBpY2tlci5Qb3NpdGlvbiA9IFVEaW0yLm5ldygwLCA1LCAwLCAyLjUpCiAgICAgICAgICBVSV9HcmFkZS5WaXNpYmxlID0gZmFsc2UKICAgICAgICAgIEFfMS5WaXNpYmxlID0gZmFsc2UKICAgICAgICAgIGdyYWRlLlZpc2libGUgPSBmYWxzZQogICAgICAgIGVuZAogICAgICBlbmQKICAgIGVuZCkKICAgIAogICAgbG9jYWwgb25vZmYgPSBmYWxzZQogICAgY2xpY2suTW91c2VCdXR0b24xQ2xpY2s6Q29ubmVjdChmdW5jdGlvbigpCiAgICAgIG9ub2ZmID0gbm90IG9ub2ZmCiAgICAgIGlmIG9ub2ZmID09IHRydWUgdGhlbgogICAgICAgIGxvY2FsIHR3ZWVuID0gVHdlZW5TZXJ2aWNlOkNyZWF0ZShUZXh0QnV0dG9uLCBUd2VlbkluZm8ubmV3KDAuMiwgRW51bS5FYXNpbmdTdHlsZS5MaW5lYXIpLAogICAgICAgIHtTaXplID0gVURpbTIubmV3KDEsIDAsIDAsIDE0MCl9KXR3ZWVuOnBsYXkoKXR3ZWVuLkNvbXBsZXRlZDpXYWl0KCkKICAgICAgZWxzZQogICAgICAgIGxvY2FsIHR3ZWVuID0gVHdlZW5TZXJ2aWNlOkNyZWF0ZShUZXh0QnV0dG9uLCBUd2VlbkluZm8ubmV3KDAuMiwgRW51bS5FYXNpbmdTdHlsZS5MaW5lYXIpLAogICAgICAgIHtTaXplID0gVURpbTIubmV3KDEsIDAsIDAsIDI1KX0pdHdlZW46cGxheSgpdHdlZW4uQ29tcGxldGVkOldhaXQoKQogICAgICBlbmQKICAgIGVuZCkKICBlbmQKICAKICBmdW5jdGlvbiBBZGREcm9wZG93bihwYXJlbnQsIENvbmZpZ3MpCiAgICBsb2NhbCBEcm9wZG93bk5hbWUgPSBDb25maWdzLk5hbWUgb3IgIkRyb3Bkb3duISEiCiAgICBsb2NhbCBEZWZhdWx0ID0gQ29uZmlncy5EZWZhdWx0IG9yICJUZXh0Qm94IgogICAgbG9jYWwgT3B0aW9ucyA9IENvbmZpZ3MuT3B0aW9ucyBvciB7IjEiLCAiMiIsICIzIn0KICAgIGxvY2FsIERlZmF1bHQgPSBDb25maWdzLkRlZmF1bHQgb3IgIjIiCiAgICBsb2NhbCBDYWxsYmFjayA9IENvbmZpZ3MuQ2FsbGJhY2sgb3IgZnVuY3Rpb24oKSBlbmQKICAgIAogICAgbG9jYWwgVGV4dEJ1dHRvbiA9IENyZWF0ZSgiVGV4dEJ1dHRvbiIsIHBhcmVudCwgewogICAgICBTaXplID0gVURpbTIubmV3KDEsIDAsIDAsIDI1KSwKICAgICAgQmFja2dyb3VuZENvbG9yMyA9IENvbmZpZ3NfSFVCLkNvcl9PcHRpb25zLAogICAgICBOYW1lID0gIkZyYW1lIiwKICAgICAgVGV4dCA9ICIiLAogICAgICBBdXRvQnV0dG9uQ29sb3IgPSBmYWxzZQogICAgfSlDb3JuZXIoRnJhbWUpU3Ryb2tlKEZyYW1lKQogICAgCiAgICBsb2NhbCBUZXh0TGFiZWwgPSBDcmVhdGUoIlRleHRMYWJlbCIsIFRleHRCdXR0b24sIHsKICAgICAgVGV4dFNpemUgPSAxMiwKICAgICAgVGV4dENvbG9yMyA9IENvbmZpZ3NfSFVCLkNvcl9UZXh0LAogICAgICBUZXh0ID0gRHJvcGRvd25OYW1lLAogICAgICBTaXplID0gVURpbTIubmV3KDEsIDAsIDAsIDI1KSwKICAgICAgUG9zaXRpb24gPSBVRGltMi5uZXcoMCwgMzUsIDAsIDApLAogICAgICBCYWNrZ3JvdW5kVHJhbnNwYXJlbmN5ID0gMSwKICAgICAgVGV4dFhBbGlnbm1lbnQgPSAiTGVmdCIsCiAgICAgIEZvbnQgPSBDb25maWdzX0hVQi5UZXh0X0ZvbnQKICAgIH0pVGV4dFNldENvbG9yKFRleHRMYWJlbCkKICAgIAogICAgbG9jYWwgTGluZSA9IENyZWF0ZSgiRnJhbWUiLCBUZXh0QnV0dG9uLCB7CiAgICAgIFNpemUgPSBVRGltMi5uZXcoMSwgMCwgMCwgMSksCiAgICAgIFBvc2l0aW9uID0gVURpbTIubmV3KDAsIDAsIDAsIDI1KSwKICAgICAgQm9yZGVyU2l6ZVBpeGVsID0gMCwKICAgICAgQmFja2dyb3VuZENvbG9yMyA9IENvbmZpZ3NfSFVCLkNvcl9TdHJva2UsCiAgICAgIFZpc2libGUgPSBmYWxzZQogICAgfSkKICAgIAogICAgbG9jYWwgQXJyb3cgPSBDcmVhdGUoIkltYWdlTGFiZWwiLCBUZXh0QnV0dG9uLCB7CiAgICAgIEltYWdlID0gInJieGFzc2V0aWQ6Ly82MDMxMDkwOTkwIiwKICAgICAgU2l6ZSA9IFVEaW0yLm5ldygwLCAyNSwgMCwgMjUpLAogICAgICBQb3NpdGlvbiA9IFVEaW0yLm5ldygwLCA1LCAwLCAwKSwKICAgICAgQmFja2dyb3VuZFRyYW5zcGFyZW5jeSA9IDEKICAgIH0pCiAgICAKICAgIGxvY2FsIERlZmF1bHRUZXh0ID0gQ3JlYXRlKCJUZXh0TGFiZWwiLCBUZXh0QnV0dG9uLCB7CiAgICAgIEJhY2tncm91bmRDb2xvcjMgPSBDb25maWdzX0hVQi5Db3JfSHViLAogICAgICBCYWNrZ3JvdW5kVHJhbnNwYXJlbmN5ID0gMC4xLAogICAgICBQb3NpdGlvbiA9IFVEaW0yLm5ldygxLCAtMjAsIDAsIDIuNSksCiAgICAgIEFuY2hvclBvaW50ID0gVmVjdG9yMi5uZXcoMSwgMCksCiAgICAgIFNpemUgPSBVRGltMi5uZXcoMCwgMTAwLCAwLCAyMCksCiAgICAgIFRleHRDb2xvcjMgPSBDb25maWdzX0hVQi5Db3JfRGFya1RleHQsCiAgICAgIFRleHRTY2FsZWQgPSB0cnVlLAogICAgICBGb250ID0gQ29uZmlnc19IVUIuVGV4dF9Gb250LAogICAgICBUZXh0ID0gIi4uLiIKICAgIH0pQ29ybmVyKERlZmF1bHRUZXh0KVN0cm9rZShEZWZhdWx0VGV4dCkKICAgIAogICAgbG9jYWwgU2Nyb2xsQmFyID0gQ3JlYXRlKCJTY3JvbGxpbmdGcmFtZSIsIFRleHRCdXR0b24sIHsKICAgICAgU2l6ZSA9IFVEaW0yLm5ldygxLCAwLCAxLCAtMjUpLAogICAgICBQb3NpdGlvbiA9IFVEaW0yLm5ldygwLCAwLCAwLCAyNSksCiAgICAgIENhbnZhc1NpemUgPSBVRGltMi5uZXcoKSwKICAgICAgU2Nyb2xsaW5nRGlyZWN0aW9uID0gIlkiLAogICAgICBBdXRvbWF0aWNDYW52YXNTaXplID0gIlkiLAogICAgICBCYWNrZ3JvdW5kVHJhbnNwYXJlbmN5ID0gMSwKICAgICAgU2Nyb2xsQmFyVGhpY2tuZXNzID0gMgogICAgfSlDcmVhdGUoIlVJUGFkZGluZyIsIFNjcm9sbEJhciwgewogICAgICBQYWRkaW5nTGVmdCA9IFVEaW0ubmV3KDAsIDEwKSwKICAgICAgUGFkZGluZ1JpZ2h0ID0gVURpbS5uZXcoMCwgMTApLAogICAgICBQYWRkaW5nVG9wID0gVURpbS5uZXcoMCwgMTApLAogICAgICBQYWRkaW5nQm90dG9tID0gVURpbS5uZXcoMCwgMTApCiAgICB9KUNyZWF0ZSgiVUlMaXN0TGF5b3V0IiwgU2Nyb2xsQmFyLCB7CiAgICAgIFBhZGRpbmcgPSBVRGltLm5ldygwLCA1KQogICAgfSkKICAgIAogICAgbG9jYWwgZnVuY3Rpb24gQWRkT3B0aW9uKE9wdGlvbk5hbWUpCiAgICAgIGxvY2FsIFRleHRCdXR0b24gPSBDcmVhdGUoIlRleHRCdXR0b24iLCBTY3JvbGxCYXIsIHsKICAgICAgICBTaXplID0gVURpbTIubmV3KDEsIDAsIDAsIDE1KSwKICAgICAgICBUZXh0ID0gT3B0aW9uTmFtZSwKICAgICAgICBGb250ID0gQ29uZmlnc19IVUIuVGV4dF9Gb250LAogICAgICAgIFRleHRTaXplID0gMTIsCiAgICAgICAgVGV4dENvbG9yMyA9IENvbG9yMy5mcm9tUkdCKDE4MCwgMTgwLCAxODApLAogICAgICAgIEJhY2tncm91bmRUcmFuc3BhcmVuY3kgPSAxCiAgICAgIH0pQ29ybmVyKFRleHRCdXR0b24pCiAgICAgIAogICAgICBsb2NhbCBTZWxlY3RUYWJsZSA9IHt9CiAgICAgIGxvY2FsIE9uT2ZmID0gZmFsc2UKICAgICAgaWYgT3B0aW9uTmFtZSA9PSBEZWZhdWx0IHRoZW4KICAgICAgICBPbk9mZiA9IHRydWUKICAgICAgICBUZXh0QnV0dG9uLkJhY2tncm91bmRUcmFuc3BhcmVuY3kgPSAwLjgKICAgICAgICBUZXh0QnV0dG9uLlRleHRDb2xvcjMgPSBDb25maWdzX0hVQi5Db3JfVGV4dAogICAgICAgIERlZmF1bHRUZXh0LlRleHQgPSBPcHRpb25OYW1lCiAgICAgICAgQ2FsbGJhY2soT3B0aW9uTmFtZSkKICAgICAgZW5kCiAgICAgIAogICAgICBUZXh0QnV0dG9uLk1vdXNlQnV0dG9uMUNsaWNrOkNvbm5lY3QoZnVuY3Rpb24oKQogICAgICAgIGZvciBfLHYgaW4gcGFpcnMoU2Nyb2xsQmFyOkdldENoaWxkcmVuKCkpIGRvCiAgICAgICAgICBpZiB2OklzQSgiVGV4dEJ1dHRvbiIpIHRoZW4KICAgICAgICAgICAgdi5CYWNrZ3JvdW5kVHJhbnNwYXJlbmN5ID0gMQogICAgICAgICAgICB2LlRleHRDb2xvcjMgPSBDb2xvcjMuZnJvbVJHQigxODAsIDE4MCwgMTgwKQogICAgICAgICAgZW5kCiAgICAgICAgZW5kCiAgICAgICAgRGVmYXVsdFRleHQuVGV4dCA9IE9wdGlvbk5hbWUKICAgICAgICBDYWxsYmFjayhPcHRpb25OYW1lKQogICAgICAgIFRleHRCdXR0b24uQmFja2dyb3VuZFRyYW5zcGFyZW5jeSA9IDAuOAogICAgICAgIFRleHRCdXR0b24uVGV4dENvbG9yMyA9IENvbmZpZ3NfSFVCLkNvcl9UZXh0CiAgICAgIGVuZCkKICAgIGVuZAogICAgCiAgICBmb3IgXyx2IGluIHBhaXJzKE9wdGlvbnMpIGRvCiAgICAgIEFkZE9wdGlvbih2KQogICAgZW5kCiAgICAKICAgIGxvY2FsIERyb3BPbk9mZiA9IGZhbHNlCiAgICBUZXh0QnV0dG9uLk1vdXNlQnV0dG9uMUNsaWNrOkNvbm5lY3QoZnVuY3Rpb24oKQogICAgICBsb2NhbCBPcHRpb25TaXplLCBPcHRpb25zTnVtYmVyID0gMjUsIDAKICAgICAgZm9yIF8sdiBpbiBwYWlycyhTY3JvbGxCYXI6R2V0Q2hpbGRyZW4oKSkgZG8KICAgICAgICBpZiB2OklzQSgiVGV4dEJ1dHRvbiIpIGFuZCBPcHRpb25zTnVtYmVyIDwgNSB0aGVuCiAgICAgICAgICBPcHRpb25zTnVtYmVyID0gT3B0aW9uc051bWJlciArIDEKICAgICAgICAgIE9wdGlvblNpemUgPSBPcHRpb25TaXplICsgdG9udW1iZXIodi5TaXplLlkuT2Zmc2V0ICsgMTApCiAgICAgICAgZW5kCiAgICAgIGVuZAogICAgICBpZiBub3QgRHJvcE9uT2ZmIHRoZW4KICAgICAgICBDcmVhdGVUd2VlbihUZXh0QnV0dG9uLCAiU2l6ZSIsIFVEaW0yLm5ldygxLCAwLCAwLCBPcHRpb25TaXplKSwgMC4zLCBmYWxzZSkKICAgICAgICBDcmVhdGVUd2VlbihBcnJvdywgIlJvdGF0aW9uIiwgMTgwLCAwLjMsIGZhbHNlKQogICAgICAgIERyb3BPbk9mZiA9IHRydWUKICAgICAgICBMaW5lLlZpc2libGUgPSB0cnVlCiAgICAgIGVsc2UKICAgICAgICBDcmVhdGVUd2VlbihUZXh0QnV0dG9uLCAiU2l6ZSIsIFVEaW0yLm5ldygxLCAwLCAwLCAyNSksIDAuMywgZmFsc2UpCiAgICAgICAgQ3JlYXRlVHdlZW4oQXJyb3csICJSb3RhdGlvbiIsIDAsIDAuMywgdHJ1ZSkKICAgICAgICBEcm9wT25PZmYgPSBmYWxzZQogICAgICAgIExpbmUuVmlzaWJsZSA9IGZhbHNlCiAgICAgIGVuZAogICAgZW5kKQogICAgcmV0dXJuIHtTY3JvbGxCYXIsIERlZmF1bHQsIENhbGxiYWNrLCBEZWZhdWx0VGV4dH0KICBlbmQKICAKICBmdW5jdGlvbiBVcGRhdGVEcm9wZG93bihEcm9wZG93biwgTmV3T3B0aW9ucykKICAgIGxvY2FsIFNjcm9sbEJhciA9IERyb3Bkb3duWzFdCiAgICBsb2NhbCBEZWZhdWx0ID0gRHJvcGRvd25bMl0KICAgIGxvY2FsIENhbGxiYWNrID0gRHJvcGRvd25bM10KICAgIGxvY2FsIERlZmF1bHRUZXh0ID0gRHJvcGRvd25bNF0KICAgIAogICAgZm9yIF8sdiBpbiBwYWlycyhTY3JvbGxCYXI6R2V0Q2hpbGRyZW4oKSkgZG8KICAgICAgaWYgdjpJc0EoIlRleHRCdXR0b24iKSB0aGVuCiAgICAgICAgdjpEZXN0cm95KCkKICAgICAgZW5kCiAgICBlbmQKICAgIAogICAgbG9jYWwgZnVuY3Rpb24gQWRkT3B0aW9uKE9wdGlvbk5hbWUpCiAgICAgIGxvY2FsIFRleHRCdXR0b24gPSBDcmVhdGUoIlRleHRCdXR0b24iLCBTY3JvbGxCYXIsIHsKICAgICAgICBTaXplID0gVURpbTIubmV3KDEsIDAsIDAsIDE1KSwKICAgICAgICBUZXh0ID0gT3B0aW9uTmFtZSwKICAgICAgICBGb250ID0gQ29uZmlnc19IVUIuVGV4dF9Gb250LAogICAgICAgIFRleHRTaXplID0gMTIsCiAgICAgICAgVGV4dENvbG9yMyA9IENvbG9yMy5mcm9tUkdCKDE4MCwgMTgwLCAxODApLAogICAgICAgIEJhY2tncm91bmRUcmFuc3BhcmVuY3kgPSAxCiAgICAgIH0pQ29ybmVyKFRleHRCdXR0b24pCiAgICAgIAogICAgICBsb2NhbCBTZWxlY3RUYWJsZSA9IHt9CiAgICAgIGxvY2FsIE9uT2ZmID0gZmFsc2UKICAgICAgaWYgT3B0aW9uTmFtZSA9PSBEZWZhdWx0IHRoZW4KICAgICAgICBPbk9mZiA9IHRydWUKICAgICAgICBUZXh0QnV0dG9uLkJhY2tncm91bmRUcmFuc3BhcmVuY3kgPSAwLjgKICAgICAgICBUZXh0QnV0dG9uLlRleHRDb2xvcjMgPSBDb25maWdzX0hVQi5Db3JfVGV4dAogICAgICAgIERlZmF1bHRUZXh0LlRleHQgPSBPcHRpb25OYW1lCiAgICAgICAgQ2FsbGJhY2soT3B0aW9uTmFtZSkKICAgICAgZWxzZQogICAgICAgIERlZmF1bHRUZXh0LlRleHQgPSAiLi4uIgogICAgICBlbmQKICAgICAgCiAgICAgIFRleHRCdXR0b24uTW91c2VCdXR0b24xQ2xpY2s6Q29ubmVjdChmdW5jdGlvbigpCiAgICAgICAgZm9yIF8sdiBpbiBwYWlycyhTY3JvbGxCYXI6R2V0Q2hpbGRyZW4oKSkgZG8KICAgICAgICAgIGlmIHY6SXNBKCJUZXh0QnV0dG9uIikgdGhlbgogICAgICAgICAgICB2LkJhY2tncm91bmRUcmFuc3BhcmVuY3kgPSAxCiAgICAgICAgICAgIHYuVGV4dENvbG9yMyA9IENvbG9yMy5mcm9tUkdCKDE4MCwgMTgwLCAxODApCiAgICAgICAgICBlbmQKICAgICAgICBlbmQKICAgICAgICBEZWZhdWx0VGV4dC5UZXh0ID0gT3B0aW9uTmFtZQogICAgICAgIENhbGxiYWNrKE9wdGlvbk5hbWUpCiAgICAgICAgVGV4dEJ1dHRvbi5CYWNrZ3JvdW5kVHJhbnNwYXJlbmN5ID0gMC44CiAgICAgICAgVGV4dEJ1dHRvbi5UZXh0Q29sb3IzID0gQ29uZmlnc19IVUIuQ29yX1RleHQKICAgICAgZW5kKQogICAgZW5kCiAgICAKICAgIGZvciBfLHYgaW4gcGFpcnMoTmV3T3B0aW9ucykgZG8KICAgICAgQWRkT3B0aW9uKHYpCiAgICBlbmQKICBlbmQKICAKICBmdW5jdGlvbiBBZGRUZXh0TGFiZWwocGFyZW50LCBDb25maWdzKQogICAgbG9jYWwgTGFiZWxOYW1lID0gQ29uZmlnc1sxXSBvciBDb25maWdzLk5hbWUgb3IgIlRleHQgTGFiZWwhISIKICAgIAogICAgbG9jYWwgRnJhbWUgPSBDcmVhdGUoIkZyYW1lIiwgcGFyZW50LCB7CiAgICAgIFNpemUgPSBVRGltMi5uZXcoMSwgMCwgMCwgMjUpLAogICAgICBCYWNrZ3JvdW5kQ29sb3IzID0gQ29uZmlnc19IVUIuQ29yX09wdGlvbnMsCiAgICAgIE5hbWUgPSAiRnJhbWUiCiAgICB9KUNvcm5lcihGcmFtZSlTdHJva2UoRnJhbWUpCiAgICAKICAgIGxvY2FsIFRleHRCdXR0b24gPSBDcmVhdGUoIlRleHRCdXR0b24iLCBGcmFtZSwgewogICAgICBUZXh0U2l6ZSA9IDEyLAogICAgICBUZXh0Q29sb3IzID0gQ29uZmlnc19IVUIuQ29yX1RleHQsCiAgICAgIFRleHQgPSBMYWJlbE5hbWUsCiAgICAgIFNpemUgPSBVRGltMi5uZXcoMSwgMCwgMCwgMjUpLAogICAgICBQb3NpdGlvbiA9IFVEaW0yLm5ldygwLCAyMCwgMCwgMCksCiAgICAgIEJhY2tncm91bmRUcmFuc3BhcmVuY3kgPSAxLAogICAgICBUZXh0WEFsaWdubWVudCA9ICJMZWZ0IiwKICAgICAgRm9udCA9IENvbmZpZ3NfSFVCLlRleHRfRm9udAogICAgfSkKICAgIFRleHRTZXRDb2xvcihUZXh0QnV0dG9uKQogICAgcmV0dXJuIFRleHRCdXR0b24KICBlbmQKICAKICBmdW5jdGlvbiBTZXRMYWJlbChsYWJlbCwgTmV3VmFsdWUpCiAgICBsYWJlbC5UZXh0ID0gTmV3VmFsdWUKICBlbmQKICAKICBmdW5jdGlvbiBBZGRJbWFnZUxhYmVsKHBhcmVudCwgQ29uZmlncykKICAgIGxvY2FsIExhYmVsTmFtZSA9IENvbmZpZ3NbMV0gb3IgQ29uZmlncy5OYW1lIG9yICIiCiAgICBsb2NhbCBMYWJlbEltYWdlID0gQ29uZmlnc1syXSBvciBDb25maWdzLkltYWdlIG9yICJJbWFnZSBMYWJlbCIKICAgIAogICAgbG9jYWwgRnJhbWUgPSBDcmVhdGUoIkZyYW1lIiwgcGFyZW50LCB7CiAgICAgIFNpemUgPSBVRGltMi5uZXcoMCwgOTUsIDAsIDExMCksCiAgICAgIEJhY2tncm91bmRDb2xvcjMgPSBDb25maWdzX0hVQi5Db3JfT3B0aW9ucywKICAgICAgTmFtZSA9ICJGcmFtZSIKICAgIH0pQ29ybmVyKEZyYW1lKVN0cm9rZShGcmFtZSkKICAgIAogICAgbG9jYWwgVGV4dEJ1dHRvbiA9IENyZWF0ZSgiVGV4dEJ1dHRvbiIsIEZyYW1lLCB7CiAgICAgIFRleHRTaXplID0gMTIsCiAgICAgIFRleHRDb2xvcjMgPSBDb25maWdzX0hVQi5Db3JfVGV4dCwKICAgICAgVGV4dCA9IExhYmVsTmFtZSwKICAgICAgU2l6ZSA9IFVEaW0yLm5ldygxLCAwLCAwLCAyNSksCiAgICAgIEJhY2tncm91bmRUcmFuc3BhcmVuY3kgPSAxLAogICAgICBGb250ID0gQ29uZmlnc19IVUIuVGV4dF9Gb250CiAgICB9KQogICAgCiAgICBsb2NhbCBJbWFnZUxhYmVsID0gQ3JlYXRlKCJJbWFnZUxhYmVsIiwgRnJhbWUsIHsKICAgICAgSW1hZ2UgPSBMYWJlbEltYWdlLAogICAgICBTaXplID0gVURpbTIubmV3KDAsIDc1LCAwLCA3NSksCiAgICAgIFBvc2l0aW9uID0gVURpbTIubmV3KDAsIDEwLCAwLCAyNSkKICAgIH0pCiAgICBUZXh0U2V0Q29sb3IoVGV4dEJ1dHRvbikKICAgIHJldHVybiBJbWFnZUxhYmVsCiAgZW5kCiAgCiAgZnVuY3Rpb24gU2V0SW1hZ2UobGFiZWwsIE5ld0ltYWdlKQogICAgbGFiZWwuSW1hZ2UgPSBOZXdJbWFnZQogIGVuZAogIAogIGZ1bmN0aW9uIEFkZFBhcmFncmFwaChwYXJlbnQsIENvbmZpZ3MpCiAgICBsb2NhbCBQYXJhZ3JhcGhOYW1lMSA9IENvbmZpZ3NbMV0gb3IgQ29uZmlncy5UaXRsZSBvciAiUGFyYWdyYXBoISEiCiAgICBsb2NhbCBQYXJhZ3JhcGhOYW1lMiA9IENvbmZpZ3NbMV0gb3IgQ29uZmlncy5UZXh0IG9yICJQYXJhZ3JhcGghISIKICAgIAogICAgbG9jYWwgRnJhbWUgPSBDcmVhdGUoIkZyYW1lIiwgcGFyZW50LCB7CiAgICAgIFNpemUgPSBVRGltMi5uZXcoMSwgMCwgMCwgMjUpLAogICAgICBCYWNrZ3JvdW5kQ29sb3IzID0gQ29uZmlnc19IVUIuQ29yX09wdGlvbnMsCiAgICAgIE5hbWUgPSAiRnJhbWUiLAogICAgICBBdXRvbWF0aWNTaXplID0gIlkiCiAgICB9KUNvcm5lcihGcmFtZSlTdHJva2UoRnJhbWUpQ3JlYXRlKCJVSUxpc3RMYXlvdXQiLCBGcmFtZSlDcmVhdGUoIlVJUGFkZGluZyIsIEZyYW1lLCB7CiAgICAgIFBhZGRpbmdMZWZ0ID0gVURpbS5uZXcoMCwgMjApLCBQYWRkaW5nUmlnaHQgPSBVRGltLm5ldygwLCAxMCksIFBhZGRpbmdUb3AgPSBVRGltLm5ldygwLCA1KSwgUGFkZGluZ0JvdHRvbSA9IFVEaW0ubmV3KDAsIDUpCiAgICB9KQogICAgCiAgICBsb2NhbCBUZXh0QnV0dG9uID0gQ3JlYXRlKCJUZXh0QnV0dG9uIiwgRnJhbWUsIHsKICAgICAgTmFtZSA9ICJGcmFtZSIsCiAgICAgIFRleHRTaXplID0gMTIsCiAgICAgIFRleHRDb2xvcjMgPSBDb25maWdzX0hVQi5Db3JfVGV4dCwKICAgICAgVGV4dCA9IFBhcmFncmFwaE5hbWUxLAogICAgICBTaXplID0gVURpbTIubmV3KDEsIDAsIDAsIDApLAogICAgICBBdXRvbWF0aWNTaXplID0gIlkiLAogICAgICBCYWNrZ3JvdW5kVHJhbnNwYXJlbmN5ID0gMSwKICAgICAgVGV4dFhBbGlnbm1lbnQgPSAiTGVmdCIsCiAgICAgIFRleHRZQWxpZ25tZW50ID0gIlRvcCIsCiAgICAgIEZvbnQgPSBDb25maWdzX0hVQi5UZXh0X0ZvbnQsCiAgICAgIFRleHRXcmFwcGVkID0gdHJ1ZQogICAgfSlUZXh0U2V0Q29sb3IoVGV4dEJ1dHRvbikKICAgIAogICAgbG9jYWwgVGV4dExhYmVsID0gQ3JlYXRlKCJUZXh0TGFiZWwiLCBGcmFtZSwgewogICAgICBOYW1lID0gIkZyYW1lIiwKICAgICAgU2l6ZSA9IFVEaW0yLm5ldygxLCAwLCAwLCAwKSwKICAgICAgQmFja2dyb3VuZFRyYW5zcGFyZW5jeSA9IDEsCiAgICAgIEF1dG9tYXRpY1NpemUgPSAiWSIsCiAgICAgIFRleHRYQWxpZ25tZW50ID0gIkxlZnQiLAogICAgICBUZXh0WUFsaWdubWVudCA9ICJUb3AiLAogICAgICBUZXh0Q29sb3IzID0gQ29uZmlnc19IVUIuQ29yX0RhcmtUZXh0LAogICAgICBUZXh0U2l6ZSA9IDExLAogICAgICBUZXh0ID0gUGFyYWdyYXBoTmFtZTIsCiAgICAgIEZvbnQgPSBDb25maWdzX0hVQi5UZXh0X0ZvbnQsCiAgICAgIFRleHRXcmFwcGVkID0gdHJ1ZQogICAgfSkKICAgIHJldHVybiB7VGV4dEJ1dHRvbiwgVGV4dExhYmVsfQogIGVuZAogIAogIGZ1bmN0aW9uIFNldFBhcmFncmFwaChQYXJhZ3JhcGgsIE5ld1ZhbHVlKQogICAgUGFyYWdyYXBoWzFdLlRleHQgPSBOZXdWYWx1ZVsxXQogICAgUGFyYWdyYXBoWzJdLlRleHQgPSBOZXdWYWx1ZVsyXQogIGVuZAogIAogIGZ1bmN0aW9uIEFkZFNlY3Rpb24ocGFyZW50LCBDb25maWdzKQogICAgbG9jYWwgU2VjdGlvbk5hbWUgPSBDb25maWdzWzFdIG9yIENvbmZpZ3MuTmFtZSBvciAiU2VjdGlvbiEhIgogICAgCiAgICBsb2NhbCBGcmFtZSA9IENyZWF0ZSgiRnJhbWUiLCBwYXJlbnQsIHsKICAgICAgU2l6ZSA9IFVEaW0yLm5ldygxLCAwLCAwLCAyNSksCiAgICAgIEJhY2tncm91bmRDb2xvcjMgPSBDb25maWdzX0hVQi5Db3JfSHViLAogICAgICBOYW1lID0gIkZyYW1lIiwKICAgICAgVHJhbnNwYXJlbmN5ID0gMQogICAgfSlDb3JuZXIoRnJhbWUpCiAgICAKICAgIGxvY2FsIFRleHRCdXR0b24gPSBDcmVhdGUoIlRleHRCdXR0b24iLCBGcmFtZSwgewogICAgICBUZXh0U2l6ZSA9IDEyLAogICAgICBUZXh0Q29sb3IzID0gQ29uZmlnc19IVUIuQ29yX0RhcmtUZXh0LAogICAgICBUZXh0ID0gU2VjdGlvbk5hbWUsCiAgICAgIFNpemUgPSBVRGltMi5uZXcoMSwgMCwgMCwgMjUpLAogICAgICBQb3NpdGlvbiA9IFVEaW0yLm5ldygwLCAxMCwgMCwgMCksCiAgICAgIEJhY2tncm91bmRUcmFuc3BhcmVuY3kgPSAxLAogICAgICBUZXh0WEFsaWdubWVudCA9ICJMZWZ0IiwKICAgICAgRm9udCA9IENvbmZpZ3NfSFVCLlRleHRfRm9udAogICAgfSkKICAgIHJldHVybiBUZXh0QnV0dG9uCiAgZW5kCiAgCiAgZnVuY3Rpb24gU2V0U2VjdGlvbihTZWN0aW9uLCBOZXdOYW1lKQogICAgU2VjdGlvbi5UZXh0ID0gTmV3TmFtZQogIGVuZAogIAogIGZ1bmN0aW9uIEFkZERpc2NvcmQocGFyZW50LCBDb25maWdzKQogICAgbG9jYWwgRGlzY29yZExpbmsgPSBDb25maWdzWzFdIG9yIENvbmZpZ3MuRGlzY29yZExpbmsgb3IgImh0dHBzOi8vZGlzY29yZC5nZy8iCiAgICBsb2NhbCBEaXNjb3JkSWNvbiA9IENvbmZpZ3NbMl0gb3IgQ29uZmlncy5EaXNjb3JkSWNvbiBvciAicmJ4YXNzZXRpZDovLyIKICAgIGxvY2FsIERpc2NvcmRUaXRsZSA9IENvbmZpZ3NbM10gb3IgQ29uZmlncy5EaXNjb3JkVGl0bGUgb3IgIiIKICAgIAogICAgbG9jYWwgRnJhbWUgPSBDcmVhdGUoIkZyYW1lIiwgcGFyZW50LCB7CiAgICAgIFNpemUgPSBVRGltMi5uZXcoMSwgMCwgMCwgMTEwKSwKICAgICAgQmFja2dyb3VuZENvbG9yMyA9IENvbG9yMy5mcm9tUkdCKDMwLCAzMCwgMzApLAogICAgICBOYW1lID0gIkZyYW1lIiwKICAgICAgQXV0b21hdGljU2l6ZSA9ICJZIgogICAgfSkKICAgIAogICAgbG9jYWwgTGlua0xhYmVsID0gQ3JlYXRlKCJUZXh0TGFiZWwiLCBGcmFtZSwgewogICAgICBTaXplID0gVURpbTIubmV3KDEsIDAsIDAsIDI1KSwKICAgICAgVGV4dCA9IERpc2NvcmRMaW5rLAogICAgICBUZXh0WEFsaWdubWVudCA9ICJMZWZ0IiwKICAgICAgQmFja2dyb3VuZFRyYW5zcGFyZW5jeSA9IDEsCiAgICAgIFBvc2l0aW9uID0gVURpbTIubmV3KDAsIDEyLCAwLCAwKSwKICAgICAgVGV4dENvbG9yMyA9IENvbG9yMy5mcm9tUkdCKDAsIDEyMCwgMjU1KSwKICAgICAgRm9udCA9IEVudW0uRm9udC5Hb3RoYW1Cb2xkLAogICAgICBUZXh0U2l6ZSA9IDE0CiAgICB9KQogICAgCiAgICBsb2NhbCBUaXRsZUxhYmVsID0gQ3JlYXRlKCJUZXh0TGFiZWwiLCBGcmFtZSwgewogICAgICBTaXplID0gVURpbTIubmV3KDEsIDAsIDAsIDI1KSwKICAgICAgVGV4dCA9IERpc2NvcmRUaXRsZSwKICAgICAgVGV4dFhBbGlnbm1lbnQgPSAiTGVmdCIsCiAgICAgIEJhY2tncm91bmRUcmFuc3BhcmVuY3kgPSAxLAogICAgICBQb3NpdGlvbiA9IFVEaW0yLm5ldygwLCA2MCwgMCwgMjUpLAogICAgICBUZXh0Q29sb3IzID0gQ29sb3IzLmZyb21SR0IoMjAwLCAyMDAsIDIwMCksCiAgICAgIEZvbnQgPSBFbnVtLkZvbnQuR290aGFtQm9sZCwKICAgICAgVGV4dFNpemUgPSAxNAogICAgfSkKICAgIAogICAgbG9jYWwgSWNvbkxhYmVsID0gQ3JlYXRlKCJJbWFnZUxhYmVsIiwgRnJhbWUsIHsKICAgICAgU2l6ZSA9IFVEaW0yLm5ldygwLCA0MCwgMCwgNDApLAogICAgICBBbmNob3JQb2ludCA9IFZlY3RvcjIubmV3KDAsIDAuNSksCiAgICAgIFBvc2l0aW9uID0gVURpbTIubmV3KDAsIDEyLCAwLjQ1LCAwKSwKICAgICAgSW1hZ2UgPSBEaXNjb3JkSWNvbgogICAgfSlDb3JuZXIoSWNvbkxhYmVsKQogICAgCiAgICBsb2NhbCBKb2luQnV0dG9uID0gQ3JlYXRlKCJUZXh0QnV0dG9uIiwgRnJhbWUsIHsKICAgICAgU2l6ZSA9IFVEaW0yLm5ldygxLCAtMjQsIDAsIDI1KSwKICAgICAgQW5jaG9yUG9pbnQgPSBWZWN0b3IyLm5ldygwLjUsIDEpLAogICAgICBQb3NpdGlvbiA9IFVEaW0yLm5ldygwLjUsIDAsIDEsIC04KSwKICAgICAgVGV4dCA9ICJKb2luIiwKICAgICAgRm9udCA9IEVudW0uRm9udC5Hb3RoYW1Cb2xkLAogICAgICBUZXh0U2l6ZSA9IDE1LAogICAgICBUZXh0Q29sb3IzID0gQ29sb3IzLmZyb21SR0IoMjIwLCAyMjAsIDIyMCksCiAgICAgIEJhY2tncm91bmRDb2xvcjMgPSBDb2xvcjMuZnJvbVJHQig1MCwgMjAwLCA1MCkKICAgIH0pQ29ybmVyKEljb25MYWJlbCkKICAgIAogICAgbG9jYWwgdGltZSA9IHRpY2soKQogICAgQ2xpY2tDb250ZXIgPSAwCiAgICBKb2luQnV0dG9uLk1vdXNlQnV0dG9uMUNsaWNrOkNvbm5lY3QoZnVuY3Rpb24oKQogICAgICBpZiBDbGlja0NvbnRlciA9PSAwIG9yIHRpY2soKSAtIHRpbWUgPiA1IHRoZW4gdGltZSA9IHRpY2soKSBzZXRjbGlwYm9hcmQoRGlzY29yZExpbmspIENsaWNrQ29udGVyID0gQ2xpY2tDb250ZXIgKyAxCiAgICAgICAgSm9pbkJ1dHRvbi5UZXh0ID0gIkNvcGllZCB0byBDbGlwYm9hcmQiCiAgICAgICAgSm9pbkJ1dHRvbi5CYWNrZ3JvdW5kQ29sb3IzID0gQ29sb3IzLmZyb21SR0IoMTAwLCAxMDAsIDEwMCkKICAgICAgICBKb2luQnV0dG9uLlRleHRDb2xvcjMgPSBDb2xvcjMuZnJvbVJHQigxNTAsIDE1MCwgMTUwKQogICAgICAgIHRhc2sud2FpdCg1KQogICAgICAgIEpvaW5CdXR0b24uVGV4dCA9ICJKb2luIgogICAgICAgIEpvaW5CdXR0b24uQmFja2dyb3VuZENvbG9yMyA9IENvbG9yMy5mcm9tUkdCKDUwLCAyMDAsIDUwKQogICAgICAgIEpvaW5CdXR0b24uVGV4dENvbG9yMyA9IENvbG9yMy5mcm9tUkdCKDIyMCwgMjIwLCAyMjApCiAgICAgIGVuZAogICAgZW5kKQogIGVuZAogIHJldHVybiBNZW51CmVuZA==
]]))()
