--[[ TARNO | ALFA ENCRYPTED ]]--
local b='ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/'
function dec(data)
    data = string.gsub(data, '[^'..b..'=]', '')
    return (data:gsub('.', function(x)
        if (x == '=') then return '' end
        local r,f='',(b:find(x)-1)
        for i=6,1,-1 do r=r..(f%2^i - f%2^(i-1) > 0 and '1' or '0') end
        return r;
    end):gsub('%d%d%d?%d?%d?%d?%d?%d?', function(x)
        if (#x ~= 8) then return '' end
        local c=0
        for i=1,8 do c=c + (x:sub(i,i)=='1' and 2^(8-i) or 0) end
        return string.char(c)
    end))
end
loadstring(dec([[
bG9jYWwgQ29uZmlnc19IVUIgPSB7CiAgQ29yX0h1YiA9IENvbG9yMy5mcm9tUkdCKDAsIDAsIDApLAogIENvcl9PcHRpb25zID0gQ29sb3IzLmZyb21SR0IoMCwgMCwgMCksCiAgQ29yX1N0cm9rZSA9IENvbG9yMy5mcm9tUkdCKDIzMCwgMTkwLCAxMzgpLCAKICBDb3JfVGV4dCA9IENvbG9yMy5mcm9tUkdCKDY0LCAyMjQsIDIwOCksCiAgQ29yX0RhcmtUZXh0ID0gQ29sb3IzLmZyb21SR0IoMjQwLCAyNDAsIDI0MCksCiAgQ29ybmVyX1JhZGl1cyA9IFVEaW0ubmV3KDAsNCksCiAgVGV4dF9Gb250ID0gRW51bS5Gb250LkZyZWRva2FPbmUKfQoKbG9jYWwgQ29yZUd1aSA9IGdhbWU6R2V0U2VydmljZSgiQ29yZUd1aSIpCmxvY2FsIFR3ZWVuU2VydmljZSA9IGdhbWU6R2V0U2VydmljZSgiVHdlZW5TZXJ2aWNlIikKbG9jYWwgVXNlcklucHV0U2VydmljZSA9IGdhbWU6R2V0U2VydmljZSgiVXNlcklucHV0U2VydmljZSIpCgpsb2NhbCBmdW5jdGlvbiBDcmVhdGUoaW5zdGFuY2UsIHBhcmVudCwgcHJvcHMpCiAgbG9jYWwgbmV3ID0gSW5zdGFuY2UubmV3KGluc3RhbmNlLCBwYXJlbnQpCiAgaWYgcHJvcHMgdGhlbgogICAgdGFibGUuZm9yZWFjaChwcm9wcywgZnVuY3Rpb24ocHJvcCwgdmFsdWUpCiAgICAgIG5ld1twcm9wXSA9IHZhbHVlCiAgICBlbmQpCiAgZW5kCiAgcmV0dXJuIG5ldwplbmQKCmxvY2FsIGZ1bmN0aW9uIFNldFByb3BzKGluc3RhbmNlLCBwcm9wcykKICBpZiBpbnN0YW5jZSBhbmQgcHJvcHMgdGhlbgogICAgdGFibGUuZm9yZWFjaChwcm9wcywgZnVuY3Rpb24ocHJvcCwgdmFsdWUpCiAgICAgIGluc3RhbmNlW3Byb3BdID0gdmFsdWUKICAgIGVuZCkKICBlbmQKICByZXR1cm4gaW5zdGFuY2UKZW5kCgpsb2NhbCBmdW5jdGlvbiBDb3JuZXIocGFyZW50LCBwcm9wcykKICBsb2NhbCBuZXcgPSBDcmVhdGUoIlVJQ29ybmVyIiwgcGFyZW50KQogIG5ldy5Db3JuZXJSYWRpdXMgPSBDb25maWdzX0hVQi5Db3JuZXJfUmFkaXVzCiAgaWYgcHJvcHMgdGhlbgogICAgU2V0UHJvcHMobmV3LCBwcm9wcykKICBlbmQKICByZXR1cm4gbmV3CmVuZAoKbG9jYWwgZnVuY3Rpb24gU3Ryb2tlKHBhcmVudCwgcHJvcHMpCiAgbG9jYWwgbmV3ID0gQ3JlYXRlKCJVSVN0cm9rZSIsIHBhcmVudCkKICBuZXcuQ29sb3IgPSBDb25maWdzX0hVQi5Db3JfU3Ryb2tlCiAgbmV3LkFwcGx5U3Ryb2tlTW9kZSA9ICJCb3JkZXIiCiAgaWYgcHJvcHMgdGhlbgogICAgU2V0UHJvcHMobmV3LCBwcm9wcykKICBlbmQKICByZXR1cm4gbmV3CmVuZAoKbG9jYWwgZnVuY3Rpb24gQ3JlYXRlVHdlZW4oaW5zdGFuY2UsIHByb3AsIHZhbHVlLCB0aW1lLCB0d2VlbldhaXQpCiAgbG9jYWwgdHdlZW4gPSBUd2VlblNlcnZpY2U6Q3JlYXRlKGluc3RhbmNlLAogIFR3ZWVuSW5mby5uZXcodGltZSwgRW51bS5FYXNpbmdTdHlsZS5MaW5lYXIpLAogIHtbcHJvcF0gPSB2YWx1ZX0pCiAgdHdlZW46UGxheSgpCiAgaWYgdHdlZW5XYWl0IHRoZW4KICAgIHR3ZWVuLkNvbXBsZXRlZDpXYWl0KCkKICBlbmQKZW5kCgpsb2NhbCBmdW5jdGlvbiBUZXh0U2V0Q29sb3IoaW5zdGFuY2UpCiAgaW5zdGFuY2UuTW91c2VFbnRlcjpDb25uZWN0KGZ1bmN0aW9uKCkKICAgIENyZWF0ZVR3ZWVuKGluc3RhbmNlLCAiVGV4dENvbG9yMyIsIENvbG9yMy5mcm9tUkdCKDMwLCAxNDAsIDIwMCksIDAuNCwgdHJ1ZSkKICBlbmQpCiAgaW5zdGFuY2UuTW91c2VMZWF2ZTpDb25uZWN0KGZ1bmN0aW9uKCkKICAgIENyZWF0ZVR3ZWVuKGluc3RhbmNlLCAiVGV4dENvbG9yMyIsIENvbmZpZ3NfSFVCLkNvcl9UZXh0LCAwLjQsIGZhbHNlKQogIGVuZCkKZW5kCgpsb2NhbCBTY3JlZW5HdWkgPSBDcmVhdGUoIlNjcmVlbkd1aSIsIENvcmVHdWksIHsKICBOYW1lID0gIllIVUIgbGlicmFyeSIKfSkKClNjcmVlbkZpbmQgPSBDb3JlR3VpOkZpbmRGaXJzdENoaWxkKFNjcmVlbkd1aS5OYW1lKQppZiBTY3JlZW5GaW5kIGFuZCBTY3JlZW5GaW5kIH49IFNjcmVlbkd1aSB0aGVuCiAgU2NyZWVuRmluZDpEZXN0cm95KCkKZW5kCgpmdW5jdGlvbiBEZXN0cm95U2NyaXB0KCkKICBTY3JlZW5HdWk6RGVzdHJveSgpCmVuZAoKbG9jYWwgTWVudV9Ob3RpZmkgPSBDcmVhdGUoIkZyYW1lIiwgU2NyZWVuR3VpLCB7CiAgU2l6ZSA9IFVEaW0yLm5ldygwLCAzMDAsIDEsIDApLAogIFBvc2l0aW9uID0gVURpbTIubmV3KDEsIDAsIDAsIDApLAogIEFuY2hvclBvaW50ID0gVmVjdG9yMi5uZXcoMSwgMCksCiAgQmFja2dyb3VuZFRyYW5zcGFyZW5jeSA9IDEKfSkKCmxvY2FsIFBhZGRpbmcgPSBDcmVhdGUoIlVJUGFkZGluZyIsIE1lbnVfTm90aWZpLCB7CiAgUGFkZGluZ0xlZnQgPSBVRGltLm5ldygwLCAyNSksCiAgUGFkZGluZ1RvcCA9IFVEaW0ubmV3KDAsIDI1KSwKICBQYWRkaW5nQm90dG9tID0gVURpbS5uZXcoMCwgNTApCn0pCgpsb2NhbCBMaXN0TGF5b3V0ID0gQ3JlYXRlKCJVSUxpc3RMYXlvdXQiLCBNZW51X05vdGlmaSwgewogIFBhZGRpbmcgPSBVRGltLm5ldygwLCAxNSksCiAgVmVydGljYWxBbGlnbm1lbnQgPSAiQm90dG9tIgp9KQoKZnVuY3Rpb24gTWFrZU5vdGlmaShDb25maWdzKQogIGxvY2FsIFRpdGxlID0gQ29uZmlncy5UaXRsZSBvciAiUkVEeiBIVUIiCiAgbG9jYWwgdGV4dCA9IENvbmZpZ3MuVGV4dCBvciAiTm90aWZpY2HDp8OjbyIKICBsb2NhbCB0aW1ld2FpdCA9IENvbmZpZ3MuVGltZSBvciA1CiAgCiAgbG9jYWwgRnJhbWUxID0gQ3JlYXRlKCJGcmFtZSIsIE1lbnVfTm90aWZpLCB7CiAgICBTaXplID0gVURpbTIubmV3KDIsIDAsIDAsIDApLAogICAgQmFja2dyb3VuZFRyYW5zcGFyZW5jeSA9IDEsCiAgICBBdXRvbWF0aWNTaXplID0gIlkiLAogICAgTmFtZSA9ICJUaXRsZSIKICB9KQogIAogIGxvY2FsIEZyYW1lMiA9IENyZWF0ZSgiRnJhbWUiLCBGcmFtZTEsIHsKICAgIFNpemUgPSBVRGltMi5uZXcoMCwgTWVudV9Ob3RpZmkuU2l6ZS5YLk9mZnNldCAtIDUwLCAwLCAwKSwKICAgIEJhY2tncm91bmRDb2xvcjMgPSBDb25maWdzX0hVQi5Db3JfSHViLAogICAgUG9zaXRpb24gPSBVRGltMi5uZXcoMCwgTWVudV9Ob3RpZmkuU2l6ZS5YLk9mZnNldCwgMCwgMCksCiAgICBBdXRvbWF0aWNTaXplID0gIlkiCiAgfSlDb3JuZXIoRnJhbWUyKQogIAogIGxvY2FsIFRleHRMYWJlbCA9IENyZWF0ZSgiVGV4dExhYmVsIiwgRnJhbWUyLCB7CiAgICBTaXplID0gVURpbTIubmV3KDEsIDAsIDAsIDI1KSwKICAgIEZvbnQgPSBDb25maWdzX0hVQi5UZXh0X0ZvbnQsCiAgICBCYWNrZ3JvdW5kVHJhbnNwYXJlbmN5ID0gMSwKICAgIFRleHQgPSBUaXRsZSwKICAgIFRleHRTaXplID0gMjAsCiAgICBQb3NpdGlvbiA9IFVEaW0yLm5ldygwLCAyMCwgMCwgNSksCiAgICBUZXh0WEFsaWdubWVudCA9ICJMZWZ0IiwKICAgIFRleHRDb2xvcjMgPSBDb25maWdzX0hVQi5Db3JfVGV4dAogIH0pCiAgCiAgbG9jYWwgVGV4dEJ1dHRvbiA9IENyZWF0ZSgiVGV4dEJ1dHRvbiIsIEZyYW1lMiwgewogICAgVGV4dCA9ICJYIiwKICAgIEZvbnQgPSBDb25maWdzX0hVQi5UZXh0X0ZvbnQsCiAgICBUZXh0U2l6ZSA9IDIwLAogICAgQmFja2dyb3VuZFRyYW5zcGFyZW5jeSA9IDEsCiAgICBUZXh0Q29sb3IzID0gQ29sb3IzLmZyb21SR0IoMjAwLCAyMDAsIDIwMCksCiAgICBQb3NpdGlvbiA9IFVEaW0yLm5ldygxLCAtNSwgMCwgNSksCiAgICBBbmNob3JQb2ludCA9IFZlY3RvcjIubmV3KDEsIDApLAogICAgU2l6ZSA9IFVEaW0yLm5ldygwLCAyNSwgMCwgMjUpCiAgfSkKICAKICBsb2NhbCBUZXh0TGFiZWwgPSBDcmVhdGUoIlRleHRMYWJlbCIsIEZyYW1lMiwgewogICAgU2l6ZSA9IFVEaW0yLm5ldygxLCAtMzAsIDAsIDApLAogICAgUG9zaXRpb24gPSBVRGltMi5uZXcoMCwgMjAsIDAsIFRleHRCdXR0b24uU2l6ZS5ZLk9mZnNldCArIDEwKSwKICAgIFRleHRTaXplID0gMTUsCiAgICBUZXh0Q29sb3IzID0gQ29uZmlnc19IVUIuQ29yX0RhcmtUZXh0LAogICAgVGV4dFhBbGlnbm1lbnQgPSAiTGVmdCIsCiAgICBUZXh0WUFsaWdubWVudCA9ICJUb3AiLAogICAgQXV0b21hdGljU2l6ZSA9ICJZIiwKICAgIFRleHQgPSB0ZXh0LAogICAgRm9udCA9IENvbmZpZ3NfSFVCLlRleHRfRm9udCwKICAgIEJhY2tncm91bmRUcmFuc3BhcmVuY3kgPSAxLAogICAgQXV0b21hdGljU2l6ZSA9IEVudW0uQXV0b21hdGljU2l6ZS5ZLAogICAgVGV4dFdyYXBwZWQgPSB0cnVlCiAgfSkKICAKICBsb2NhbCBGcmFtZVNpemUgPSBDcmVhdGUoIkZyYW1lIiwgRnJhbWUyLCB7CiAgICBTaXplID0gVURpbTIubmV3KDEsIDAsIDAsIDIpLAogICAgQmFja2dyb3VuZENvbG9yMyA9IENvbmZpZ3NfSFVCLkNvcl9TdHJva2UsCiAgICBQb3NpdGlvbiA9IFVEaW0yLm5ldygwLCAyLCAwLCAzMCksCiAgICBCb3JkZXJTaXplUGl4ZWwgPSAwCiAgfSlDb3JuZXIoRnJhbWVTaXplKUNyZWF0ZSgiRnJhbWUiLCBGcmFtZTIsIHsKICAgIFNpemUgPSBVRGltMi5uZXcoMCwgMCwgMCwgNSksCiAgICBQb3NpdGlvbiA9IFVEaW0yLm5ldygwLCAwLCAxLCA1KSwKICAgIEJhY2tncm91bmRUcmFuc3BhcmVuY3kgPSAxCiAgfSkKICAKICB0YXNrLnNwYXduKGZ1bmN0aW9uKCkKICAgIENyZWF0ZVR3ZWVuKEZyYW1lU2l6ZSwgIlNpemUiLCBVRGltMi5uZXcoMCwgMCwgMCwgMiksIHRpbWV3YWl0LCB0cnVlKQogIGVuZCkKICAKICBUZXh0QnV0dG9uLk1vdXNlQnV0dG9uMUNsaWNrOkNvbm5lY3QoZnVuY3Rpb24oKQogICAgQ3JlYXRlVHdlZW4oRnJhbWUyLCAiUG9zaXRpb24iLCBVRGltMi5uZXcoMCwgLTIwLCAwLCAwKSwgMC4xLCB0cnVlKQogICAgQ3JlYXRlVHdlZW4oRnJhbWUyLCAiUG9zaXRpb24iLCBVRGltMi5uZXcoMCwgTWVudV9Ob3RpZmkuU2l6ZS5YLk9mZnNldCwgMCwgMCksIDAuNSwgdHJ1ZSkKICAgIEZyYW1lMTpEZXN0cm95KCkKICBlbmQpCiAgCiAgdGFzay5zcGF3bihmdW5jdGlvbigpCiAgICBDcmVhdGVUd2VlbihGcmFtZTIsICJQb3NpdGlvbiIsIFVEaW0yLm5ldygwLCAtMjAsIDAsIDApLCAwLjUsIHRydWUpCiAgICBDcmVhdGVUd2VlbihGcmFtZTIsICJQb3NpdGlvbiIsIFVEaW0yLm5ldygpLCAwLjEsIHRydWUpdGFzay53YWl0KHRpbWV3YWl0KQogICAgaWYgRnJhbWUyIHRoZW4KICAgICAgQ3JlYXRlVHdlZW4oRnJhbWUyLCAiUG9zaXRpb24iLCBVRGltMi5uZXcoMCwgLTIwLCAwLCAwKSwgMC4xLCB0cnVlKQogICAgICBDcmVhdGVUd2VlbihGcmFtZTIsICJQb3NpdGlvbiIsIFVEaW0yLm5ldygwLCBNZW51X05vdGlmaS5TaXplLlguT2Zmc2V0LCAwLCAwKSwgMC41LCB0cnVlKQogICAgICBGcmFtZTE6RGVzdHJveSgpCiAgICBlbmQKICBlbmQpCmVuZAoKZnVuY3Rpb24gTWFrZVdpbmRvdyhDb25maWdzKQogIGxvY2FsIHRpdGxlID0gQ29uZmlncy5IdWIuVGl0bGUgb3IgIlJFRHogSFVCIgogIGxvY2FsIEFuaW1fVGl0bGUgPSBDb25maWdzLkh1Yi5BbmltYXRpb24gb3IgImJ5IDogcmVkejk5OTkiCiAgCiAgbG9jYWwgS2V5U3lzdGVtID0gQ29uZmlncy5LZXkuS2V5U3lzdGVtIG9yIGZhbHNlCiAgbG9jYWwgS2V5VGl0bGUgPSBDb25maWdzLktleS5UaXRsZSBvciAiS2V5IFN5c3RlbSIKICBsb2NhbCBLZXlEZXNjcmlwdGlvbiA9IENvbmZpZ3MuS2V5LkRlc2NyaXB0aW9uIG9yICIuLS4iCiAgbG9jYWwgS2V5S2V5ID0gQ29uZmlncy5LZXkuS2V5cyBvciB7IjEyMyIsICIzMjEifQogIGxvY2FsIEtleUxpbmsgPSBDb25maWdzLktleS5LZXlMaW5rIG9yICIiCiAgbG9jYWwgS2V5Tm90aWZpY2F0aW9ucyA9IENvbmZpZ3MuS2V5Lk5vdGlmaS5Ob3RpZmljYXRpb25zIG9yIHRydWUKICBsb2NhbCBLZXlOb3RTdWNjZXNzID0gQ29uZmlncy5LZXkuTm90aWZpLkluY29ycmVjdGtleSBvciAiVGhlIGtleSBpcyBpbmNvcnJlY3QiCiAgbG9jYWwgS2V5U3VjY2VzcyA9IENvbmZpZ3MuS2V5Lk5vdGlmaS5Db3JyZWN0S2V5IG9yICJSdW5uaW5nIHRoZSBTY3JpcHQuLi4iCiAgbG9jYWwgS2V5Q29weUtleUxpbmsgPSBDb25maWdzLktleS5Ob3RpZmkuQ29weUtleUxpbmsgb3IgIkNvcGllZCB0byBDbGlwYm9hcmQiCiAgCiAgaWYgS2V5U3lzdGVtIHRoZW4KICAgIGxvY2FsIEtleU1lbnUgPSBDcmVhdGUoIkZyYW1lIiwgU2NyZWVuR3VpLCB7CiAgICAgIFNpemUgPSBVRGltMi5uZXcoMCwgNDAwLCAwLCAyMjApLAogICAgICBQb3NpdGlvbiA9IFVEaW0yLm5ldygwLjUsIDAsIDAuNSwgMCksCiAgICAgIEJhY2tncm91bmRDb2xvcjMgPSBDb25maWdzX0hVQi5Db3JfSHViLAogICAgICBBbmNob3JQb2ludCA9IFZlY3RvcjIubmV3KDAuNSwgMC41KSwKICAgICAgQWN0aXZlID0gdHJ1ZSwKICAgICAgRHJhZ2dhYmxlID0gdHJ1ZQogICAgfSlDb3JuZXIoS2V5TWVudSkKICAgIAogICAgbG9jYWwgQ2xvc2VCdXR0b24gPSBDcmVhdGUoIlRleHRCdXR0b24iLCBLZXlNZW51LCB7CiAgICAgIFNpemUgPSBVRGltMi5uZXcoMCwgMzAsIDAsIDMwKSwKICAgICAgUG9zaXRpb24gPSBVRGltMi5uZXcoMSwgLTEwLCAwLCA1KSwKICAgICAgQW5jaG9yUG9pbnQgPSBWZWN0b3IyLm5ldygxLCAwKSwKICAgICAgVGV4dCA9ICJYIiwKICAgICAgRm9udCA9IEVudW0uRm9udC5GcmVkb2thT25lLAogICAgICBUZXh0U2NhbGVkID0gdHJ1ZSwKICAgICAgVGV4dENvbG9yMyA9IENvbG9yMy5mcm9tUkdCKDI0MCwgMCwgMCksCiAgICAgIEJhY2tncm91bmRUcmFuc3BhcmVuY3kgPSAxLAogICAgfSlDb3JuZXIoQ2xvc2VCdXR0b24pCiAgICAKICAgIGxvY2FsIFRpdGxlID0gQ3JlYXRlKCJUZXh0TGFiZWwiLCBLZXlNZW51LCB7CiAgICAgIFNpemUgPSBVRGltMi5uZXcoMSwgLTgwLCAwLCAyMCksCiAgICAgIFBvc2l0aW9uID0gVURpbTIubmV3KDAsIDIwLCAwLCA1KSwKICAgICAgVGV4dCA9IEtleVRpdGxlLAogICAgICBGb250ID0gQ29uZmlnc19IVUIuVGV4dF9Gb250LAogICAgICBUZXh0U2NhbGVkID0gdHJ1ZSwKICAgICAgVGV4dENvbG9yMyA9IENvbmZpZ3NfSFVCLkNvcl9UZXh0LAogICAgICBUZXh0WEFsaWdubWVudCA9ICJMZWZ0IiwKICAgICAgQmFja2dyb3VuZFRyYW5zcGFyZW5jeSA9IDEKICAgIH0pCiAgICAKICAgIGxvY2FsIERlc2NyaXB0aW9uID0gQ3JlYXRlKCJUZXh0TGFiZWwiLCBLZXlNZW51LCB7CiAgICAgIFNpemUgPSBVRGltMi5uZXcoMSwgLTgwLCAwLCAwKSwKICAgICAgVGV4dCA9IEtleURlc2NyaXB0aW9uLAogICAgICBUZXh0U2l6ZSA9IDE3LAogICAgICBUZXh0Q29sb3IzID0gQ29uZmlnc19IVUIuQ29yX0RhcmtUZXh0LAogICAgICBGb250ID0gQ29uZmlnc19IVUIuVGV4dF9Gb250LAogICAgICBQb3NpdGlvbiA9IFVEaW0yLm5ldygwLCAyMCwgMCwgMjUpLAogICAgICBUZXh0WEFsaWdubWVudCA9ICJMZWZ0IiwKICAgICAgQXV0b21hdGljU2l6ZSA9ICJZIiwKICAgICAgVGV4dFlBbGlnbm1lbnQgPSAiVG9wIiwKICAgICAgQmFja2dyb3VuZFRyYW5zcGFyZW5jeSA9IDEKICAgIH0pCiAgICAKICAgIGxvY2FsIENvbmZpcm1CdXR0b24gPSBDcmVhdGUoIlRleHRCdXR0b24iLCBLZXlNZW51LCB7CiAgICAgIFRleHQgPSAi2KPYr9iu2KfZhCIsCiAgICAgIEZvbnQgPSBDb25maWdzX0hVQi5UZXh0X0ZvbnQsCiAgICAgIFRleHRTaXplID0gMjAsCiAgICAgIFRleHRDb2xvcjMgPSBDb25maWdzX0hVQi5Db3JfVGV4dCwKICAgICAgU2l6ZSA9IFVEaW0yLm5ldygwLCAxNTAsIDAsIDQwKSwKICAgICAgQW5jaG9yUG9pbnQgPSBWZWN0b3IyLm5ldygxLCAwKSwKICAgICAgUG9zaXRpb24gPSBVRGltMi5uZXcoMSwgLTM1LCAwLCAxNDApLAogICAgICBCYWNrZ3JvdW5kQ29sb3IzID0gQ29uZmlnc19IVUIuQ29yX09wdGlvbnMKICAgIH0pQ29ybmVyKENvbmZpcm1CdXR0b24pCiAgICAKICAgIGxvY2FsIEdldEtleUxpbmsgPSBDcmVhdGUoIlRleHRCdXR0b24iLCBLZXlNZW51LCB7CiAgICAgIFRleHQgPSAi2KfZhNit2LXZiNmEINi52YTZiSDYp9mE2LHYp9io2LciLAogICAgICBGb250ID0gQ29uZmlnc19IVUIuVGV4dF9Gb250LAogICAgICBUZXh0U2l6ZSA9IDIwLAogICAgICBUZXh0Q29sb3IzID0gQ29uZmlnc19IVUIuQ29yX1RleHQsCiAgICAgIFNpemUgPSBVRGltMi5uZXcoMCwgMTUwLCAwLCA0MCksCiAgICAgIFBvc2l0aW9uID0gVURpbTIubmV3KDAsIDM1LCAwLCAxNDApLAogICAgICBCYWNrZ3JvdW5kQ29sb3IzID0gQ29uZmlnc19IVUIuQ29yX09wdGlvbnMKICAgIH0pQ29ybmVyKEdldEtleUxpbmspCiAgICAKICAgIGxvY2FsIFRleHRCb3ggPSBDcmVhdGUoIlRleHRCb3giLCBLZXlNZW51LCB7CiAgICAgIFNpemUgPSBVRGltMi5uZXcoMSwgLTcwLCAwLCA0MCksCiAgICAgIFBvc2l0aW9uID0gVURpbTIubmV3KDAsIDM1LCAwLCA5MCksCiAgICAgIEJhY2tncm91bmRDb2xvcjMgPSBDb25maWdzX0hVQi5Db3JfT3B0aW9ucywKICAgICAgUGxhY2Vob2xkZXJUZXh0ID0gItin2YPYqtio2Ycg2YfZhtin2KciLAogICAgICBUZXh0ID0gIiIsCiAgICAgIFRleHRDb2xvcjMgPSBDb25maWdzX0hVQi5Db3JfVGV4dCwKICAgICAgRm9udCA9IENvbmZpZ3NfSFVCLlRleHRfRm9udCwKICAgICAgVGV4dFNpemUgPSAyNQogICAgfSlDb3JuZXIoVGV4dEJveCkKICAgIAogICAgbG9jYWwgS2V5VmVyaWZ5ID0gZmFsc2UKICAgIENsb3NlQnV0dG9uLk1vdXNlQnV0dG9uMUNsaWNrOkNvbm5lY3QoZnVuY3Rpb24oKQogICAgICBsb2NhbCBVSVNjYWxlID0gQ3JlYXRlKCJVSVNjYWxlIiwgU2NyZWVuR3VpKQogICAgICBDcmVhdGVUd2VlbihVSVNjYWxlLCAiU2NhbGUiLCAwLCAwLjIwLCB0cnVlKQogICAgICBTY3JlZW5HdWk6RGVzdHJveSgpCiAgICBlbmQpCiAgICAKICAgIENvbmZpcm1CdXR0b24uTW91c2VCdXR0b24xQ2xpY2s6Q29ubmVjdChmdW5jdGlvbigpCiAgICAgIGZvciBfLHYgaW4gcGFpcnMoS2V5S2V5KSBkbwogICAgICAgIGlmIFRleHRCb3guVGV4dCA9PSB2IHRoZW4KICAgICAgICAgIEtleVZlcmlmeSA9IHRydWUKICAgICAgICBlbmQKICAgICAgZW5kCiAgICAgIGlmIEtleU5vdGlmaWNhdGlvbnMgYW5kIG5vdCBLZXlWZXJpZnkgdGhlbgogICAgICAgIE1ha2VOb3RpZmkoewogICAgICAgICAgVGl0bGUgPSBLZXlUaXRsZSwKICAgICAgICAgIFRleHQgPSBLZXlOb3RTdWNjZXNzLAogICAgICAgICAgVGltZSA9IDUKICAgICAgICB9KQogICAgICBlbHNlaWYgS2V5Tm90aWZpY2F0aW9ucyB0aGVuCiAgICAgICAgTWFrZU5vdGlmaSh7CiAgICAgICAgICBUaXRsZSA9IEtleVRpdGxlLAogICAgICAgICAgVGV4dCA9IEtleVN1Y2Nlc3MsCiAgICAgICAgICBUaW1lID0gNQogICAgICAgIH0pCiAgICAgIGVuZAogICAgZW5kKQogICAgCiAgICBHZXRLZXlMaW5rLk1vdXNlQnV0dG9uMUNsaWNrOkNvbm5lY3QoZnVuY3Rpb24oKQogICAgICBpZiBLZXlOb3RpZmljYXRpb25zIHRoZW4KICAgICAgICBzZXRjbGlwYm9hcmQoS2V5TGluaykKICAgICAgICBNYWtlTm90aWZpKHsKICAgICAgICAgIFRpdGxlID0gS2V5VGl0bGUsCiAgICAgICAgICBUZXh0ID0gS2V5Q29weUtleUxpbmssCiAgICAgICAgICBUaW1lID0gNQogICAgICAgIH0pCiAgICAgIGVuZAogICAgZW5kKQogICAgCiAgICByZXBlYXQgdGFzay53YWl0KCkKICAgIHVudGlsIEtleVZlcmlmeQogICAgbG9jYWwgVUlTY2FsZSA9IENyZWF0ZSgiVUlTY2FsZSIsIEtleU1lbnUpCiAgICBDcmVhdGVUd2VlbihVSVNjYWxlLCAiU2NhbGUiLCAwLCAwLjQwLCB0cnVlKQogICAgS2V5TWVudTpEZXN0cm95KCkKICBlbmQKICAKICBsb2NhbCBNZW51ID0gQ3JlYXRlKCJGcmFtZSIsIFNjcmVlbkd1aSwgewogICAgQmFja2dyb3VuZENvbG9yMyA9IENvbmZpZ3NfSFVCLkNvcl9IdWIsCiAgICBQb3NpdGlvbiA9IFVEaW0yLm5ldygwLjUsIC01MDAvMiwgMC41LCAtMjcwLzIpLAogICAgQWN0aXZlID0gdHJ1ZSwKICAgIERyYWdnYWJsZSA9IHRydWUKICB9KUNvcm5lcihNZW51KQogIAogIGxvY2FsIFRvcEJhciA9IENyZWF0ZSgiRnJhbWUiLCBNZW51LCB7CiAgICBCYWNrZ3JvdW5kVHJhbnNwYXJlbmN5ID0gMSwKICAgIFNpemUgPSBVRGltMi5uZXcoMSwgMCwgMCwgMjUpLAogICAgVmlzaWJsZSA9IGZhbHNlCiAgfSkKICAKICBsb2NhbCBCdXR0b25zRnJhbWUgPSBDcmVhdGUoIkZyYW1lIiwgVG9wQmFyLCB7CiAgICBTaXplID0gVURpbTIubmV3KDAsIDQwLCAxLCAtNSksCiAgICBQb3NpdGlvbiA9IFVEaW0yLm5ldygxLCAtMTAsIDAsIDIuNSksCiAgICBBbmNob3JQb2ludCA9IFZlY3RvcjIubmV3KDEsIDApLAogICAgQmFja2dyb3VuZFRyYW5zcGFyZW5jeSA9IDEKICB9KQogIAogIGxvY2FsIFRpdGxlID0gQ3JlYXRlKCJUZXh0TGFiZWwiLCBUb3BCYXIsIHsKICAgIFNpemUgPSBVRGltMi5uZXcoMSwgMCwgMSwgMCksCiAgICBQb3NpdGlvbiA9IFVEaW0yLm5ldygwLCAyMCwgMCwgMCksCiAgICBUZXh0Q29sb3IzID0gQ29uZmlnc19IVUIuQ29yX1RleHQsCiAgICBGb250ID0gQ29uZmlnc19IVUIuVGV4dF9Gb250LAogICAgVGV4dFhBbGlnbm1lbnQgPSAiTGVmdCIsCiAgICBUZXh0ID0gdGl0bGUsCiAgICBUZXh0U2l6ZSA9IDIwLAogICAgQmFja2dyb3VuZFRyYW5zcGFyZW5jeSA9IDEKICB9KQogIAogIGxvY2FsIE1pbmltaXplX0JUTiA9IENyZWF0ZSgiVGV4dEJ1dHRvbiIsIEJ1dHRvbnNGcmFtZSwgewogICAgVGV4dCA9ICItIiwKICAgIFRleHRDb2xvcjMgPSBDb25maWdzX0hVQi5Db3JfVGV4dCwKICAgIFNpemUgPSBVRGltMi5uZXcoMC41LCAwLCAxLCAwKSwKICAgIEJhY2tncm91bmRUcmFuc3BhcmVuY3kgPSAxLAogICAgRm9udCA9IENvbmZpZ3NfSFVCLlRleHRfRm9udCwKICAgIFRleHRZQWxpZ25tZW50ID0gIkJvdHRvbSIsCiAgICBUZXh0U2l6ZSA9IDI1CiAgfSkKICAKICBJc01pbmltaXplZCA9IGZhbHNlCiAgTWluaW1pemVfQlROLk1vdXNlQnV0dG9uMUNsaWNrOkNvbm5lY3QoZnVuY3Rpb24oKQogICAgTWluaW1pemVfQlROLlRleHQgPSBub3QgSXNNaW5pbWl6ZWQgYW5kICIrIiBvciAiLSIKICAgIGlmIElzTWluaW1pemVkIHRoZW4KICAgICAgSXNNaW5pbWl6ZWQgPSBmYWxzZQogICAgICBDcmVhdGVUd2VlbihNZW51LCAiU2l6ZSIsIFVEaW0yLm5ldygwLCA1MDAsIDAsIDI3MCksIDAuMTUsIGZhbHNlKQogICAgZWxzZQogICAgICBJc01pbmltaXplZCA9IHRydWUKICAgICAgQ3JlYXRlVHdlZW4oTWVudSwgIlNpemUiLCBVRGltMi5uZXcoMCwgNTAwLCAwLCAyNSksIDAuMTUsIHRydWUpCiAgICBlbmQKICBlbmQpCiAgCiAgbG9jYWwgQ2xvc2VfQnV0dG9uID0gQ3JlYXRlKCJUZXh0QnV0dG9uIiwgQnV0dG9uc0ZyYW1lLCB7CiAgICBUZXh0ID0gIsOXIiwKICAgIFRleHRZQWxpZ25tZW50ID0gIkJvdHRvbSIsCiAgICBUZXh0Q29sb3IzID0gQ29uZmlnc19IVUIuQ29yX1RleHQsCiAgICBTaXplID0gVURpbTIubmV3KDAuNSwgMCwgMSwgMCksCiAgICBBbmNob3JQb2ludCA9IFZlY3RvcjIubmV3KDEsIDApLAogICAgUG9zaXRpb24gPSBVRGltMi5uZXcoMSwgMCwgMCwgMCksCiAgICBCYWNrZ3JvdW5kVHJhbnNwYXJlbmN5ID0gMSwKICAgIEZvbnQgPSBDb25maWdzX0hVQi5UZXh0X0ZvbnQsCiAgICBUZXh0U2l6ZSA9IDI1CiAgfSkKICAKICBsb2NhbCBmdW5jdGlvbiBDcmVhdGVDbG9zZSgpCiAgICBJc01pbmltaXplZCA9IGZhbHNlCiAgICBDcmVhdGVUd2VlbihNZW51LCAiU2l6ZSIsIFVEaW0yLm5ldygwLCA1MDAsIDAsIDI3MCksIDAuMywgZmFsc2UpCiAgICBsb2NhbCBDbG9zZUd1aSA9IENyZWF0ZSgiVGV4dEJ1dHRvbiIsIE1lbnUsIHsKICAgICAgQmFja2dyb3VuZFRyYW5zcGFyZW5jeSA9IDAuNSwKICAgICAgQmFja2dyb3VuZENvbG9yMyA9IENvbmZpZ3NfSFVCLkNvcl9IdWIsCiAgICAgIFNpemUgPSBVRGltMi5uZXcoMSwgMCwgMSwgMCksCiAgICAgIEF1dG9CdXR0b25Db2xvciA9IGZhbHNlLAogICAgICBUZXh0ID0gIiIsCiAgICAgIEJhY2tncm91bmRUcmFuc3BhcmVuY3kgPSAwLjUsCiAgICAgIFZpc2libGUgPSBmYWxzZQogICAgfSlDb3JuZXIoQ2xvc2VHdWkpCiAgICAKICAgIGxvY2FsIENsb3NlTWVudSA9IENyZWF0ZSgiRnJhbWUiLCBDbG9zZUd1aSwgewogICAgICBTaXplID0gVURpbTIubmV3KCksCiAgICAgIEFuY2hvclBvaW50ID0gVmVjdG9yMi5uZXcoMC41LCAwLjUpLAogICAgICBQb3NpdGlvbiA9IFVEaW0yLm5ldygwLjUsIDAsIDAuNSwgMCksCiAgICAgIFRyYW5zcGFyZW5jeSA9IDEsCiAgICAgIEJhY2tncm91bmRDb2xvcjMgPSBDb25maWdzX0hVQi5Db3JfSHViCiAgICB9KUNvcm5lcihDbG9zZU1lbnUpU3Ryb2tlKENsb3NlTWVudSkKICAgIAogICAgbG9jYWwgTWVuc2FnZSA9IENyZWF0ZSgiVGV4dExhYmVsIiwgQ2xvc2VNZW51LCB7CiAgICAgIFNpemUgPSBVRGltMi5uZXcoMC44LCAwLCAwLjI1LCAwKSwKICAgICAgVGV4dCA9ICLZh9mEINin2YbYqiDZhdiq2KPZg9ivINin2YbZgyDYqtix2YrYryDYp9i62YTYp9mC2Ycg2J8iLAogICAgICBQb3NpdGlvbiA9IFVEaW0yLm5ldygwLjEsIDAsIDAuMiksCiAgICAgIFRleHRDb2xvcjMgPSBDb25maWdzX0hVQi5Db3JfVGV4dCwKICAgICAgRm9udCA9IENvbmZpZ3NfSFVCLlRleHRfRm9udCwKICAgICAgVGV4dFNjYWxlZCA9IHRydWUsCiAgICAgIEJhY2tncm91bmRUcmFuc3BhcmVuY3kgPSAxCiAgICB9KQogICAgCiAgICBsb2NhbCBDb25maXJtID0gQ3JlYXRlKCJUZXh0QnV0dG9uIiwgQ2xvc2VNZW51LCB7CiAgICAgIFNpemUgPSBVRGltMi5uZXcoMC4zNSwgMCwgMC4zLCAwKSwKICAgICAgUG9zaXRpb24gPSBVRGltMi5uZXcoMC4xLCAwLCAwLjUsIDApLAogICAgICBCYWNrZ3JvdW5kQ29sb3IzID0gQ29uZmlnc19IVUIuQ29yX0h1YiwKICAgICAgVGV4dCA9ICLYp9i62YTYp9mCINin2YTYs9mD2LHYqNiqIiwKICAgICAgRm9udCA9IENvbmZpZ3NfSFVCLlRleHRfRm9udCwKICAgICAgVGV4dENvbG9yMyA9IENvbG9yMy5mcm9tUkdCKDI0MCwgMCwgMCksCiAgICAgIFRleHRTaXplID0gMjAKICAgIH0pQ29ybmVyKENvbmZpcm0pU3Ryb2tlKENvbmZpcm0pCiAgICAKICAgIGxvY2FsIENhbmNlbCA9IENyZWF0ZSgiVGV4dEJ1dHRvbiIsIENsb3NlTWVudSwgewogICAgICBTaXplID0gVURpbTIubmV3KDAuMzUsIDAsIDAuMywgMCksCiAgICAgIFBvc2l0aW9uID0gVURpbTIubmV3KDAuOSwgMCwgMC41LCAwKSwKICAgICAgQW5jaG9yUG9pbnQgPSBWZWN0b3IyLm5ldygxLCAwKSwKICAgICAgQmFja2dyb3VuZENvbG9yMyA9IENvbmZpZ3NfSFVCLkNvcl9IdWIsCiAgICAgIFRleHQgPSAi2KfZhNi62KfYoSIsCiAgICAgIEZvbnQgPSBDb25maWdzX0hVQi5UZXh0X0ZvbnQsCiAgICAgIFRleHRDb2xvcjMgPSBDb2xvcjMuZnJvbVJHQigwLCAyNDAsIDApLAogICAgICBUZXh0U2l6ZSA9IDIwCiAgICB9KUNvcm5lcihDYW5jZWwpU3Ryb2tlKENhbmNlbCkKICAgIAogICAgbG9jYWwgZnVuY3Rpb24gU2V0VmlzaWJsZSgpCiAgICAgIGlmIE1lbnUuU2l6ZS5ZLk9mZnNldCA+IDEwMCB0aGVuCiAgICAgICAgQ2xvc2VHdWkuVmlzaWJsZSA9IHRydWUKICAgICAgZWxzZQogICAgICAgIENsb3NlR3VpLlZpc2libGUgPSBmYWxzZQogICAgICBlbmQKICAgIGVuZAogICAgCiAgICBTZXRWaXNpYmxlKCkKICAgIE1lbnU6R2V0UHJvcGVydHlDaGFuZ2VkU2lnbmFsKCJTaXplIik6Q29ubmVjdChTZXRWaXNpYmxlKQogICAgCiAgICBDcmVhdGVUd2VlbihDbG9zZU1lbnUsICJUcmFuc3BhcmVuY3kiLCAwLCAwLjIsIGZhbHNlKQogICAgQ3JlYXRlVHdlZW4oQ2xvc2VNZW51LCAiU2l6ZSIsIFVEaW0yLm5ldygwLjcsIDAsIDAuNywgMCksIDAuMiwgZmFsc2UpCiAgICAKICAgIENhbmNlbC5Nb3VzZUJ1dHRvbjFDbGljazpDb25uZWN0KGZ1bmN0aW9uKCkKICAgICAgQ3JlYXRlVHdlZW4oQ2xvc2VNZW51LCAiVHJhbnNwYXJlbmN5IiwgMSwgMC4zLCBmYWxzZSkKICAgICAgQ3JlYXRlVHdlZW4oQ2xvc2VNZW51LCAiU2l6ZSIsIFVEaW0yLm5ldygpLCAwLjIsIHRydWUpCiAgICAgIENsb3NlR3VpOkRlc3Ryb3koKQogICAgZW5kKQogICAgCiAgICBDb25maXJtLk1vdXNlQnV0dG9uMUNsaWNrOkNvbm5lY3QoZnVuY3Rpb24oKQogICAgICBDbG9zZUd1aTpEZXN0cm95KCkKICAgICAgQ3JlYXRlVHdlZW4oTWVudSwgIlNpemUiLCBVRGltMi5uZXcoKSwgMC4zLCB0cnVlKQogICAgICBEZXN0cm95U2NyaXB0KCkKICAgIGVuZCkKICAgIAogICAgQ2xvc2VHdWkuTW91c2VCdXR0b24xQ2xpY2s6Q29ubmVjdChmdW5jdGlvbigpCiAgICAgIENyZWF0ZVR3ZWVuKENsb3NlTWVudSwgIlRyYW5zcGFyZW5jeSIsIDEsIDAuMywgZmFsc2UpCiAgICAgIENyZWF0ZVR3ZWVuKENsb3NlTWVudSwgIlNpemUiLCBVRGltMi5uZXcoKSwgMC4yLCB0cnVlKQogICAgICBDbG9zZUd1aTpEZXN0cm95KCkKICAgIGVuZCkKICBlbmQKICAKICBDbG9zZV9CdXR0b24uTW91c2VCdXR0b24xQ2xpY2s6Q29ubmVjdChDcmVhdGVDbG9zZSkKICAKICBsb2NhbCBBbmltTWVudSA9IENyZWF0ZSgiRnJhbWUiLCBTY3JlZW5HdWksIHsKICAgIFBvc2l0aW9uID0gVURpbTIubmV3KDAuNSwgMCwgMC41LCAwKSwKICAgIEFuY2hvclBvaW50ID0gVmVjdG9yMi5uZXcoMC41LCAwLjUpLAogICAgQmFja2dyb3VuZENvbG9yMyA9IENvbmZpZ3NfSFVCLkNvcl9IdWIKICB9KUNvcm5lcihBbmltTWVudSwge0Nvcm5lclJhZGl1cyA9IFVEaW0ubmV3KDAsIDYpfSkKICAKICBsb2NhbCBBbmltX0NyZWRpdHMgPSBDcmVhdGUoIlRleHRMYWJlbCIsIEFuaW1NZW51LCB7CiAgICBUZXh0ID0gQW5pbV9UaXRsZSwKICAgIEJhY2tncm91bmRUcmFuc3BhcmVuY3kgPSAxLAogICAgU2l6ZSA9IFVEaW0yLm5ldygxLCAwLCAxLCAwKSwKICAgIFZpc2libGUgPSBmYWxzZSwKICAgIEZvbnQgPSBDb25maWdzX0hVQi5UZXh0X0ZvbnQsCiAgICBUZXh0VHJhbnNwYXJlbmN5ID0gMSwKICAgIFRleHRDb2xvcjMgPSBDb25maWdzX0hVQi5Db3JfVGV4dCwKICAgIFBvc2l0aW9uID0gVURpbTIubmV3KDAsIDEwLCAwLCAwKSwKICAgIFRleHRYQWxpZ25tZW50ID0gIkxlZnQiLAogICAgVGV4dFNpemUgPSAxNQogIH0pCiAgCiAgQ3JlYXRlVHdlZW4oQW5pbU1lbnUsICJTaXplIiwgVURpbTIubmV3KDAsIDAsIDAsIDM1KSwgMC41LCB0cnVlKQogIENyZWF0ZVR3ZWVuKEFuaW1NZW51LCAiU2l6ZSIsIFVEaW0yLm5ldygwLCAxNTAsIDAsIDM1KSwgMC41LCB0cnVlKQogIEFuaW1fQ3JlZGl0cy5WaXNpYmxlID0gdHJ1ZQogIHRhc2sud2FpdCgwLjUpCiAgZm9yIGkgPSAxLCAwLCAtMC4xIGRvIHRhc2sud2FpdCgpCiAgICBBbmltX0NyZWRpdHMuVGV4dFRyYW5zcGFyZW5jeSA9IGkKICBlbmQKICB0YXNrLndhaXQoMSkKICBmb3IgaSA9IDAsIDEsIDAuMSBkbyB0YXNrLndhaXQoKQogICAgQW5pbV9DcmVkaXRzLlRleHRUcmFuc3BhcmVuY3kgPSBpCiAgZW5kCiAgQW5pbV9DcmVkaXRzOkRlc3Ryb3koKQogIEFuaW1NZW51OkRlc3Ryb3koKQogIENyZWF0ZVR3ZWVuKE1lbnUsICJTaXplIiwgVURpbTIubmV3KDAsIDUwMCwgMCwgMzUpLCAwLjUsIHRydWUpCiAgVG9wQmFyLlZpc2libGUgPSB0cnVlCiAgQ3JlYXRlVHdlZW4oTWVudSwgIlNpemUiLCBVRGltMi5uZXcoMCwgNTAwLCAwLCAyNzApLCAwLjMsIHRydWUpCiAgTWVudS5EcmFnZ2FibGUgPSB0cnVlCiAgCiAgbG9jYWwgbGluZV9Db250YWluZXJzID0gQ3JlYXRlKCJGcmFtZSIsIE1lbnUsIHsKICAgIEJhY2tncm91bmRUcmFuc3BhcmVuY3kgPSAxLAogICAgU2l6ZSA9IFVEaW0yLm5ldygxLCAwLCAxLCAwKQogIH0pCiAgCiAgZnVuY3Rpb24gTWluaW1pemVCdXR0b24oQ29uZmlncykKICAgIGxvY2FsIGltYWdlID0gQ29uZmlncy5JbWFnZSBvciAiIgogICAgbG9jYWwgc2l6ZSA9IENvbmZpZ3MuU2l6ZSBvciB7MzAsIDMwfQogICAgbG9jYWwgY29sb3IgPSBDb25maWdzLkNvbG9yIG9yIENvbmZpZ3NfSFVCLkNvcl9IdWIKICAgIGxvY2FsIGNvcm5lciA9IENvbmZpZ3MuQ29ybmVyIG9yIHRydWUKICAgIGxvY2FsIHN0cm9rZSA9IENvbmZpZ3MuU3Ryb2tlIG9yIGZhbHNlCiAgICBsb2NhbCBzdHJva2Vjb2xvciA9IENvbmZpZ3MuU3Ryb2tlQ29sb3Igb3IgQ29uZmlnc19IVUIuQ29yX1N0cm9rZQogICAgCiAgICBsb2NhbCBCdXR0b24gPSBDcmVhdGUoIkltYWdlQnV0dG9uIiwgU2NyZWVuR3VpLCB7CiAgICAgIFNpemUgPSBVRGltMi5uZXcoMCwgc2l6ZVsxXSwgMCwgc2l6ZVsyXSksCiAgICAgIFBvc2l0aW9uID0gVURpbTIubmV3KDAuMTUsIDAsIDAuMTUsIDApLAogICAgICBCYWNrZ3JvdW5kQ29sb3IzID0gY29sb3IsCiAgICAgIEltYWdlID0gaW1hZ2UsCiAgICAgIEFjdGl2ZSA9IHRydWUsCiAgICAgIERyYWdnYWJsZSA9IHRydWUKICAgIH0paWYgY29ybmVyIHRoZW4gQ29ybmVyKEJ1dHRvbikgZW5kIGlmIHN0cm9rZSB0aGVuIFN0cm9rZShCdXR0b24sIHtDb2xvciA9IHN0cm9rZWNvbG9yfSkgZW5kCiAgICAKICAgIGxvY2FsIG1pbmltaXplID0gZmFsc2UKICAgIEJ1dHRvbi5Nb3VzZUJ1dHRvbjFDbGljazpDb25uZWN0KGZ1bmN0aW9uKCkKICAgICAgaWYgbWluaW1pemUgdGhlbgogICAgICAgIG1pbmltaXplID0gZmFsc2UKICAgICAgICBNZW51LlZpc2libGUgPSB0cnVlCiAgICAgICAgaWYgbm90IElzTWluaW1pemVkIHRoZW4KICAgICAgICAgIENyZWF0ZVR3ZWVuKE1lbnUsICJTaXplIiwgVURpbTIubmV3KDAsIDUwMCwgMCwgMjcwKSwgMC4zLCBmYWxzZSkKICAgICAgICBlbHNlCiAgICAgICAgICBDcmVhdGVUd2VlbihNZW51LCAiU2l6ZSIsIFVEaW0yLm5ldygwLCA1MDAsIDAsIDI1KSwgMC4zLCBmYWxzZSkKICAgICAgICBlbmQKICAgICAgZWxzZQogICAgICAgIG1pbmltaXplID0gdHJ1ZQogICAgICAgIENyZWF0ZVR3ZWVuKE1lbnUsICJTaXplIiwgVURpbTIubmV3KDAsIDUwMCwgMCwgMCksIDAuMywgdHJ1ZSkKICAgICAgICBNZW51LlZpc2libGUgPSBmYWxzZQogICAgICBlbmQKICAgIGVuZCkKICBlbmQKICAKICBsb2NhbCBTY3JvbGxCYXIgPSBDcmVhdGUoIlNjcm9sbGluZ0ZyYW1lIiwgTWVudSwgewogICAgU2l6ZSA9IFVEaW0yLm5ldygwLCAxNDAsIDEsIC10b251bWJlcihUb3BCYXIuU2l6ZS5ZLk9mZnNldCArIDIpKSwKICAgIFBvc2l0aW9uID0gVURpbTIubmV3KDAsIDAsIDEsIDApLAogICAgQW5jaG9yUG9pbnQgPSBWZWN0b3IyLm5ldygwLCAxKSwKICAgIENhbnZhc1NpemUgPSBVRGltMi5uZXcoKSwKICAgIFNjcm9sbGluZ0RpcmVjdGlvbiA9ICJZIiwKICAgIEF1dG9tYXRpY0NhbnZhc1NpemUgPSAiWSIsCiAgICBCYWNrZ3JvdW5kVHJhbnNwYXJlbmN5ID0gMSwKICAgIFNjcm9sbEJhclRoaWNrbmVzcyA9IDIKICB9KUNyZWF0ZSgiVUlQYWRkaW5nIiwgU2Nyb2xsQmFyLCB7CiAgICBQYWRkaW5nTGVmdCA9IFVEaW0ubmV3KDAsIDEwKSwKICAgIFBhZGRpbmdSaWdodCA9IFVEaW0ubmV3KDAsIDEwKSwKICAgIFBhZGRpbmdUb3AgPSBVRGltLm5ldygwLCAxMCksCiAgICBQYWRkaW5nQm90dG9tID0gVURpbS5uZXcoMCwgMTApCiAgfSlDcmVhdGUoIlVJTGlzdExheW91dCIsIFNjcm9sbEJhciwgewogICAgUGFkZGluZyA9IFVEaW0ubmV3KDAsIDUpCiAgfSkKICAKICBsb2NhbCBDb250YWluZXJzID0gQ3JlYXRlKCJGcmFtZSIsIE1lbnUsIHsKICAgIFNpemUgPSBVRGltMi5uZXcoMSwgLXRvbnVtYmVyKFNjcm9sbEJhci5TaXplLlguT2Zmc2V0ICsgMiksIDEsIC10b251bWJlcihUb3BCYXIuU2l6ZS5ZLk9mZnNldCArIDIpKSwKICAgIEFuY2hvclBvaW50ID0gVmVjdG9yMi5uZXcoMSwgMSksCiAgICBQb3NpdGlvbiA9IFVEaW0yLm5ldygxLCAwLCAxLCAwKSwKICAgIEJhY2tncm91bmRUcmFuc3BhcmVuY3kgPSAxCiAgfSlDb3JuZXIoQ29udGFpbmVycykKICAKICBsb2NhbCBmdW5jdGlvbiBBZGRfTGluZShwcm9wcykKICAgIGxvY2FsIGxpbmUgPSBDcmVhdGUoIkZyYW1lIiwgbGluZV9Db250YWluZXJzLCBwcm9wcykKICAgIGxpbmUuQmFja2dyb3VuZENvbG9yMyA9IENvbmZpZ3NfSFVCLkNvcl9TdHJva2UKICAgIGxpbmUuQm9yZGVyU2l6ZVBpeGVsID0gMAogIGVuZAogIAogIEFkZF9MaW5lKHtTaXplID0gVURpbTIubmV3KDEsIDAsIDAsIDEpLFBvc2l0aW9uID0gVURpbTIubmV3KDAsIDAsIDAsIFRvcEJhci5TaXplLlkuT2Zmc2V0KX0pCiAgQWRkX0xpbmUoe1NpemUgPSBVRGltMi5uZXcoMCwgMSwgMSwgLXRvbnVtYmVyKFRvcEJhci5TaXplLlkuT2Zmc2V0ICsgMSkpLAogIFBvc2l0aW9uID0gVURpbTIubmV3KDAsIFNjcm9sbEJhci5TaXplLlguT2Zmc2V0LCAwLCBUb3BCYXIuU2l6ZS5ZLk9mZnNldCl9KQogIAogIGxvY2FsIGZpcnN0VmlzaWJsZSA9IHRydWUKICBsb2NhbCBGaXJzdFRhYiA9IHRydWUKICBsb2NhbCB0ZXh0c2l6ZSA9IDE1CiAgbG9jYWwgdGV4dGNvbG9yID0gQ29uZmlnc19IVUIuQ29yX1RleHQKICAKICBNZW51OkdldFByb3BlcnR5Q2hhbmdlZFNpZ25hbCgiU2l6ZSIpOkNvbm5lY3QoZnVuY3Rpb24oKQogICAgaWYgTWVudS5TaXplLlkuT2Zmc2V0ID4gNzAgdGhlbgogICAgICBTY3JvbGxCYXIuVmlzaWJsZSA9IHRydWUKICAgICAgQ29udGFpbmVycy5WaXNpYmxlID0gdHJ1ZQogICAgICBsaW5lX0NvbnRhaW5lcnMuVmlzaWJsZSA9IHRydWUKICAgIGVsc2UKICAgICAgU2Nyb2xsQmFyLlZpc2libGUgPSBmYWxzZQogICAgICBDb250YWluZXJzLlZpc2libGUgPSBmYWxzZQogICAgICBsaW5lX0NvbnRhaW5lcnMuVmlzaWJsZSA9IGZhbHNlCiAgICBlbmQKICBlbmQpCiAgCiAgZnVuY3Rpb24gTWFrZVRhYihDb25maWdzKQogICAgbG9jYWwgVGFiTmFtZSA9IENvbmZpZ3MuTmFtZSBvciAiVGFiIgogICAgbG9jYWwgVGFiVGl0bGUgPSBDb25maWdzLlRhYlRpdGxlIG9yIGZhbHNlCiAgICAKICAgIGxvY2FsIEZyYW1lID0gQ3JlYXRlKCJGcmFtZSIsIFNjcm9sbEJhciwgewogICAgICBTaXplID0gVURpbTIubmV3KDEsIDAsIDAsIDI1KSwKICAgICAgQmFja2dyb3VuZFRyYW5zcGFyZW5jeSA9IDEKICAgIH0pQ29ybmVyKEZyYW1lKVN0cm9rZShGcmFtZSkKICAgIAogICAgbG9jYWwgVGV4dEJ1dHRvbiA9IENyZWF0ZSgiVGV4dEJ1dHRvbiIsIEZyYW1lLCB7CiAgICAgIFNpemUgPSBVRGltMi5uZXcoMSwgMCwgMSwgMCksCiAgICAgIEJhY2tncm91bmRUcmFuc3BhcmVuY3kgPSAxLAogICAgICBUZXh0ID0gIiIKICAgIH0pCiAgICAKICAgIGxvY2FsIFRleHRMYWJlbCA9IENyZWF0ZSgiVGV4dExhYmVsIiwgRnJhbWUsIHsKICAgICAgU2l6ZSA9IFVEaW0yLm5ldygxLCAwLCAxLCAwKSwKICAgICAgQmFja2dyb3VuZFRyYW5zcGFyZW5jeSA9IDEsCiAgICAgIEZvbnQgPSBDb25maWdzX0hVQi5UZXh0X0ZvbnQsCiAgICAgIFRleHRDb2xvcjMgPSB0ZXh0Y29sb3IsCiAgICAgIFRleHRTaXplID0gdGV4dHNpemUsCiAgICAgIFRleHQgPSBUYWJOYW1lCiAgICB9KQogICAgCiAgICBsb2NhbCBDb250YWluZXIgPSBDcmVhdGUoIlNjcm9sbGluZ0ZyYW1lIiwgQ29udGFpbmVycywgewogICAgICBTaXplID0gVURpbTIubmV3KDEsIDAsIDEsIDApLAogICAgICBTY3JvbGxpbmdEaXJlY3Rpb24gPSAiWSIsCiAgICAgIEF1dG9tYXRpY0NhbnZhc1NpemUgPSAiWSIsCiAgICAgIENhbnZhc1NpemUgPSBVRGltMi5uZXcoKSwKICAgICAgQmFja2dyb3VuZFRyYW5zcGFyZW5jeSA9IDEsCiAgICAgIFNjcm9sbEJhclRoaWNrbmVzcyA9IDIsCiAgICAgIFZpc2libGUgPSBmaXJzdFZpc2libGUKICAgIH0pQ3JlYXRlKCJVSVBhZGRpbmciLCBDb250YWluZXIsIHsKICAgICAgUGFkZGluZ0xlZnQgPSBVRGltLm5ldygwLCAxMCksCiAgICAgIFBhZGRpbmdSaWdodCA9IFVEaW0ubmV3KDAsIDEwKSwKICAgICAgUGFkZGluZ1RvcCA9IFVEaW0ubmV3KDAsIDEwKSwKICAgICAgUGFkZGluZ0JvdHRvbSA9IFVEaW0ubmV3KDAsIDEwKQogICAgfSlDcmVhdGUoIlVJTGlzdExheW91dCIsIENvbnRhaW5lciwgewogICAgICBQYWRkaW5nID0gVURpbS5uZXcoMCwgNSkKICAgIH0pCiAgICAKICAgIGlmIFRhYlRpdGxlIHRoZW4KICAgICAgQ3JlYXRlKCJUZXh0TGFiZWwiLENvbnRhaW5lcix7QmFja2dyb3VuZFRyYW5zcGFyZW5jeT0xLFRleHQ9IiMiLi5zdHJpbmcuZ3N1YihUYWJOYW1lLCIgIiwiLSIpLFRleHRTaXplPTI1LEZvbnQ9Q29uZmlnc19IVUIuVGV4dF9Gb250LFRleHRYQWxpZ25tZW50PSJMZWZ0IixUZXh0Q29sb3IzPUNvbmZpZ3NfSFVCLkNvcl9UZXh0LFNpemU9VURpbTIubmV3KDEsIDAsIDAsIDMwKSxQb3NpdGlvbj1VRGltMi5uZXcoMCwgMzAsIDAsIDApLE5hbWU9IkZyYW1lIn0pCiAgICBlbmQKICAgIAogICAgVGV4dEJ1dHRvbi5Nb3VzZUJ1dHRvbjFDbGljazpDb25uZWN0KGZ1bmN0aW9uKCkKICAgICAgZm9yIF8sY29udGFpbmVyIGluIHBhaXJzKENvbnRhaW5lcnM6R2V0Q2hpbGRyZW4oKSkgZG8KICAgICAgICBpZiBjb250YWluZXI6SXNBKCJTY3JvbGxpbmdGcmFtZSIpIHRoZW4KICAgICAgICAgIGNvbnRhaW5lci5WaXNpYmxlID0gZmFsc2UKICAgICAgICBlbmQKICAgICAgZW5kCiAgICAgIGZvciBfLGZyYW1lIGluIHBhaXJzKFNjcm9sbEJhcjpHZXRDaGlsZHJlbigpKSBkbwogICAgICAgIGlmIGZyYW1lOklzQSgiRnJhbWUiKSBhbmQgZnJhbWU6RmluZEZpcnN0Q2hpbGQoIlRleHRMYWJlbCIpIGFuZCBmcmFtZS5UZXh0TGFiZWwgfj0gVGV4dExhYmVsIHRoZW4KICAgICAgICAgIENyZWF0ZVR3ZWVuKGZyYW1lLlRleHRMYWJlbCwgIlRleHRDb2xvcjMiLCBDb25maWdzX0hVQi5Db3JfRGFya1RleHQsIDAuMywgZmFsc2UpCiAgICAgICAgICBmcmFtZS5UZXh0TGFiZWwuVGV4dFNpemUgPSAxNAogICAgICAgIGVuZAogICAgICBlbmQKICAgICAgQ29udGFpbmVyLlZpc2libGUgPSB0cnVlCiAgICAgIENyZWF0ZVR3ZWVuKFRleHRMYWJlbCwgIlRleHRDb2xvcjMiLCBDb25maWdzX0hVQi5Db3JfVGV4dCwgMC4zLCBmYWxzZSkKICAgICAgVGV4dExhYmVsLlRleHRTaXplID0gMTUKICAgIGVuZCkKICAgIAogICAgZmlyc3RWaXNpYmxlID0gZmFsc2UKICAgIEZpcnN0VGFiID0gZmFsc2UKICAgIHRleHRzaXplID0gMTQKICAgIHRleHRjb2xvciA9IENvbmZpZ3NfSFVCLkNvcl9EYXJrVGV4dAogICAgcmV0dXJuIENvbnRhaW5lcgogIGVuZAogIAogIGZ1bmN0aW9uIEFkZEJ1dHRvbihwYXJlbnQsIENvbmZpZ3MpCiAgICBsb2NhbCBCdXR0b25OYW1lID0gQ29uZmlncy5OYW1lIG9yICJCdXR0b24hISIKICAgIGxvY2FsIENhbGxiYWNrID0gQ29uZmlncy5DYWxsYmFjayBvciBmdW5jdGlvbigpIGVuZAogICAgCiAgICBsb2NhbCBUZXh0QnV0dG9uID0gQ3JlYXRlKCJUZXh0QnV0dG9uIiwgcGFyZW50LCB7CiAgICAgIFNpemUgPSBVRGltMi5uZXcoMSwgMCwgMCwgMjUpLAogICAgICBCYWNrZ3JvdW5kQ29sb3IzID0gQ29uZmlnc19IVUIuQ29yX09wdGlvbnMsCiAgICAgIE5hbWUgPSAiRnJhbWUiLAogICAgICBUZXh0ID0gIiIsCiAgICAgIEF1dG9CdXR0b25Db2xvciA9IGZhbHNlCiAgICB9KUNvcm5lcihUZXh0QnV0dG9uKVN0cm9rZShUZXh0QnV0dG9uKQogICAgCiAgICBsb2NhbCBUZXh0TGFiZWwgPSBDcmVhdGUoIlRleHRMYWJlbCIsIFRleHRCdXR0b24sIHsKICAgICAgVGV4dFNpemUgPSAxMiwKICAgICAgVGV4dENvbG9yMyA9IENvbmZpZ3NfSFVCLkNvcl9UZXh0LAogICAgICBUZXh0ID0gQnV0dG9uTmFtZSwKICAgICAgU2l6ZSA9IFVEaW0yLm5ldygxLCAwLCAxLCAwKSwKICAgICAgUG9zaXRpb24gPSBVRGltMi5uZXcoMCwgMzUsIDAsIDApLAogICAgICBCYWNrZ3JvdW5kVHJhbnNwYXJlbmN5ID0gMSwKICAgICAgVGV4dFhBbGlnbm1lbnQgPSAiTGVmdCIsCiAgICAgIEZvbnQgPSBDb25maWdzX0hVQi5UZXh0X0ZvbnQKICAgIH0pCiAgICAKICAgIGxvY2FsIEltYWdlTGFiZWwgPSBDcmVhdGUoIkltYWdlTGFiZWwiLCBUZXh0QnV0dG9uLCB7CiAgICAgIEltYWdlID0gInJieGFzc2V0aWQ6Ly8xNTE1NTIxOTQwNSIsCiAgICAgIFNpemUgPSBVRGltMi5uZXcoMCwgMjAsIDAsIDIwKSwKICAgICAgUG9zaXRpb24gPSBVRGltMi5uZXcoMCwgNSwgMCwgMi41KSwKICAgICAgQmFja2dyb3VuZFRyYW5zcGFyZW5jeSA9IDEsCiAgICAgIEltYWdlQ29sb3IzID0gQ29uZmlnc19IVUIuQ29yX1N0cm9rZQogICAgfSkKICAgIAogICAgVGV4dEJ1dHRvbi5Nb3VzZUJ1dHRvbjFDbGljazpDb25uZWN0KGZ1bmN0aW9uKCkKICAgICAgQ2FsbGJhY2soIkNsaWNrISEiKQogICAgICBDcmVhdGVUd2VlbihJbWFnZUxhYmVsLCAiSW1hZ2VDb2xvcjMiLCBDb2xvcjMuZnJvbVJHQigzMCwgMTQwLCAyMDApLCAwLjIsIHRydWUpCiAgICAgIENyZWF0ZVR3ZWVuKEltYWdlTGFiZWwsICJJbWFnZUNvbG9yMyIsIENvbmZpZ3NfSFVCLkNvcl9TdHJva2UsIDAuMiwgZmFsc2UpCiAgICBlbmQpCiAgICAKICAgIFRleHRTZXRDb2xvcihUZXh0TGFiZWwpCiAgZW5kCiAgCiAgZnVuY3Rpb24gQWRkVG9nZ2xlKHBhcmVudCwgQ29uZmlncykKICAgIGxvY2FsIFRvZ2dsZU5hbWUgPSBDb25maWdzLk5hbWUgb3IgIlRvZ2dsZSEhIgogICAgbG9jYWwgRGVmYXVsdCA9IENvbmZpZ3MuRGVmYXVsdCBvciBmYWxzZQogICAgbG9jYWwgQ2FsbGJhY2sgPSBDb25maWdzLkNhbGxiYWNrIG9yIGZ1bmN0aW9uKCkgZW5kCiAgICAKICAgIGxvY2FsIFRleHRCdXR0b24gPSBDcmVhdGUoIlRleHRCdXR0b24iLCBwYXJlbnQsIHsKICAgICAgU2l6ZSA9IFVEaW0yLm5ldygxLCAwLCAwLCAyNSksCiAgICAgIEJhY2tncm91bmRDb2xvcjMgPSBDb25maWdzX0hVQi5Db3JfT3B0aW9ucywKICAgICAgTmFtZSA9ICJGcmFtZSIsCiAgICAgIFRleHQgPSAiIiwKICAgICAgQXV0b0J1dHRvbkNvbG9yID0gZmFsc2UKICAgIH0pQ29ybmVyKFRleHRCdXR0b24pU3Ryb2tlKFRleHRCdXR0b24pCiAgICAKICAgIGxvY2FsIFRleHRMYWJlbCA9IENyZWF0ZSgiVGV4dExhYmVsIiwgVGV4dEJ1dHRvbiwgewogICAgICBUZXh0U2l6ZSA9IDEyLAogICAgICBUZXh0Q29sb3IzID0gQ29uZmlnc19IVUIuQ29yX1RleHQsCiAgICAgIFRleHQgPSBUb2dnbGVOYW1lLAogICAgICBTaXplID0gVURpbTIubmV3KDEsIDAsIDEsIDApLAogICAgICBQb3NpdGlvbiA9IFVEaW0yLm5ldygwLCAzNSwgMCwgMCksCiAgICAgIEJhY2tncm91bmRUcmFuc3BhcmVuY3kgPSAxLAogICAgICBUZXh0WEFsaWdubWVudCA9ICJMZWZ0IiwKICAgICAgRm9udCA9IENvbmZpZ3NfSFVCLlRleHRfRm9udAogICAgfSkKICAgIAogICAgbG9jYWwgRnJhbWUxID0gQ3JlYXRlKCJGcmFtZSIsIFRleHRCdXR0b24sIHsKICAgICAgU2l6ZSA9IFVEaW0yLm5ldygwLCAyNSwgMCwgMTUpLAogICAgICBQb3NpdGlvbiA9IFVEaW0yLm5ldygwLCA1LCAwLCA1KSwKICAgICAgQmFja2dyb3VuZFRyYW5zcGFyZW5jeSA9IDEsCiAgICB9KUNvcm5lcihGcmFtZTEsIHtDb3JuZXJSYWRpdXMgPSBVRGltLm5ldygxLCAwKX0pCiAgICBsb2NhbCBTdHJva2UgPSBTdHJva2UoRnJhbWUxLCB7VGhpY2tuZXNzID0gMn0pCiAgICAKICAgIGxvY2FsIEZyYW1lMiA9IENyZWF0ZSgiRnJhbWUiLCBGcmFtZTEsIHsKICAgICAgU2l6ZSA9IFVEaW0yLm5ldygwLCAxMywgMCwgMTMpLAogICAgICBQb3NpdGlvbiA9IFVEaW0yLm5ldygwLCAyLCAwLjUsIDApLAogICAgICBBbmNob3JQb2ludCA9IFZlY3RvcjIubmV3KDAsIDAuNSksCiAgICAgIEJhY2tncm91bmRDb2xvcjMgPSBDb25maWdzX0hVQi5Db3JfU3Ryb2tlCiAgICB9KUNvcm5lcihGcmFtZTIsIHtDb3JuZXJSYWRpdXMgPSBVRGltLm5ldygxLCAwKX0pCiAgICAKICAgIGxvY2FsIE9uT2ZmID0gZmFsc2UKICAgIGlmIERlZmF1bHQgdGhlbgogICAgICBPbk9mZiA9IHRydWUKICAgICAgQ3JlYXRlVHdlZW4oRnJhbWUyLCAiUG9zaXRpb24iLCBVRGltMi5uZXcoMCwgMTAsIDAuNSwgMCksIDAuMiwgZmFsc2UpCiAgICAgIENyZWF0ZVR3ZWVuKEZyYW1lMiwgIkJhY2tncm91bmRDb2xvcjMiLCBDb2xvcjMuZnJvbVJHQigzMCwgMTQwLCAyMDApLCAwLjIsIGZhbHNlKQogICAgICBDcmVhdGVUd2VlbihTdHJva2UsICJDb2xvciIsIENvbG9yMy5mcm9tUkdCKDMwLCAxNDAsIDIwMCksIDAuMiwgZmFsc2UpCiAgICAgIENyZWF0ZVR3ZWVuKFRleHRMYWJlbCwgIlRleHRDb2xvcjMiLCBDb2xvcjMuZnJvbVJHQigzMCwgMTQwLCAyMDApLCAwLjIsIGZhbHNlKQogICAgZW5kCiAgICBDYWxsYmFjayhPbk9mZikKICAgIFRleHRCdXR0b24uTW91c2VCdXR0b24xQ2xpY2s6Q29ubmVjdChmdW5jdGlvbigpCiAgICAgIGlmIEZyYW1lMi5Qb3NpdGlvbi5YLk9mZnNldCA8IDUgdGhlbgogICAgICAgIE9uT2ZmID0gdHJ1ZQogICAgICAgIENyZWF0ZVR3ZWVuKEZyYW1lMiwgIlBvc2l0aW9uIiwgVURpbTIubmV3KDAsIDEwLCAwLjUsIDApLCAwLjIsIGZhbHNlKQogICAgICAgIENyZWF0ZVR3ZWVuKEZyYW1lMiwgIkJhY2tncm91bmRDb2xvcjMiLCBDb2xvcjMuZnJvbVJHQigzMCwgMTQwLCAyMDApLCAwLjIsIGZhbHNlKQogICAgICAgIENyZWF0ZVR3ZWVuKFN0cm9rZSwgIkNvbG9yIiwgQ29sb3IzLmZyb21SR0IoMzAsIDE0MCwgMjAwKSwgMC4yLCBmYWxzZSkKICAgICAgICBDcmVhdGVUd2VlbihUZXh0TGFiZWwsICJUZXh0Q29sb3IzIiwgQ29sb3IzLmZyb21SR0IoMzAsIDE0MCwgMjAwKSwgMC4yLCBmYWxzZSkKICAgICAgICBDYWxsYmFjayh0cnVlKQogICAgICBlbHNlCiAgICAgICAgT25PZmYgPSBmYWxzZQogICAgICAgIENyZWF0ZVR3ZWVuKEZyYW1lMiwgIlBvc2l0aW9uIiwgVURpbTIubmV3KDAsIDIsIDAuNSwgMCksIDAuMiwgZmFsc2UpCiAgICAgICAgQ3JlYXRlVHdlZW4oRnJhbWUyLCAiQmFja2dyb3VuZENvbG9yMyIsIENvbmZpZ3NfSFVCLkNvcl9TdHJva2UsIDAuMiwgZmFsc2UpCiAgICAgICAgQ3JlYXRlVHdlZW4oU3Ryb2tlLCAiQ29sb3IiLCBDb25maWdzX0hVQi5Db3JfU3Ryb2tlLCAwLjIsIGZhbHNlKQogICAgICAgIENyZWF0ZVR3ZWVuKFRleHRMYWJlbCwgIlRleHRDb2xvcjMiLCBDb25maWdzX0hVQi5Db3JfVGV4dCwgMC4yLCBmYWxzZSkKICAgICAgICBDYWxsYmFjayhmYWxzZSkKICAgICAgZW5kCiAgICBlbmQpCiAgICByZXR1cm4ge0ZyYW1lMiwgU3Ryb2tlLCBPbk9mZiwgQ2FsbGJhY2t9CiAgZW5kCiAgCiAgZnVuY3Rpb24gQWRkTW9iaWxlVG9nZ2xlKENvbmZpZ3MpCiAgICBsb2NhbCBuYW1lID0gQ29uZmlncy5OYW1lIG9yICJBdGFsaG8iCiAgICBsb2NhbCBDYWxsYmFjayA9IENvbmZpZ3MuQ2FsbGJhY2sgb3IgZnVuY3Rpb24oKSBlbmQKICAgIGxvY2FsIHZpc2libGUgPSBDb25maWdzLlZpc2libGUgb3IgZmFsc2UKICAgIAogICAgbG9jYWwgVG9nZ2xlX0F0YWxobyA9IENyZWF0ZSgiRnJhbWUiLCBTY3JlZW5HdWksIHsKICAgICAgU2l6ZSA9IFVEaW0yLm5ldygwLCAxMDAsIDAsIDYwKSwKICAgICAgUG9zaXRpb24gPSBVRGltMi5uZXcoMC44LCAwLCAwLjgsIDApLAogICAgICBBbmNob3JQb2ludCA9IFZlY3RvcjIubmV3KDAuNSwgMC41KSwKICAgICAgQmFja2dyb3VuZENvbG9yMyA9IENvbmZpZ3NfSFVCLkNvcl9IdWIsCiAgICAgIERyYWdnYWJsZSA9IHRydWUsCiAgICAgIEFjdGl2ZSA9IHRydWUsCiAgICAgIFZpc2libGUgPSB2aXNpYmxlCiAgICB9KUNvcm5lcihUb2dnbGVfQXRhbGhvKQogICAgCiAgICBsb2NhbCBUZXh0TGFiZWwgPSBDcmVhdGUoIlRleHRMYWJlbCIsIFRvZ2dsZV9BdGFsaG8sIHsKICAgICAgU2l6ZSA9IFVEaW0yLm5ldygxLCAwLCAwLCAyMCksCiAgICAgIFRleHRTaXplID0gMjAsCiAgICAgIEZvbnQgPSBDb25maWdzX0hVQi5UZXh0X0ZvbnQsCiAgICAgIFRleHRDb2xvcjMgPSBDb25maWdzX0hVQi5Db3JfVGV4dCwKICAgICAgVGV4dCA9IG5hbWUsCiAgICAgIEJhY2tncm91bmRUcmFuc3BhcmVuY3kgPSAxCiAgICB9KQogICAgCiAgICBsb2NhbCBCdXR0b24gPSBDcmVhdGUoIlRleHRCdXR0b24iLCBUb2dnbGVfQXRhbGhvLCB7CiAgICAgIFNpemUgPSBVRGltMi5uZXcoMSwgMCwgMCwgNDApLAogICAgICBQb3NpdGlvbiA9IFVEaW0yLm5ldygwLCAwLCAwLCAyMCksCiAgICAgIEJhY2tncm91bmRUcmFuc3BhcmVuY3kgPSAxLAogICAgICBUZXh0ID0gIiIKICAgIH0pCiAgICAKICAgIGxvY2FsIEZyYW1lID0gQ3JlYXRlKCJGcmFtZSIsIEJ1dHRvbiwgewogICAgICBQb3NpdGlvbiA9IFVEaW0yLm5ldygwLjUsIDAsIDAuNSwgMCksCiAgICAgIEFuY2hvclBvaW50ID0gVmVjdG9yMi5uZXcoMC41LCAwLjUpLAogICAgICBTaXplID0gVURpbTIubmV3KDEsIC00MCwgMSwgLTE1KSwKICAgICAgQmFja2dyb3VuZFRyYW5zcGFyZW5jeSA9IDEKICAgIH0pQ29ybmVyKEZyYW1lLCB7Q29ybmVyUmFkaXVzID0gVURpbS5uZXcoMiwgMCl9KQogICAgCiAgICBsb2NhbCBGcmFtZTIgPSBDcmVhdGUoIkZyYW1lIiwgRnJhbWUsIHsKICAgICAgUG9zaXRpb24gPSBVRGltMi5uZXcoMCwgNSwgMC41LCAwKSwKICAgICAgQW5jaG9yUG9pbnQgPSBWZWN0b3IyLm5ldygwLCAwLjUpLAogICAgICBTaXplID0gVURpbTIubmV3KDAsIDE3LCAwLCAxNyksCiAgICAgIEJhY2tncm91bmRUcmFuc3BhcmVuY3kgPSAxCiAgICB9KUNvcm5lcihGcmFtZTIsIHtDb3JuZXJSYWRpdXMgPSBVRGltLm5ldyg1LCAwKX0pCiAgICAKICAgIGxvY2FsIHN0cm9rZSA9IFN0cm9rZShGcmFtZSwgewogICAgICBDb2xvciA9IENvbG9yMy5mcm9tUkdCKDEwMCwgMTAwLCAxMDApLAogICAgICBUaGlja25lc3MgPSAzCiAgICB9KQogICAgCiAgICBsb2NhbCBzdHJva2UgPSBTdHJva2UoRnJhbWUyLCB7CiAgICAgIENvbG9yID0gQ29sb3IzLmZyb21SR0IoMTAwLCAxMDAsIDEwMCksCiAgICAgIFRoaWNrbmVzcyA9IDMKICAgIH0pCiAgICAKICAgIGxvY2FsIE9uT2ZmID0gZmFsc2UKICAgIENhbGxiYWNrKE9uT2ZmKQogICAgQnV0dG9uLk1vdXNlQnV0dG9uMUNsaWNrOkNvbm5lY3QoZnVuY3Rpb24oKQogICAgICBpZiBPbk9mZiA9PSBmYWxzZSB0aGVuCiAgICAgICAgQ3JlYXRlVHdlZW4oRnJhbWUyLCAiUG9zaXRpb24iLCBVRGltMi5uZXcoMSwgLTIyLCAwLjUsIDApLCAwLjIsIGZhbHNlKQogICAgICBlbHNlCiAgICAgICAgQ3JlYXRlVHdlZW4oRnJhbWUyLCAiUG9zaXRpb24iLCBVRGltMi5uZXcoMCwgNSwgMC41LCAwKSwgMC4yLCBmYWxzZSkKICAgICAgZW5kCiAgICAgIE9uT2ZmID0gbm90IE9uT2ZmCiAgICAgIENhbGxiYWNrKE9uT2ZmKQogICAgZW5kKQogICAgCiAgICByZXR1cm4gVG9nZ2xlX0F0YWxobwogIGVuZAogIAogIGZ1bmN0aW9uIFVwZGF0ZVRvZ2dsZSh0b2dnbGUsIHZhbHVlKQogICAgbG9jYWwgRnJhbWUyID0gdG9nZ2xlWzFdCiAgICBsb2NhbCBTdHJva2UgPSB0b2dnbGVbMl0KICAgIGxvY2FsIE9uT2ZmID0gdmFsdWUKICAgIGxvY2FsIENhbGxiYWNrID0gdG9nZ2xlWzRdCiAgICAKICAgIGlmIE9uT2ZmIHRoZW4KICAgICAgQ2FsbGJhY2sodHJ1ZSkKICAgICAgQ3JlYXRlVHdlZW4oRnJhbWUyLCAiUG9zaXRpb24iLCBVRGltMi5uZXcoMCwgMTAsIDAuNSwgMCksIDAuMiwgZmFsc2UpCiAgICAgIENyZWF0ZVR3ZWVuKEZyYW1lMiwgIkJhY2tncm91bmRDb2xvcjMiLCBDb2xvcjMuZnJvbVJHQigzMCwgMTQwLCAyMDApLCAwLjIsIGZhbHNlKQogICAgICBDcmVhdGVUd2VlbihTdHJva2UsICJDb2xvciIsIENvbG9yMy5mcm9tUkdCKDMwLCAxNDAsIDIwMCksIDAuMiwgZmFsc2UpCiAgICAgIENyZWF0ZVR3ZWVuKFRleHRMYWJlbCwgIlRleHRDb2xvcjMiLCBDb2xvcjMuZnJvbVJHQigzMCwgMTQwLCAyMDApLCAwLjIsIGZhbHNlKQogICAgZWxzZQogICAgICBDYWxsYmFjayhmYWxzZSkKICAgICAgQ3JlYXRlVHdlZW4oRnJhbWUyLCAiUG9zaXRpb24iLCBVRGltMi5uZXcoMCwgMiwgMC41LCAwKSwgMC4yLCBmYWxzZSkKICAgICAgQ3JlYXRlVHdlZW4oRnJhbWUyLCAiQmFja2dyb3VuZENvbG9yMyIsIENvbmZpZ3NfSFVCLkNvcl9TdHJva2UsIDAuMiwgZmFsc2UpCiAgICAgIENyZWF0ZVR3ZWVuKFN0cm9rZSwgIkNvbG9yIiwgQ29uZmlnc19IVUIuQ29yX1N0cm9rZSwgMC4yLCBmYWxzZSkKICAgICAgQ3JlYXRlVHdlZW4oVGV4dExhYmVsLCAiVGV4dENvbG9yMyIsIENvbmZpZ3NfSFVCLkNvcl9UZXh0LCAwLjIsIGZhbHNlKQogICAgZW5kCiAgZW5kCiAgCiAgZnVuY3Rpb24gQWRkU2xpZGVyKHBhcmVudCwgQ29uZmlncykKICAgIGxvY2FsIFNsaWRlck5hbWUgPSBDb25maWdzLk5hbWUgb3IgIlNsaWRlciEhIgogICAgbG9jYWwgSW5jcmVhc2UgPSBDb25maWdzLkluY3JlYXNlIG9yIDEKICAgIGxvY2FsIE1pblZhbHVlID0gQ29uZmlncy5NaW5WYWx1ZSAvIEluY3JlYXNlIG9yIDEwIC8gSW5jcmVhc2UKICAgIGxvY2FsIE1heFZhbHVlID0gQ29uZmlncy5NYXhWYWx1ZSAvIEluY3JlYXNlIG9yIDEwMCAvIEluY3JlYXNlCiAgICBsb2NhbCBEZWZhdWx0ID0gQ29uZmlncy5EZWZhdWx0IG9yIDI1CiAgICBsb2NhbCBDYWxsYmFjayA9IENvbmZpZ3MuQ2FsbGJhY2sgb3IgZnVuY3Rpb24oKSBlbmQKICAgIAogICAgbG9jYWwgRnJhbWUgPSBDcmVhdGUoIlRleHRCdXR0b24iLCBwYXJlbnQsIHsKICAgICAgU2l6ZSA9IFVEaW0yLm5ldygxLCAwLCAwLCAyNSksCiAgICAgIEJhY2tncm91bmRDb2xvcjMgPSBDb25maWdzX0hVQi5Db3JfT3B0aW9ucywKICAgICAgTmFtZSA9ICJGcmFtZSIsCiAgICAgIFRleHQgPSAwCiAgICB9KUNvcm5lcihGcmFtZSlTdHJva2UoRnJhbWUpCiAgICAKICAgIGxvY2FsIFRleHRMYWJlbCA9IENyZWF0ZSgiVGV4dEJ1dHRvbiIsIEZyYW1lLCB7CiAgICAgIFRleHRTaXplID0gMTIsCiAgICAgIFRleHRDb2xvcjMgPSBDb25maWdzX0hVQi5Db3JfVGV4dCwKICAgICAgVGV4dCA9IFNsaWRlck5hbWUsCiAgICAgIFNpemUgPSBVRGltMi5uZXcoMSwgMCwgMSwgMCksCiAgICAgIFBvc2l0aW9uID0gVURpbTIubmV3KDAsIDE1MCwgMCwgMCksCiAgICAgIEJhY2tncm91bmRUcmFuc3BhcmVuY3kgPSAxLAogICAgICBUZXh0WEFsaWdubWVudCA9ICJMZWZ0IiwKICAgICAgRm9udCA9IENvbmZpZ3NfSFVCLlRleHRfRm9udAogICAgfSlUZXh0U2V0Q29sb3IoVGV4dExhYmVsKQogICAgCiAgICBsb2NhbCBUZXh0TGFiZWxOdW1iZXIgPSBDcmVhdGUoIlRleHRMYWJlbCIsIEZyYW1lLCB7CiAgICAgIEZvbnQgPSBDb25maWdzX0hVQi5UZXh0X0ZvbnQsCiAgICAgIFNpemUgPSBVRGltMi5uZXcoMCwgMjAsIDAsIDIwKSwKICAgICAgVGV4dCA9ICIuLi4iLAogICAgICBQb3NpdGlvbiA9IFVEaW0yLm5ldygwLCA1LCAwLCAyLjUpLAogICAgICBUZXh0U2NhbGVkID0gdHJ1ZSwKICAgICAgVGV4dENvbG9yMyA9IENvbmZpZ3NfSFVCLkNvcl9UZXh0LAogICAgICBCYWNrZ3JvdW5kVHJhbnNwYXJlbmN5ID0gMQogICAgfSkKICAgIAogICAgbG9jYWwgU2xpZGVyQmFyMSA9IENyZWF0ZSgiVGV4dExhYmVsIiwgRnJhbWUsIHsKICAgICAgU2l6ZSA9IFVEaW0yLm5ldygwLCAxMDAsIDAsIDcuNSksCiAgICAgIFBvc2l0aW9uID0gVURpbTIubmV3KDAsIDM1LCAwLjUsIDApLAogICAgICBBbmNob3JQb2ludCA9IFZlY3RvcjIubmV3KDAsIDAuNSksCiAgICAgIEJhY2tncm91bmRDb2xvcjMgPSBDb25maWdzX0hVQi5Db3JfU3Ryb2tlLAogICAgICBUZXh0ID0gIiIKICAgIH0pQ29ybmVyKFNsaWRlckJhcjEpCiAgICAKICAgIGxvY2FsIFNhdmVQb3MgPSBDcmVhdGUoIkZyYW1lIiwgU2xpZGVyQmFyMSwgewogICAgICBTaXplID0gVURpbTIubmV3KDAsIDEsIDAsIDApLAogICAgICBWaXNpYmxlID0gZmFsc2UKICAgIH0pCiAgICAKICAgIGxvY2FsIFNsaWRlciA9IENyZWF0ZSgiRnJhbWUiLCBTbGlkZXJCYXIxLCB7CiAgICAgIEJhY2tncm91bmRDb2xvcjMgPSBDb25maWdzX0hVQi5Db3JfVGV4dCwKICAgICAgU2l6ZSA9IFVEaW0yLm5ldygwLCA3LjUsIDAsIDE1KSwKICAgICAgUG9zaXRpb24gPSBVRGltMi5uZXcoMCwgMCwgMC41LCAwKSwKICAgICAgQW5jaG9yUG9pbnQgPSBWZWN0b3IyLm5ldygwLCAwLjUpLAogICAgICBBY3RpdmUgPSB0cnVlLAogICAgICBEcmFnZ2FibGUgPSB0cnVlCiAgICB9KUNvcm5lcihTbGlkZXIpCiAgICAKICAgIGxvY2FsIFNsaWRlckJhcjIgPSBDcmVhdGUoIkZyYW1lIiwgU2xpZGVyQmFyMSwgewogICAgICBCYWNrZ3JvdW5kQ29sb3IzID0gQ29sb3IzLmZyb21SR0IoMzAsIDE0MCwgMjAwKSwKICAgICAgU2l6ZSA9IFVEaW0yLm5ldygwLCBTbGlkZXIuUG9zaXRpb24uWC5PZmZzZXQsIDEsIDApCiAgICB9KUNvcm5lcihTbGlkZXJCYXIyKQogICAgCiAgICBsb2NhbCBmdW5jdGlvbiBVcGRDb3VudGVyKFZhbHVlKQogICAgICBsb2NhbCBTdHJpbmcgPSB0b3N0cmluZyhWYWx1ZSAqIEluY3JlYXNlKQogICAgICBpZiBzdHJpbmcuZmluZChTdHJpbmcsICIuIikgdGhlbgogICAgICAgIFN0cmluZyA9IFN0cmluZzpzdWIoMSwgNSkKICAgICAgZW5kCiAgICAgIFRleHRMYWJlbE51bWJlci5UZXh0ID0gU3RyaW5nCiAgICAgIENhbGxiYWNrKFZhbHVlICogSW5jcmVhc2UpCiAgICBlbmQKICAgIAogICAgbG9jYWwgTW91c2VFbnRlck9yTGVhdmUgPSBmYWxzZQogICAgRnJhbWUuTW91c2VCdXR0b24xRG93bjpDb25uZWN0KGZ1bmN0aW9uKCkKICAgICAgTW91c2VFbnRlck9yTGVhdmUgPSB0cnVlCiAgICAgIHdoaWxlIE1vdXNlRW50ZXJPckxlYXZlIGRvIHRhc2sud2FpdCgpCiAgICAgICAgbG9jYWwgTW91c2VQb3MgPSBVc2VySW5wdXRTZXJ2aWNlOkdldE1vdXNlTG9jYXRpb24oKS5YIC0gU2F2ZVBvcy5BYnNvbHV0ZVBvc2l0aW9uLlgKICAgICAgICBTbGlkZXIuUG9zaXRpb24gPSBVRGltMi5uZXcoMCwgTW91c2VQb3MsIDAuNSwgMCkKICAgICAgZW5kCiAgICBlbmQpCiAgICBGcmFtZS5Nb3VzZUxlYXZlOkNvbm5lY3QoZnVuY3Rpb24oKQogICAgICBNb3VzZUVudGVyT3JMZWF2ZSA9IGZhbHNlCiAgICBlbmQpCiAgICAKICAgIGxvY2FsIGZ1bmN0aW9uIFNsaWRlclNldChOZXdWYWx1ZSkKICAgICAgbG9jYWwgbWF4LCBtaW4gPSBNYXhWYWx1ZSAqIEluY3JlYXNlLCBNaW5WYWx1ZSAqIEluY3JlYXNlCiAgICAgIGxvY2FsIFNsaWRlclBvcyA9IChOZXdWYWx1ZSAtIG1pbikgLyAobWF4IC0gbWluKQogICAgICBsb2NhbCBYX09mZnNldCA9IFNsaWRlclBvcyAqIDEwMAogICAgICBsb2NhbCBTbGlkZXJQb3NpdGlvbiA9IFVEaW0yLm5ldygwLCBYX09mZnNldCArIDEsIDAsIDApCiAgICAgIENyZWF0ZVR3ZWVuKFNsaWRlciwgIlBvc2l0aW9uIiwgU2xpZGVyUG9zaXRpb24sIDAuNSwgZmFsc2UpCiAgICBlbmQKICAgIFNsaWRlclNldChEZWZhdWx0KQogICAgCiAgICBTbGlkZXIuQ2hhbmdlZDpDb25uZWN0KGZ1bmN0aW9uKHByb3ApCiAgICAgIGlmIHByb3AgPT0gIlBvc2l0aW9uIiB0aGVuCiAgICAgICAgU2xpZGVyLlBvc2l0aW9uID0gVURpbTIubmV3KDAsIG1hdGguY2xhbXAoU2xpZGVyLlBvc2l0aW9uLlguT2Zmc2V0LCAwLCAxMDApLCAwLjUsIDApCiAgICAgICAgU2xpZGVyQmFyMi5TaXplID0gVURpbTIubmV3KDAsIFNsaWRlci5Qb3NpdGlvbi5YLk9mZnNldCwgMSwgMCkKICAgICAgICBsb2NhbCBTbGlkZXJQb3MgPSBTbGlkZXIuUG9zaXRpb24uWC5PZmZzZXQgLyAxMDAKICAgICAgICBsb2NhbCBBXzEgPSBtYXRoLmZsb29yKCgoU2xpZGVyUG9zICogTWF4VmFsdWUpIC8gTWF4VmFsdWUpICogKE1heFZhbHVlIC0gTWluVmFsdWUpICsgTWluVmFsdWUpCiAgICAgICAgVXBkQ291bnRlcihBXzEpCiAgICAgIGVuZAogICAgZW5kKQogICAgcmV0dXJuIHtTbGlkZXIsIEluY3JlYXNlLCBNYXhWYWx1ZSwgTWluVmFsdWV9CiAgZW5kCiAgCiAgZnVuY3Rpb24gVXBkYXRlU2xpZGVyKFNsaWRlciwgTmV3VmFsdWUpCiAgICBsb2NhbCBGcmFtZSA9IFNsaWRlclsxXQogICAgbG9jYWwgSW5jcmVhc2UgPSBTbGlkZXJbMl0KICAgIGxvY2FsIE1heCA9IFNsaWRlclszXSAqIEluY3JlYXNlCiAgICBsb2NhbCBNaW4gPSBTbGlkZXJbNF0gKiBJbmNyZWFzZQogICAgCiAgICBsb2NhbCBTbGlkZXJQb3MgPSAoTmV3VmFsdWUgLSBNaW4pIC8gKE1heCAtIE1pbikKICAgIGxvY2FsIFhfT2Zmc2V0ID0gU2xpZGVyUG9zICogMTAwCiAgICBsb2NhbCBTbGlkZXJQb3NpdGlvbiA9IFVEaW0yLm5ldygwLCBYX09mZnNldCArIDEsIDAsIDApCiAgICBDcmVhdGVUd2VlbihGcmFtZSwgIlBvc2l0aW9uIiwgU2xpZGVyUG9zaXRpb24sIDAuNSwgZmFsc2UpCiAgZW5kCiAgCiAgZnVuY3Rpb24gQWRkS2V5YmluZChwYXJlbnQsIENvbmZpZ3MpCiAgICBsb2NhbCBLZXliaW5kTmFtZSA9IENvbmZpZ3MuTmFtZSBvciAiU2xpZGVyISEiCiAgICBsb2NhbCBLZXlDb2RlID0gQ29uZmlncy5LZXlDb2RlIG9yICJFIgogICAgbG9jYWwgRGVmYXVsdCA9IENvbmZpZ3MuRGVmYXVsdCBvciBmYWxzZQogICAgbG9jYWwgQ2FsbGJhY2sgPSBDb25maWdzLkNhbGxiYWNrIG9yIGZ1bmN0aW9uKCkgZW5kCiAgICAKICAgIGxvY2FsIEZyYW1lID0gQ3JlYXRlKCJGcmFtZSIsIHBhcmVudCwgewogICAgICBTaXplID0gVURpbTIubmV3KDEsIDAsIDAsIDI1KSwKICAgICAgQmFja2dyb3VuZENvbG9yMyA9IENvbmZpZ3NfSFVCLkNvcl9PcHRpb25zLAogICAgICBOYW1lID0gIkZyYW1lIgogICAgfSlDb3JuZXIoRnJhbWUpU3Ryb2tlKEZyYW1lKQogICAgCiAgICBsb2NhbCBUZXh0TGFiZWwgPSBDcmVhdGUoIlRleHRCdXR0b24iLCBGcmFtZSwgewogICAgICBUZXh0U2l6ZSA9IDEyLAogICAgICBUZXh0Q29sb3IzID0gQ29uZmlnc19IVUIuQ29yX1RleHQsCiAgICAgIFRleHQgPSBLZXliaW5kTmFtZSwKICAgICAgU2l6ZSA9IFVEaW0yLm5ldygxLCAwLCAxLCAwKSwKICAgICAgUG9zaXRpb24gPSBVRGltMi5uZXcoMCwgMzUsIDAsIDApLAogICAgICBCYWNrZ3JvdW5kVHJhbnNwYXJlbmN5ID0gMSwKICAgICAgVGV4dFhBbGlnbm1lbnQgPSAiTGVmdCIsCiAgICAgIEZvbnQgPSBDb25maWdzX0hVQi5UZXh0X0ZvbnQKICAgIH0pCiAgICAKICAgIGxvY2FsIEtleWJpbmQgPSBDcmVhdGUoIlRleHRMYWJlbCIsIEZyYW1lLCB7CiAgICAgIEZvbnQgPSBDb25maWdzX0hVQi5UZXh0X0ZvbnQsCiAgICAgIFNpemUgPSBVRGltMi5uZXcoMCwgMTgsIDAsIDE4KSwKICAgICAgVGV4dCA9IEtleUNvZGUsCiAgICAgIFBvc2l0aW9uID0gVURpbTIubmV3KDAsIDUsIDAsIDMuNSksCiAgICAgIFRleHRTY2FsZWQgPSB0cnVlLAogICAgICBUZXh0Q29sb3IzID0gQ29uZmlnc19IVUIuQ29yX1RleHQsCiAgICAgIEJhY2tncm91bmRUcmFuc3BhcmVuY3kgPSAxCiAgICB9KUNvcm5lcihLZXliaW5kKVN0cm9rZShLZXliaW5kKQogICAgCiAgICBsb2NhbCBPbk9mZiA9IERlZmF1bHQKICAgIFVzZXJJbnB1dFNlcnZpY2UuSW5wdXRCZWdhbjpDb25uZWN0KGZ1bmN0aW9uKGlucHV0KQogICAgICBpZiBpbnB1dC5LZXlDb2RlID09IEVudW0uS2V5Q29kZVtLZXlDb2RlXSB0aGVuCiAgICAgICAgT25PZmYgPSBub3QgT25PZmYKICAgICAgICBDYWxsYmFjayhPbk9mZikKICAgICAgZW5kCiAgICBlbmQpCiAgICBUZXh0U2V0Q29sb3IoVGV4dExhYmVsKQogIGVuZAogIAogIGZ1bmN0aW9uIEFkZFRleHRCb3gocGFyZW50LCBDb25maWdzKQogICAgbG9jYWwgVGV4dEJveE5hbWUgPSBDb25maWdzLk5hbWUgb3IgIlRleHRCb3ghISIKICAgIGxvY2FsIERlZmF1bHQgPSBDb25maWdzLkRlZmF1bHQgb3IgIlRleHRCb3giCiAgICBsb2NhbCBwbGFjZWhvbGRlclRleHQgPSBDb25maWdzLlBsYWNlaG9sZGVyVGV4dCBvciAiVGV4dEJveCIKICAgIGxvY2FsIENsZWFyVGV4dCA9IENvbmZpZ3MuQ2xlYXJUZXh0IG9yIGZhbHNlCiAgICBsb2NhbCBDYWxsYmFjayA9IENvbmZpZ3MuQ2FsbGJhY2sgb3IgZnVuY3Rpb24oKSBlbmQKICAgIAogICAgbG9jYWwgRnJhbWUgPSBDcmVhdGUoIkZyYW1lIiwgcGFyZW50LCB7CiAgICAgIFNpemUgPSBVRGltMi5uZXcoMSwgMCwgMCwgMjUpLAogICAgICBCYWNrZ3JvdW5kQ29sb3IzID0gQ29uZmlnc19IVUIuQ29yX09wdGlvbnMsCiAgICAgIE5hbWUgPSAiRnJhbWUiCiAgICB9KUNvcm5lcihGcmFtZSlTdHJva2UoRnJhbWUpCiAgICAKICAgIGxvY2FsIFRleHRMYWJlbCA9IENyZWF0ZSgiVGV4dEJ1dHRvbiIsIEZyYW1lLCB7CiAgICAgIFRleHRTaXplID0gMTIsCiAgICAgIFRleHRDb2xvcjMgPSBDb25maWdzX0hVQi5Db3JfVGV4dCwKICAgICAgVGV4dCA9IFRleHRCb3hOYW1lLAogICAgICBTaXplID0gVURpbTIubmV3KDEsIDAsIDEsIDApLAogICAgICBQb3NpdGlvbiA9IFVEaW0yLm5ldygwLCAxNTAsIDAsIDApLAogICAgICBCYWNrZ3JvdW5kVHJhbnNwYXJlbmN5ID0gMSwKICAgICAgVGV4dFhBbGlnbm1lbnQgPSAiTGVmdCIsCiAgICAgIEZvbnQgPSBDb25maWdzX0hVQi5UZXh0X0ZvbnQKICAgIH0pCiAgICBUZXh0U2V0Q29sb3IoVGV4dExhYmVsKQogICAgCiAgICBsb2NhbCBUZXh0Qm94ID0gQ3JlYXRlKCJUZXh0Qm94IiwgRnJhbWUsIHsKICAgICAgU2l6ZSA9IFVEaW0yLm5ldygwLCAxMjAsIDAsIDIwKSwKICAgICAgUG9zaXRpb24gPSBVRGltMi5uZXcoMCwgMTUsIDAsIDIuNSksCiAgICAgIFRleHRDb2xvcjMgPSBDb25maWdzX0hVQi5Db3JfVGV4dCwKICAgICAgVGV4dCA9IERlZmF1bHQsCiAgICAgIENsZWFyVGV4dE9uRm9jdXMgPSBDbGVhclRleHQsCiAgICAgIFBsYWNlaG9sZGVyVGV4dCA9IHBsYWNlaG9sZGVyVGV4dCwKICAgICAgVGV4dFNjYWxlZCA9IHRydWUsCiAgICAgIEZvbnQgPSBDb25maWdzX0hVQi5UZXh0X0ZvbnQsCiAgICAgIEJhY2tncm91bmRUcmFuc3BhcmVuY3kgPSAxCiAgICB9KQogICAgCiAgICBsb2NhbCBMaW5lID0gQ3JlYXRlKCJGcmFtZSIsIFRleHRCb3gsIHsKICAgICAgU2l6ZSA9IFVEaW0yLm5ldygxLCAwLCAwLCAxKSwKICAgICAgUG9zaXRpb24gPSBVRGltMi5uZXcoMC41LCAwLCAxLCAwKSwKICAgICAgQW5jaG9yUG9pbnQgPSBWZWN0b3IyLm5ldygwLjUsIDAuNSksCiAgICAgIEJhY2tncm91bmRDb2xvcjMgPSBDb25maWdzX0hVQi5Db3JfU3Ryb2tlLAogICAgICBCb3JkZXJTaXplUGl4ZWwgPSAwCiAgICB9KQogICAgCiAgICBUZXh0Qm94Lk1vdXNlRW50ZXI6Q29ubmVjdChmdW5jdGlvbigpCiAgICAgIENyZWF0ZVR3ZWVuKExpbmUsICJTaXplIiwgVURpbTIubmV3KDAsIDAsIDAsIDEpLCAwLjMsIHRydWUpCiAgICAgIENyZWF0ZVR3ZWVuKExpbmUsICJTaXplIiwgVURpbTIubmV3KDEsIDAsIDAsIDEpLCAwLjMsIHRydWUpCiAgICBlbmQpCiAgICAKICAgIFRleHRCb3guRm9jdXNMb3N0OkNvbm5lY3QoZnVuY3Rpb24oKQogICAgICBDYWxsYmFjayhUZXh0Qm94LlRleHQpCiAgICBlbmQpCiAgZW5kCiAgCiAgZnVuY3Rpb24gQWRkQ29sb3JQaWNrZXIocGFyZW50LCBDb25maWdzKQogICAgbG9jYWwgbmFtZSA9IENvbmZpZ3MuTmFtZSBvciAiQ29sb3IgUGlja2VyIgogICAgbG9jYWwgRGVmYXVsdCA9IENvbmZpZ3MuRGVmYXVsdCBvciBDb2xvcjMuZnJvbVJHQigwLCAwLCAyMDApCiAgICBsb2NhbCBDYWxsYmFjayA9IENvbmZpZ3MuQ2FsbGJhY2sgb3IgZnVuY3Rpb24oKSBlbmQKICAgIGxvY2FsIENvbG9ySCwgQ29sb3JTLCBDb2xvclYgPSAxLCAxLCAxCiAgICBDYWxsYmFjayhEZWZhdWx0KQogICAgCiAgICBsb2NhbCBUZXh0QnV0dG9uID0gQ3JlYXRlKCJGcmFtZSIsIHBhcmVudCwgewogICAgICBTaXplID0gVURpbTIubmV3KDEsIDAsIDAsIDI1KSwKICAgICAgQmFja2dyb3VuZENvbG9yMyA9IENvbmZpZ3NfSFVCLkNvcl9PcHRpb25zLAogICAgfSlTdHJva2UoVGV4dEJ1dHRvbilDb3JuZXIoVGV4dEJ1dHRvbikKICAgIAogICAgbG9jYWwgY2xpY2sgPSBDcmVhdGUoIlRleHRCdXR0b24iLCBUZXh0QnV0dG9uLCB7CiAgICAgIFNpemUgPSBVRGltMi5uZXcoMSwgMCwgMCwgMjUpLAogICAgICBCYWNrZ3JvdW5kVHJhbnNwYXJlbmN5ID0gMSwKICAgICAgQXV0b0J1dHRvbkNvbG9yID0gZmFsc2UsCiAgICAgIFRleHQgPSAiIgogICAgfSkKICAgIAogICAgbG9jYWwgVGV4dExhYmVsID0gQ3JlYXRlKCJUZXh0TGFiZWwiLCBUZXh0QnV0dG9uLCB7CiAgICAgIFNpemUgPSBVRGltMi5uZXcoMSwgLTEwLCAwLCAyNSksCiAgICAgIFBvc2l0aW9uID0gVURpbTIubmV3KDAsIDM1LCAwLCAwKSwKICAgICAgVGV4dFNpemUgPSAxMiwKICAgICAgVGV4dENvbG9yMyA9IENvbmZpZ3NfSFVCLkNvcl9UZXh0LAogICAgICBUZXh0WEFsaWdubWVudCA9ICJMZWZ0IiwKICAgICAgVGV4dCA9IG5hbWUsCiAgICAgIEZvbnQgPSBDb25maWdzX0hVQi5UZXh0X0ZvbnQsCiAgICAgIEJhY2tncm91bmRUcmFuc3BhcmVuY3kgPSAxCiAgICB9KQogICAgCiAgICBsb2NhbCBwaWNrZXIgPSBDcmVhdGUoIkZyYW1lIiwgVGV4dEJ1dHRvbiwgewogICAgICBTaXplID0gVURpbTIubmV3KDAsIDIwLCAwLCAyMCksCiAgICAgIFBvc2l0aW9uID0gVURpbTIubmV3KDAsIDUsIDAsIDIuNSksCiAgICAgIEJhY2tncm91bmRDb2xvcjMgPSBEZWZhdWx0CiAgICB9KUNvcm5lcihwaWNrZXIpU3Ryb2tlKHBpY2tlcikKICAgIAogICAgbG9jYWwgVUlfR3JhZGUgPSBDcmVhdGUoIkltYWdlQnV0dG9uIiwgVGV4dEJ1dHRvbiwgewogICAgICBTaXplID0gVURpbTIubmV3KDEsIC0xMDAsIDEsIHRvbnVtYmVyKC1UZXh0QnV0dG9uLlNpemUuWS5PZmZzZXQgLSAyMCkpLAogICAgICBQb3NpdGlvbiA9IFVEaW0yLm5ldygwLCAxMCwgMCwgdG9udW1iZXIoVGV4dEJ1dHRvbi5TaXplLlkuT2Zmc2V0ICsgMTIuNSkpLAogICAgICBWaXNpYmxlID0gZmFsc2UsCiAgICAgIEltYWdlID0gInJieGFzc2V0aWQ6Ly80MTU1ODAxMjUyIgogICAgfSlDb3JuZXIoVUlfR3JhZGUpU3Ryb2tlKFVJX0dyYWRlKWxvY2FsIFNhdmVQb3MgPSBDcmVhdGUoIkZyYW1lIiwgVUlfR3JhZGUsIHtWaXNpYmxlID0gZmFsc2V9KQogICAgCiAgICBsb2NhbCBncmFkZSA9IENyZWF0ZSgiVGV4dEJ1dHRvbiIsIFRleHRCdXR0b24sIHsKICAgICAgU2l6ZSA9IFVEaW0yLm5ldygwLCAzMCwgMSwgdG9udW1iZXIoLVRleHRCdXR0b24uU2l6ZS5ZLk9mZnNldCAtIDIwKSksCiAgICAgIFBvc2l0aW9uID0gVURpbTIubmV3KDEsIC0xMCwgMCwgdG9udW1iZXIoVGV4dEJ1dHRvbi5TaXplLlkuT2Zmc2V0ICsgMTIuNSkpLAogICAgICBBbmNob3JQb2ludCA9IFZlY3RvcjIubmV3KDEsIDApLAogICAgICBWaXNpYmxlID0gZmFsc2UsCiAgICAgIFRleHQgPSAiIgogICAgfSlDb3JuZXIoZ3JhZGUpU3Ryb2tlKGdyYWRlKUNyZWF0ZSgiVUlHcmFkaWVudCIsIGdyYWRlLCB7CiAgICAgIFJvdGF0aW9uID0gOTAsCiAgICAgIENvbG9yID0gQ29sb3JTZXF1ZW5jZS5uZXcoewogICAgICAgIENvbG9yU2VxdWVuY2VLZXlwb2ludC5uZXcoMC4wMCwgQ29sb3IzLmZyb21SR0IoMjU1LCAwLCA0KSksCiAgICAgICAgQ29sb3JTZXF1ZW5jZUtleXBvaW50Lm5ldygwLjIwLCBDb2xvcjMuZnJvbVJHQigyMzQsIDI1NSwgMCkpLAogICAgICAgIENvbG9yU2VxdWVuY2VLZXlwb2ludC5uZXcoMC40MCwgQ29sb3IzLmZyb21SR0IoMjEsIDI1NSwgMCkpLAogICAgICAgIENvbG9yU2VxdWVuY2VLZXlwb2ludC5uZXcoMC42MCwgQ29sb3IzLmZyb21SR0IoMjQwLCAyNDAsIDI0MCkpLAogICAgICAgIENvbG9yU2VxdWVuY2VLZXlwb2ludC5uZXcoMC44MCwgQ29sb3IzLmZyb21SR0IoMCwgMTcsIDI1NSkpLAogICAgICAgIENvbG9yU2VxdWVuY2VLZXlwb2ludC5uZXcoMC45MCwgQ29sb3IzLmZyb21SR0IoMjU1LCAwLCAyNTEpKSwKICAgICAgICBDb2xvclNlcXVlbmNlS2V5cG9pbnQubmV3KDEuMDAsIENvbG9yMy5mcm9tUkdCKDI1NSwgMCwgNCkpCiAgICAgIH0pCiAgICB9KWxvY2FsIFNhdmVQb3MyID0gQ3JlYXRlKCJGcmFtZSIsIGdyYWRlLCB7VmlzaWJsZSA9IGZhbHNlLCBTaXplID0gVURpbTIubmV3KDEsIDAsIDAsIDApfSkKICAgIAogICAgbG9jYWwgQV8xID0gQ3JlYXRlKCJGcmFtZSIsIFRleHRCdXR0b24sIHsKICAgICAgU2l6ZSA9IFVEaW0yLm5ldygxLCAwLCAwLCAwKSwKICAgICAgUG9zaXRpb24gPSBVRGltMi5uZXcoMCwgMCwgMCwgMzApLAogICAgICBWaXNpYmxlID0gZmFsc2UKICAgIH0pU3Ryb2tlKEFfMSkKICAgIAogICAgbG9jYWwgU2VsZWN0MSA9IENyZWF0ZSgiRnJhbWUiLCBncmFkZSwgewogICAgICBTaXplID0gVURpbTIubmV3KDEsIDAsIDAsIDEwKSwKICAgICAgUG9zaXRpb24gPSBVRGltMi5uZXcoMCwgMCwgMCwgc2VsZWN0KDMsIENvbG9yMy50b0hTVihEZWZhdWx0KSkpLAogICAgICBCYWNrZ3JvdW5kVHJhbnNwYXJlbmN5ID0gMSwKICAgICAgQWN0aXZlID0gdHJ1ZSwKICAgICAgRHJhZ2dhYmxlID0gdHJ1ZQogICAgfSlDb3JuZXIoU2VsZWN0MSwge0Nvcm5lclJhZGl1cyA9IFVEaW0ubmV3KDIsIDApfSlTdHJva2UoU2VsZWN0MSwge0NvbG9yID0gQ29sb3IzLmZyb21SR0IoMjU1LCAyNTUsIDI1NSl9KQogICAgCiAgICBsb2NhbCBTZWxlY3QyID0gQ3JlYXRlKCJGcmFtZSIsIFVJX0dyYWRlLCB7CiAgICAgIFNpemUgPSBVRGltMi5uZXcoMCwgMTUsIDAsIDE1KSwKICAgICAgUG9zaXRpb24gPSBVRGltMi5uZXcoMCwgc2VsZWN0KDIsIENvbG9yMy50b0hTVihEZWZhdWx0KSksIDAsIHNlbGVjdCgxLCBDb2xvcjMudG9IU1YoRGVmYXVsdCkpKSwKICAgICAgQmFja2dyb3VuZFRyYW5zcGFyZW5jeSA9IDEsCiAgICAgIEFjdGl2ZSA9IHRydWUsCiAgICAgIERyYWdnYWJsZSA9IHRydWUKICAgIH0pQ29ybmVyKFNlbGVjdDIsIHtDb3JuZXJSYWRpdXMgPSBVRGltLm5ldygyLCAwKX0pU3Ryb2tlKFNlbGVjdDIsIHtDb2xvciA9IENvbG9yMy5mcm9tUkdCKDI1NSwgMjU1LCAyNTUpfSkKICAKICAgIFVJX0dyYWRlLk1vdXNlQnV0dG9uMUNsaWNrOkNvbm5lY3QoZnVuY3Rpb24oKQogICAgICBsb2NhbCBtb3VzZSA9IFVzZXJJbnB1dFNlcnZpY2U6R2V0TW91c2VMb2NhdGlvbigpCiAgICAgIGxvY2FsIHNhdmVwb3MgPSBTYXZlUG9zLkFic29sdXRlUG9zaXRpb24KICAgICAgQ3JlYXRlVHdlZW4oU2VsZWN0MiwgIlBvc2l0aW9uIiwgVURpbTIubmV3KDAsIG1vdXNlLlggLSBzYXZlcG9zLlgsIDAsIHRvbnVtYmVyKG1vdXNlLlkgLSBzYXZlcG9zLlkpIC0gMzUpLCAwLjMsIGZhbHNlKQogICAgZW5kKQogICAgCiAgICBncmFkZS5Nb3VzZUJ1dHRvbjFDbGljazpDb25uZWN0KGZ1bmN0aW9uKCkKICAgICAgbG9jYWwgbW91c2UgPSBVc2VySW5wdXRTZXJ2aWNlOkdldE1vdXNlTG9jYXRpb24oKS5ZIC0gMzUKICAgICAgbG9jYWwgc2F2ZXBvcyA9IFNhdmVQb3MyLkFic29sdXRlUG9zaXRpb24uWQogICAgICBDcmVhdGVUd2VlbihTZWxlY3QxLCAiUG9zaXRpb24iLCBVRGltMi5uZXcoMCwgMCwgMCwgbW91c2UgLSBzYXZlcG9zKSwgMC4zLCBmYWxzZSkKICAgIGVuZCkKICAgIAogICAgbG9jYWwgZnVuY3Rpb24gY2FsbGJhY2soKUNhbGxiYWNrKENvbG9yMy5mcm9tSFNWKENvbG9ySCwgQ29sb3JTLCBDb2xvclYpKWVuZAogICAgbG9jYWwgZnVuY3Rpb24gdXBkY29sb3JwaWNrZXIoKQogICAgICBDb2xvckggPSB0b251bWJlcihTZWxlY3QxLlBvc2l0aW9uLlkuT2Zmc2V0KSAvIDgwCiAgICAgIENvbG9yUyA9IHRvbnVtYmVyKDIxNSAtIFNlbGVjdDIuUG9zaXRpb24uWC5PZmZzZXQpIC8gMjE1CiAgICAgIENvbG9yViA9IHRvbnVtYmVyKDc1IC0gU2VsZWN0Mi5Qb3NpdGlvbi5ZLk9mZnNldCkgLyA3NQogICAgICBVSV9HcmFkZS5JbWFnZUNvbG9yMyA9IENvbG9yMy5mcm9tSFNWKENvbG9ySCwgMSwgMSkKICAgICAgcGlja2VyLkJhY2tncm91bmRDb2xvcjMgPSBDb2xvcjMuZnJvbUhTVihDb2xvckgsIENvbG9yUywgQ29sb3JWKQogICAgICBjYWxsYmFjaygpCiAgICBlbmQKICAgIAogICAgdXBkY29sb3JwaWNrZXIoKQogICAgCiAgICBTZWxlY3QxLkNoYW5nZWQ6Q29ubmVjdChmdW5jdGlvbihwcm9wKQogICAgICBpZiBwcm9wID09ICJQb3NpdGlvbiIgdGhlbgogICAgICAgIFNlbGVjdDEuUG9zaXRpb24gPSBVRGltMi5uZXcoMCwgMCwgMCwgbWF0aC5jbGFtcChTZWxlY3QxLlBvc2l0aW9uLlkuT2Zmc2V0LCAwLCA4MCkpCiAgICAgICAgdXBkY29sb3JwaWNrZXIoKQogICAgICBlbmQKICAgIGVuZCkKICAgIAogICAgU2VsZWN0Mi5DaGFuZ2VkOkNvbm5lY3QoZnVuY3Rpb24ocHJvcCkKICAgICAgaWYgcHJvcCA9PSAiUG9zaXRpb24iIHRoZW4KICAgICAgICBTZWxlY3QyLlBvc2l0aW9uID0gVURpbTIubmV3KDAsIG1hdGguY2xhbXAoU2VsZWN0Mi5Qb3NpdGlvbi5YLk9mZnNldCwgMCwgMjIyKSwgMCwgbWF0aC5jbGFtcChTZWxlY3QyLlBvc2l0aW9uLlkuT2Zmc2V0LCAwLCA3NSkpCiAgICAgICAgdXBkY29sb3JwaWNrZXIoKQogICAgICBlbmQKICAgIGVuZCkKICAgIAogICAgVGV4dEJ1dHRvbi5DaGFuZ2VkOkNvbm5lY3QoZnVuY3Rpb24ocHJvcCkKICAgICAgaWYgcHJvcCA9PSAiU2l6ZSIgdGhlbgogICAgICAgIGlmIFRleHRCdXR0b24uU2l6ZS5ZLk9mZnNldCA+PSA2MCB0aGVuCiAgICAgICAgICBwaWNrZXIuUG9zaXRpb24gPSBVRGltMi5uZXcoMCwgNSwgMCwgNSkKICAgICAgICAgIFVJX0dyYWRlLlZpc2libGUgPSB0cnVlCiAgICAgICAgICBBXzEuVmlzaWJsZSA9IHRydWUKICAgICAgICAgIGdyYWRlLlZpc2libGUgPSB0cnVlCiAgICAgICAgZWxzZQogICAgICAgICAgcGlja2VyLlBvc2l0aW9uID0gVURpbTIubmV3KDAsIDUsIDAsIDIuNSkKICAgICAgICAgIFVJX0dyYWRlLlZpc2libGUgPSBmYWxzZQogICAgICAgICAgQV8xLlZpc2libGUgPSBmYWxzZQogICAgICAgICAgZ3JhZGUuVmlzaWJsZSA9IGZhbHNlCiAgICAgICAgZW5kCiAgICAgIGVuZAogICAgZW5kKQogICAgCiAgICBsb2NhbCBvbm9mZiA9IGZhbHNlCiAgICBjbGljay5Nb3VzZUJ1dHRvbjFDbGljazpDb25uZWN0KGZ1bmN0aW9uKCkKICAgICAgb25vZmYgPSBub3Qgb25vZmYKICAgICAgaWYgb25vZmYgPT0gdHJ1ZSB0aGVuCiAgICAgICAgbG9jYWwgdHdlZW4gPSBUd2VlblNlcnZpY2U6Q3JlYXRlKFRleHRCdXR0b24sIFR3ZWVuSW5mby5uZXcoMC4yLCBFbnVtLkVhc2luZ1N0eWxlLkxpbmVhciksCiAgICAgICAge1NpemUgPSBVRGltMi5uZXcoMSwgMCwgMCwgMTQwKX0pdHdlZW46cGxheSgpdHdlZW4uQ29tcGxldGVkOldhaXQoKQogICAgICBlbHNlCiAgICAgICAgbG9jYWwgdHdlZW4gPSBUd2VlblNlcnZpY2U6Q3JlYXRlKFRleHRCdXR0b24sIFR3ZWVuSW5mby5uZXcoMC4yLCBFbnVtLkVhc2luZ1N0eWxlLkxpbmVhciksCiAgICAgICAge1NpemUgPSBVRGltMi5uZXcoMSwgMCwgMCwgMjUpfSl0d2VlbjpwbGF5KCl0d2Vlbi5Db21wbGV0ZWQ6V2FpdCgpCiAgICAgIGVuZAogICAgZW5kKQogIGVuZAogIAogIGZ1bmN0aW9uIEFkZERyb3Bkb3duKHBhcmVudCwgQ29uZmlncykKICAgIGxvY2FsIERyb3Bkb3duTmFtZSA9IENvbmZpZ3MuTmFtZSBvciAiRHJvcGRvd24hISIKICAgIGxvY2FsIERlZmF1bHQgPSBDb25maWdzLkRlZmF1bHQgb3IgIlRleHRCb3giCiAgICBsb2NhbCBPcHRpb25zID0gQ29uZmlncy5PcHRpb25zIG9yIHsiMSIsICIyIiwgIjMifQogICAgbG9jYWwgRGVmYXVsdCA9IENvbmZpZ3MuRGVmYXVsdCBvciAiMiIKICAgIGxvY2FsIENhbGxiYWNrID0gQ29uZmlncy5DYWxsYmFjayBvciBmdW5jdGlvbigpIGVuZAogICAgCiAgICBsb2NhbCBUZXh0QnV0dG9uID0gQ3JlYXRlKCJUZXh0QnV0dG9uIiwgcGFyZW50LCB7CiAgICAgIFNpemUgPSBVRGltMi5uZXcoMSwgMCwgMCwgMjUpLAogICAgICBCYWNrZ3JvdW5kQ29sb3IzID0gQ29uZmlnc19IVUIuQ29yX09wdGlvbnMsCiAgICAgIE5hbWUgPSAiRnJhbWUiLAogICAgICBUZXh0ID0gIiIsCiAgICAgIEF1dG9CdXR0b25Db2xvciA9IGZhbHNlCiAgICB9KUNvcm5lcihGcmFtZSlTdHJva2UoRnJhbWUpCiAgICAKICAgIGxvY2FsIFRleHRMYWJlbCA9IENyZWF0ZSgiVGV4dExhYmVsIiwgVGV4dEJ1dHRvbiwgewogICAgICBUZXh0U2l6ZSA9IDEyLAogICAgICBUZXh0Q29sb3IzID0gQ29uZmlnc19IVUIuQ29yX1RleHQsCiAgICAgIFRleHQgPSBEcm9wZG93bk5hbWUsCiAgICAgIFNpemUgPSBVRGltMi5uZXcoMSwgMCwgMCwgMjUpLAogICAgICBQb3NpdGlvbiA9IFVEaW0yLm5ldygwLCAzNSwgMCwgMCksCiAgICAgIEJhY2tncm91bmRUcmFuc3BhcmVuY3kgPSAxLAogICAgICBUZXh0WEFsaWdubWVudCA9ICJMZWZ0IiwKICAgICAgRm9udCA9IENvbmZpZ3NfSFVCLlRleHRfRm9udAogICAgfSlUZXh0U2V0Q29sb3IoVGV4dExhYmVsKQogICAgCiAgICBsb2NhbCBMaW5lID0gQ3JlYXRlKCJGcmFtZSIsIFRleHRCdXR0b24sIHsKICAgICAgU2l6ZSA9IFVEaW0yLm5ldygxLCAwLCAwLCAxKSwKICAgICAgUG9zaXRpb24gPSBVRGltMi5uZXcoMCwgMCwgMCwgMjUpLAogICAgICBCb3JkZXJTaXplUGl4ZWwgPSAwLAogICAgICBCYWNrZ3JvdW5kQ29sb3IzID0gQ29uZmlnc19IVUIuQ29yX1N0cm9rZSwKICAgICAgVmlzaWJsZSA9IGZhbHNlCiAgICB9KQogICAgCiAgICBsb2NhbCBBcnJvdyA9IENyZWF0ZSgiSW1hZ2VMYWJlbCIsIFRleHRCdXR0b24sIHsKICAgICAgSW1hZ2UgPSAicmJ4YXNzZXRpZDovLzYwMzEwOTA5OTAiLAogICAgICBTaXplID0gVURpbTIubmV3KDAsIDI1LCAwLCAyNSksCiAgICAgIFBvc2l0aW9uID0gVURpbTIubmV3KDAsIDUsIDAsIDApLAogICAgICBCYWNrZ3JvdW5kVHJhbnNwYXJlbmN5ID0gMQogICAgfSkKICAgIAogICAgbG9jYWwgRGVmYXVsdFRleHQgPSBDcmVhdGUoIlRleHRMYWJlbCIsIFRleHRCdXR0b24sIHsKICAgICAgQmFja2dyb3VuZENvbG9yMyA9IENvbmZpZ3NfSFVCLkNvcl9IdWIsCiAgICAgIEJhY2tncm91bmRUcmFuc3BhcmVuY3kgPSAwLjEsCiAgICAgIFBvc2l0aW9uID0gVURpbTIubmV3KDEsIC0yMCwgMCwgMi41KSwKICAgICAgQW5jaG9yUG9pbnQgPSBWZWN0b3IyLm5ldygxLCAwKSwKICAgICAgU2l6ZSA9IFVEaW0yLm5ldygwLCAxMDAsIDAsIDIwKSwKICAgICAgVGV4dENvbG9yMyA9IENvbmZpZ3NfSFVCLkNvcl9EYXJrVGV4dCwKICAgICAgVGV4dFNjYWxlZCA9IHRydWUsCiAgICAgIEZvbnQgPSBDb25maWdzX0hVQi5UZXh0X0ZvbnQsCiAgICAgIFRleHQgPSAiLi4uIgogICAgfSlDb3JuZXIoRGVmYXVsdFRleHQpU3Ryb2tlKERlZmF1bHRUZXh0KQogICAgCiAgICBsb2NhbCBTY3JvbGxCYXIgPSBDcmVhdGUoIlNjcm9sbGluZ0ZyYW1lIiwgVGV4dEJ1dHRvbiwgewogICAgICBTaXplID0gVURpbTIubmV3KDEsIDAsIDEsIC0yNSksCiAgICAgIFBvc2l0aW9uID0gVURpbTIubmV3KDAsIDAsIDAsIDI1KSwKICAgICAgQ2FudmFzU2l6ZSA9IFVEaW0yLm5ldygpLAogICAgICBTY3JvbGxpbmdEaXJlY3Rpb24gPSAiWSIsCiAgICAgIEF1dG9tYXRpY0NhbnZhc1NpemUgPSAiWSIsCiAgICAgIEJhY2tncm91bmRUcmFuc3BhcmVuY3kgPSAxLAogICAgICBTY3JvbGxCYXJUaGlja25lc3MgPSAyCiAgICB9KUNyZWF0ZSgiVUlQYWRkaW5nIiwgU2Nyb2xsQmFyLCB7CiAgICAgIFBhZGRpbmdMZWZ0ID0gVURpbS5uZXcoMCwgMTApLAogICAgICBQYWRkaW5nUmlnaHQgPSBVRGltLm5ldygwLCAxMCksCiAgICAgIFBhZGRpbmdUb3AgPSBVRGltLm5ldygwLCAxMCksCiAgICAgIFBhZGRpbmdCb3R0b20gPSBVRGltLm5ldygwLCAxMCkKICAgIH0pQ3JlYXRlKCJVSUxpc3RMYXlvdXQiLCBTY3JvbGxCYXIsIHsKICAgICAgUGFkZGluZyA9IFVEaW0ubmV3KDAsIDUpCiAgICB9KQogICAgCiAgICBsb2NhbCBmdW5jdGlvbiBBZGRPcHRpb24oT3B0aW9uTmFtZSkKICAgICAgbG9jYWwgVGV4dEJ1dHRvbiA9IENyZWF0ZSgiVGV4dEJ1dHRvbiIsIFNjcm9sbEJhciwgewogICAgICAgIFNpemUgPSBVRGltMi5uZXcoMSwgMCwgMCwgMTUpLAogICAgICAgIFRleHQgPSBPcHRpb25OYW1lLAogICAgICAgIEZvbnQgPSBDb25maWdzX0hVQi5UZXh0X0ZvbnQsCiAgICAgICAgVGV4dFNpemUgPSAxMiwKICAgICAgICBUZXh0Q29sb3IzID0gQ29sb3IzLmZyb21SR0IoMTgwLCAxODAsIDE4MCksCiAgICAgICAgQmFja2dyb3VuZFRyYW5zcGFyZW5jeSA9IDEKICAgICAgfSlDb3JuZXIoVGV4dEJ1dHRvbikKICAgICAgCiAgICAgIGxvY2FsIFNlbGVjdFRhYmxlID0ge30KICAgICAgbG9jYWwgT25PZmYgPSBmYWxzZQogICAgICBpZiBPcHRpb25OYW1lID09IERlZmF1bHQgdGhlbgogICAgICAgIE9uT2ZmID0gdHJ1ZQogICAgICAgIFRleHRCdXR0b24uQmFja2dyb3VuZFRyYW5zcGFyZW5jeSA9IDAuOAogICAgICAgIFRleHRCdXR0b24uVGV4dENvbG9yMyA9IENvbmZpZ3NfSFVCLkNvcl9UZXh0CiAgICAgICAgRGVmYXVsdFRleHQuVGV4dCA9IE9wdGlvbk5hbWUKICAgICAgICBDYWxsYmFjayhPcHRpb25OYW1lKQogICAgICBlbmQKICAgICAgCiAgICAgIFRleHRCdXR0b24uTW91c2VCdXR0b24xQ2xpY2s6Q29ubmVjdChmdW5jdGlvbigpCiAgICAgICAgZm9yIF8sdiBpbiBwYWlycyhTY3JvbGxCYXI6R2V0Q2hpbGRyZW4oKSkgZG8KICAgICAgICAgIGlmIHY6SXNBKCJUZXh0QnV0dG9uIikgdGhlbgogICAgICAgICAgICB2LkJhY2tncm91bmRUcmFuc3BhcmVuY3kgPSAxCiAgICAgICAgICAgIHYuVGV4dENvbG9yMyA9IENvbG9yMy5mcm9tUkdCKDE4MCwgMTgwLCAxODApCiAgICAgICAgICBlbmQKICAgICAgICBlbmQKICAgICAgICBEZWZhdWx0VGV4dC5UZXh0ID0gT3B0aW9uTmFtZQogICAgICAgIENhbGxiYWNrKE9wdGlvbk5hbWUpCiAgICAgICAgVGV4dEJ1dHRvbi5CYWNrZ3JvdW5kVHJhbnNwYXJlbmN5ID0gMC44CiAgICAgICAgVGV4dEJ1dHRvbi5UZXh0Q29sb3IzID0gQ29uZmlnc19IVUIuQ29yX1RleHQKICAgICAgZW5kKQogICAgZW5kCiAgICAKICAgIGZvciBfLHYgaW4gcGFpcnMoT3B0aW9ucykgZG8KICAgICAgQWRkT3B0aW9uKHYpCiAgICBlbmQKICAgIAogICAgbG9jYWwgRHJvcE9uT2ZmID0gZmFsc2UKICAgIFRleHRCdXR0b24uTW91c2VCdXR0b24xQ2xpY2s6Q29ubmVjdChmdW5jdGlvbigpCiAgICAgIGxvY2FsIE9wdGlvblNpemUsIE9wdGlvbnNOdW1iZXIgPSAyNSwgMAogICAgICBmb3IgXyx2IGluIHBhaXJzKFNjcm9sbEJhcjpHZXRDaGlsZHJlbigpKSBkbwogICAgICAgIGlmIHY6SXNBKCJUZXh0QnV0dG9uIikgYW5kIE9wdGlvbnNOdW1iZXIgPCA1IHRoZW4KICAgICAgICAgIE9wdGlvbnNOdW1iZXIgPSBPcHRpb25zTnVtYmVyICsgMQogICAgICAgICAgT3B0aW9uU2l6ZSA9IE9wdGlvblNpemUgKyB0b251bWJlcih2LlNpemUuWS5PZmZzZXQgKyAxMCkKICAgICAgICBlbmQKICAgICAgZW5kCiAgICAgIGlmIG5vdCBEcm9wT25PZmYgdGhlbgogICAgICAgIENyZWF0ZVR3ZWVuKFRleHRCdXR0b24sICJTaXplIiwgVURpbTIubmV3KDEsIDAsIDAsIE9wdGlvblNpemUpLCAwLjMsIGZhbHNlKQogICAgICAgIENyZWF0ZVR3ZWVuKEFycm93LCAiUm90YXRpb24iLCAxODAsIDAuMywgZmFsc2UpCiAgICAgICAgRHJvcE9uT2ZmID0gdHJ1ZQogICAgICAgIExpbmUuVmlzaWJsZSA9IHRydWUKICAgICAgZWxzZQogICAgICAgIENyZWF0ZVR3ZWVuKFRleHRCdXR0b24sICJTaXplIiwgVURpbTIubmV3KDEsIDAsIDAsIDI1KSwgMC4zLCBmYWxzZSkKICAgICAgICBDcmVhdGVUd2VlbihBcnJvdywgIlJvdGF0aW9uIiwgMCwgMC4zLCB0cnVlKQogICAgICAgIERyb3BPbk9mZiA9IGZhbHNlCiAgICAgICAgTGluZS5WaXNpYmxlID0gZmFsc2UKICAgICAgZW5kCiAgICBlbmQpCiAgICByZXR1cm4ge1Njcm9sbEJhciwgRGVmYXVsdCwgQ2FsbGJhY2ssIERlZmF1bHRUZXh0fQogIGVuZAogIAogIGZ1bmN0aW9uIFVwZGF0ZURyb3Bkb3duKERyb3Bkb3duLCBOZXdPcHRpb25zKQogICAgbG9jYWwgU2Nyb2xsQmFyID0gRHJvcGRvd25bMV0KICAgIGxvY2FsIERlZmF1bHQgPSBEcm9wZG93blsyXQogICAgbG9jYWwgQ2FsbGJhY2sgPSBEcm9wZG93blszXQogICAgbG9jYWwgRGVmYXVsdFRleHQgPSBEcm9wZG93bls0XQogICAgCiAgICBmb3IgXyx2IGluIHBhaXJzKFNjcm9sbEJhcjpHZXRDaGlsZHJlbigpKSBkbwogICAgICBpZiB2OklzQSgiVGV4dEJ1dHRvbiIpIHRoZW4KICAgICAgICB2OkRlc3Ryb3koKQogICAgICBlbmQKICAgIGVuZAogICAgCiAgICBsb2NhbCBmdW5jdGlvbiBBZGRPcHRpb24oT3B0aW9uTmFtZSkKICAgICAgbG9jYWwgVGV4dEJ1dHRvbiA9IENyZWF0ZSgiVGV4dEJ1dHRvbiIsIFNjcm9sbEJhciwgewogICAgICAgIFNpemUgPSBVRGltMi5uZXcoMSwgMCwgMCwgMTUpLAogICAgICAgIFRleHQgPSBPcHRpb25OYW1lLAogICAgICAgIEZvbnQgPSBDb25maWdzX0hVQi5UZXh0X0ZvbnQsCiAgICAgICAgVGV4dFNpemUgPSAxMiwKICAgICAgICBUZXh0Q29sb3IzID0gQ29sb3IzLmZyb21SR0IoMTgwLCAxODAsIDE4MCksCiAgICAgICAgQmFja2dyb3VuZFRyYW5zcGFyZW5jeSA9IDEKICAgICAgfSlDb3JuZXIoVGV4dEJ1dHRvbikKICAgICAgCiAgICAgIGxvY2FsIFNlbGVjdFRhYmxlID0ge30KICAgICAgbG9jYWwgT25PZmYgPSBmYWxzZQogICAgICBpZiBPcHRpb25OYW1lID09IERlZmF1bHQgdGhlbgogICAgICAgIE9uT2ZmID0gdHJ1ZQogICAgICAgIFRleHRCdXR0b24uQmFja2dyb3VuZFRyYW5zcGFyZW5jeSA9IDAuOAogICAgICAgIFRleHRCdXR0b24uVGV4dENvbG9yMyA9IENvbmZpZ3NfSFVCLkNvcl9UZXh0CiAgICAgICAgRGVmYXVsdFRleHQuVGV4dCA9IE9wdGlvbk5hbWUKICAgICAgICBDYWxsYmFjayhPcHRpb25OYW1lKQogICAgICBlbHNlCiAgICAgICAgRGVmYXVsdFRleHQuVGV4dCA9ICIuLi4iCiAgICAgIGVuZAogICAgICAKICAgICAgVGV4dEJ1dHRvbi5Nb3VzZUJ1dHRvbjFDbGljazpDb25uZWN0KGZ1bmN0aW9uKCkKICAgICAgICBmb3IgXyx2IGluIHBhaXJzKFNjcm9sbEJhcjpHZXRDaGlsZHJlbigpKSBkbwogICAgICAgICAgaWYgdjpJc0EoIlRleHRCdXR0b24iKSB0aGVuCiAgICAgICAgICAgIHYuQmFja2dyb3VuZFRyYW5zcGFyZW5jeSA9IDEKICAgICAgICAgICAgdi5UZXh0Q29sb3IzID0gQ29sb3IzLmZyb21SR0IoMTgwLCAxODAsIDE4MCkKICAgICAgICAgIGVuZAogICAgICAgIGVuZAogICAgICAgIERlZmF1bHRUZXh0LlRleHQgPSBPcHRpb25OYW1lCiAgICAgICAgQ2FsbGJhY2soT3B0aW9uTmFtZSkKICAgICAgICBUZXh0QnV0dG9uLkJhY2tncm91bmRUcmFuc3BhcmVuY3kgPSAwLjgKICAgICAgICBUZXh0QnV0dG9uLlRleHRDb2xvcjMgPSBDb25maWdzX0hVQi5Db3JfVGV4dAogICAgICBlbmQpCiAgICBlbmQKICAgIAogICAgZm9yIF8sdiBpbiBwYWlycyhOZXdPcHRpb25zKSBkbwogICAgICBBZGRPcHRpb24odikKICAgIGVuZAogIGVuZAogIAogIGZ1bmN0aW9uIEFkZFRleHRMYWJlbChwYXJlbnQsIENvbmZpZ3MpCiAgICBsb2NhbCBMYWJlbE5hbWUgPSBDb25maWdzWzFdIG9yIENvbmZpZ3MuTmFtZSBvciAiVGV4dCBMYWJlbCEhIgogICAgCiAgICBsb2NhbCBGcmFtZSA9IENyZWF0ZSgiRnJhbWUiLCBwYXJlbnQsIHsKICAgICAgU2l6ZSA9IFVEaW0yLm5ldygxLCAwLCAwLCAyNSksCiAgICAgIEJhY2tncm91bmRDb2xvcjMgPSBDb25maWdzX0hVQi5Db3JfT3B0aW9ucywKICAgICAgTmFtZSA9ICJGcmFtZSIKICAgIH0pQ29ybmVyKEZyYW1lKVN0cm9rZShGcmFtZSkKICAgIAogICAgbG9jYWwgVGV4dEJ1dHRvbiA9IENyZWF0ZSgiVGV4dEJ1dHRvbiIsIEZyYW1lLCB7CiAgICAgIFRleHRTaXplID0gMTIsCiAgICAgIFRleHRDb2xvcjMgPSBDb25maWdzX0hVQi5Db3JfVGV4dCwKICAgICAgVGV4dCA9IExhYmVsTmFtZSwKICAgICAgU2l6ZSA9IFVEaW0yLm5ldygxLCAwLCAwLCAyNSksCiAgICAgIFBvc2l0aW9uID0gVURpbTIubmV3KDAsIDIwLCAwLCAwKSwKICAgICAgQmFja2dyb3VuZFRyYW5zcGFyZW5jeSA9IDEsCiAgICAgIFRleHRYQWxpZ25tZW50ID0gIkxlZnQiLAogICAgICBGb250ID0gQ29uZmlnc19IVUIuVGV4dF9Gb250CiAgICB9KQogICAgVGV4dFNldENvbG9yKFRleHRCdXR0b24pCiAgICByZXR1cm4gVGV4dEJ1dHRvbgogIGVuZAogIAogIGZ1bmN0aW9uIFNldExhYmVsKGxhYmVsLCBOZXdWYWx1ZSkKICAgIGxhYmVsLlRleHQgPSBOZXdWYWx1ZQogIGVuZAogIAogIGZ1bmN0aW9uIEFkZEltYWdlTGFiZWwocGFyZW50LCBDb25maWdzKQogICAgbG9jYWwgTGFiZWxOYW1lID0gQ29uZmlnc1sxXSBvciBDb25maWdzLk5hbWUgb3IgIiIKICAgIGxvY2FsIExhYmVsSW1hZ2UgPSBDb25maWdzWzJdIG9yIENvbmZpZ3MuSW1hZ2Ugb3IgIkltYWdlIExhYmVsIgogICAgCiAgICBsb2NhbCBGcmFtZSA9IENyZWF0ZSgiRnJhbWUiLCBwYXJlbnQsIHsKICAgICAgU2l6ZSA9IFVEaW0yLm5ldygwLCA5NSwgMCwgMTEwKSwKICAgICAgQmFja2dyb3VuZENvbG9yMyA9IENvbmZpZ3NfSFVCLkNvcl9PcHRpb25zLAogICAgICBOYW1lID0gIkZyYW1lIgogICAgfSlDb3JuZXIoRnJhbWUpU3Ryb2tlKEZyYW1lKQogICAgCiAgICBsb2NhbCBUZXh0QnV0dG9uID0gQ3JlYXRlKCJUZXh0QnV0dG9uIiwgRnJhbWUsIHsKICAgICAgVGV4dFNpemUgPSAxMiwKICAgICAgVGV4dENvbG9yMyA9IENvbmZpZ3NfSFVCLkNvcl9UZXh0LAogICAgICBUZXh0ID0gTGFiZWxOYW1lLAogICAgICBTaXplID0gVURpbTIubmV3KDEsIDAsIDAsIDI1KSwKICAgICAgQmFja2dyb3VuZFRyYW5zcGFyZW5jeSA9IDEsCiAgICAgIEZvbnQgPSBDb25maWdzX0hVQi5UZXh0X0ZvbnQKICAgIH0pCiAgICAKICAgIGxvY2FsIEltYWdlTGFiZWwgPSBDcmVhdGUoIkltYWdlTGFiZWwiLCBGcmFtZSwgewogICAgICBJbWFnZSA9IExhYmVsSW1hZ2UsCiAgICAgIFNpemUgPSBVRGltMi5uZXcoMCwgNzUsIDAsIDc1KSwKICAgICAgUG9zaXRpb24gPSBVRGltMi5uZXcoMCwgMTAsIDAsIDI1KQogICAgfSkKICAgIFRleHRTZXRDb2xvcihUZXh0QnV0dG9uKQogICAgcmV0dXJuIEltYWdlTGFiZWwKICBlbmQKICAKICBmdW5jdGlvbiBTZXRJbWFnZShsYWJlbCwgTmV3SW1hZ2UpCiAgICBsYWJlbC5JbWFnZSA9IE5ld0ltYWdlCiAgZW5kCiAgCiAgZnVuY3Rpb24gQWRkUGFyYWdyYXBoKHBhcmVudCwgQ29uZmlncykKICAgIGxvY2FsIFBhcmFncmFwaE5hbWUxID0gQ29uZmlnc1sxXSBvciBDb25maWdzLlRpdGxlIG9yICJQYXJhZ3JhcGghISIKICAgIGxvY2FsIFBhcmFncmFwaE5hbWUyID0gQ29uZmlnc1sxXSBvciBDb25maWdzLlRleHQgb3IgIlBhcmFncmFwaCEhIgogICAgCiAgICBsb2NhbCBGcmFtZSA9IENyZWF0ZSgiRnJhbWUiLCBwYXJlbnQsIHsKICAgICAgU2l6ZSA9IFVEaW0yLm5ldygxLCAwLCAwLCAyNSksCiAgICAgIEJhY2tncm91bmRDb2xvcjMgPSBDb25maWdzX0hVQi5Db3JfT3B0aW9ucywKICAgICAgTmFtZSA9ICJGcmFtZSIsCiAgICAgIEF1dG9tYXRpY1NpemUgPSAiWSIKICAgIH0pQ29ybmVyKEZyYW1lKVN0cm9rZShGcmFtZSlDcmVhdGUoIlVJTGlzdExheW91dCIsIEZyYW1lKUNyZWF0ZSgiVUlQYWRkaW5nIiwgRnJhbWUsIHsKICAgICAgUGFkZGluZ0xlZnQgPSBVRGltLm5ldygwLCAyMCksIFBhZGRpbmdSaWdodCA9IFVEaW0ubmV3KDAsIDEwKSwgUGFkZGluZ1RvcCA9IFVEaW0ubmV3KDAsIDUpLCBQYWRkaW5nQm90dG9tID0gVURpbS5uZXcoMCwgNSkKICAgIH0pCiAgICAKICAgIGxvY2FsIFRleHRCdXR0b24gPSBDcmVhdGUoIlRleHRCdXR0b24iLCBGcmFtZSwgewogICAgICBOYW1lID0gIkZyYW1lIiwKICAgICAgVGV4dFNpemUgPSAxMiwKICAgICAgVGV4dENvbG9yMyA9IENvbmZpZ3NfSFVCLkNvcl9UZXh0LAogICAgICBUZXh0ID0gUGFyYWdyYXBoTmFtZTEsCiAgICAgIFNpemUgPSBVRGltMi5uZXcoMSwgMCwgMCwgMCksCiAgICAgIEF1dG9tYXRpY1NpemUgPSAiWSIsCiAgICAgIEJhY2tncm91bmRUcmFuc3BhcmVuY3kgPSAxLAogICAgICBUZXh0WEFsaWdubWVudCA9ICJMZWZ0IiwKICAgICAgVGV4dFlBbGlnbm1lbnQgPSAiVG9wIiwKICAgICAgRm9udCA9IENvbmZpZ3NfSFVCLlRleHRfRm9udCwKICAgICAgVGV4dFdyYXBwZWQgPSB0cnVlCiAgICB9KVRleHRTZXRDb2xvcihUZXh0QnV0dG9uKQogICAgCiAgICBsb2NhbCBUZXh0TGFiZWwgPSBDcmVhdGUoIlRleHRMYWJlbCIsIEZyYW1lLCB7CiAgICAgIE5hbWUgPSAiRnJhbWUiLAogICAgICBTaXplID0gVURpbTIubmV3KDEsIDAsIDAsIDApLAogICAgICBCYWNrZ3JvdW5kVHJhbnNwYXJlbmN5ID0gMSwKICAgICAgQXV0b21hdGljU2l6ZSA9ICJZIiwKICAgICAgVGV4dFhBbGlnbm1lbnQgPSAiTGVmdCIsCiAgICAgIFRleHRZQWxpZ25tZW50ID0gIlRvcCIsCiAgICAgIFRleHRDb2xvcjMgPSBDb25maWdzX0hVQi5Db3JfRGFya1RleHQsCiAgICAgIFRleHRTaXplID0gMTEsCiAgICAgIFRleHQgPSBQYXJhZ3JhcGhOYW1lMiwKICAgICAgRm9udCA9IENvbmZpZ3NfSFVCLlRleHRfRm9udCwKICAgICAgVGV4dFdyYXBwZWQgPSB0cnVlCiAgICB9KQogICAgcmV0dXJuIHtUZXh0QnV0dG9uLCBUZXh0TGFiZWx9CiAgZW5kCiAgCiAgZnVuY3Rpb24gU2V0UGFyYWdyYXBoKFBhcmFncmFwaCwgTmV3VmFsdWUpCiAgICBQYXJhZ3JhcGhbMV0uVGV4dCA9IE5ld1ZhbHVlWzFdCiAgICBQYXJhZ3JhcGhbMl0uVGV4dCA9IE5ld1ZhbHVlWzJdCiAgZW5kCiAgCiAgZnVuY3Rpb24gQWRkU2VjdGlvbihwYXJlbnQsIENvbmZpZ3MpCiAgICBsb2NhbCBTZWN0aW9uTmFtZSA9IENvbmZpZ3NbMV0gb3IgQ29uZmlncy5OYW1lIG9yICJTZWN0aW9uISEiCiAgICAKICAgIGxvY2FsIEZyYW1lID0gQ3JlYXRlKCJGcmFtZSIsIHBhcmVudCwgewogICAgICBTaXplID0gVURpbTIubmV3KDEsIDAsIDAsIDI1KSwKICAgICAgQmFja2dyb3VuZENvbG9yMyA9IENvbmZpZ3NfSFVCLkNvcl9IdWIsCiAgICAgIE5hbWUgPSAiRnJhbWUiLAogICAgICBUcmFuc3BhcmVuY3kgPSAxCiAgICB9KUNvcm5lcihGcmFtZSkKICAgIAogICAgbG9jYWwgVGV4dEJ1dHRvbiA9IENyZWF0ZSgiVGV4dEJ1dHRvbiIsIEZyYW1lLCB7CiAgICAgIFRleHRTaXplID0gMTIsCiAgICAgIFRleHRDb2xvcjMgPSBDb25maWdzX0hVQi5Db3JfRGFya1RleHQsCiAgICAgIFRleHQgPSBTZWN0aW9uTmFtZSwKICAgICAgU2l6ZSA9IFVEaW0yLm5ldygxLCAwLCAwLCAyNSksCiAgICAgIFBvc2l0aW9uID0gVURpbTIubmV3KDAsIDEwLCAwLCAwKSwKICAgICAgQmFja2dyb3VuZFRyYW5zcGFyZW5jeSA9IDEsCiAgICAgIFRleHRYQWxpZ25tZW50ID0gIkxlZnQiLAogICAgICBGb250ID0gQ29uZmlnc19IVUIuVGV4dF9Gb250CiAgICB9KQogICAgcmV0dXJuIFRleHRCdXR0b24KICBlbmQKICAKICBmdW5jdGlvbiBTZXRTZWN0aW9uKFNlY3Rpb24sIE5ld05hbWUpCiAgICBTZWN0aW9uLlRleHQgPSBOZXdOYW1lCiAgZW5kCiAgCiAgZnVuY3Rpb24gQWRkRGlzY29yZChwYXJlbnQsIENvbmZpZ3MpCiAgICBsb2NhbCBEaXNjb3JkTGluayA9IENvbmZpZ3NbMV0gb3IgQ29uZmlncy5EaXNjb3JkTGluayBvciAiaHR0cHM6Ly9kaXNjb3JkLmdnLyIKICAgIGxvY2FsIERpc2NvcmRJY29uID0gQ29uZmlnc1syXSBvciBDb25maWdzLkRpc2NvcmRJY29uIG9yICJyYnhhc3NldGlkOi8vIgogICAgbG9jYWwgRGlzY29yZFRpdGxlID0gQ29uZmlnc1szXSBvciBDb25maWdzLkRpc2NvcmRUaXRsZSBvciAiIgogICAgCiAgICBsb2NhbCBGcmFtZSA9IENyZWF0ZSgiRnJhbWUiLCBwYXJlbnQsIHsKICAgICAgU2l6ZSA9IFVEaW0yLm5ldygxLCAwLCAwLCAxMTApLAogICAgICBCYWNrZ3JvdW5kQ29sb3IzID0gQ29sb3IzLmZyb21SR0IoMzAsIDMwLCAzMCksCiAgICAgIE5hbWUgPSAiRnJhbWUiLAogICAgICBBdXRvbWF0aWNTaXplID0gIlkiCiAgICB9KQogICAgCiAgICBsb2NhbCBMaW5rTGFiZWwgPSBDcmVhdGUoIlRleHRMYWJlbCIsIEZyYW1lLCB7CiAgICAgIFNpemUgPSBVRGltMi5uZXcoMSwgMCwgMCwgMjUpLAogICAgICBUZXh0ID0gRGlzY29yZExpbmssCiAgICAgIFRleHRYQWxpZ25tZW50ID0gIkxlZnQiLAogICAgICBCYWNrZ3JvdW5kVHJhbnNwYXJlbmN5ID0gMSwKICAgICAgUG9zaXRpb24gPSBVRGltMi5uZXcoMCwgMTIsIDAsIDApLAogICAgICBUZXh0Q29sb3IzID0gQ29sb3IzLmZyb21SR0IoMCwgMTIwLCAyNTUpLAogICAgICBGb250ID0gRW51bS5Gb250LkdvdGhhbUJvbGQsCiAgICAgIFRleHRTaXplID0gMTQKICAgIH0pCiAgICAKICAgIGxvY2FsIFRpdGxlTGFiZWwgPSBDcmVhdGUoIlRleHRMYWJlbCIsIEZyYW1lLCB7CiAgICAgIFNpemUgPSBVRGltMi5uZXcoMSwgMCwgMCwgMjUpLAogICAgICBUZXh0ID0gRGlzY29yZFRpdGxlLAogICAgICBUZXh0WEFsaWdubWVudCA9ICJMZWZ0IiwKICAgICAgQmFja2dyb3VuZFRyYW5zcGFyZW5jeSA9IDEsCiAgICAgIFBvc2l0aW9uID0gVURpbTIubmV3KDAsIDYwLCAwLCAyNSksCiAgICAgIFRleHRDb2xvcjMgPSBDb2xvcjMuZnJvbVJHQigyMDAsIDIwMCwgMjAwKSwKICAgICAgRm9udCA9IEVudW0uRm9udC5Hb3RoYW1Cb2xkLAogICAgICBUZXh0U2l6ZSA9IDE0CiAgICB9KQogICAgCiAgICBsb2NhbCBJY29uTGFiZWwgPSBDcmVhdGUoIkltYWdlTGFiZWwiLCBGcmFtZSwgewogICAgICBTaXplID0gVURpbTIubmV3KDAsIDQwLCAwLCA0MCksCiAgICAgIEFuY2hvclBvaW50ID0gVmVjdG9yMi5uZXcoMCwgMC41KSwKICAgICAgUG9zaXRpb24gPSBVRGltMi5uZXcoMCwgMTIsIDAuNDUsIDApLAogICAgICBJbWFnZSA9IERpc2NvcmRJY29uCiAgICB9KUNvcm5lcihJY29uTGFiZWwpCiAgICAKICAgIGxvY2FsIEpvaW5CdXR0b24gPSBDcmVhdGUoIlRleHRCdXR0b24iLCBGcmFtZSwgewogICAgICBTaXplID0gVURpbTIubmV3KDEsIC0yNCwgMCwgMjUpLAogICAgICBBbmNob3JQb2ludCA9IFZlY3RvcjIubmV3KDAuNSwgMSksCiAgICAgIFBvc2l0aW9uID0gVURpbTIubmV3KDAuNSwgMCwgMSwgLTgpLAogICAgICBUZXh0ID0gIkpvaW4iLAogICAgICBGb250ID0gRW51bS5Gb250LkdvdGhhbUJvbGQsCiAgICAgIFRleHRTaXplID0gMTUsCiAgICAgIFRleHRDb2xvcjMgPSBDb2xvcjMuZnJvbVJHQigyMjAsIDIyMCwgMjIwKSwKICAgICAgQmFja2dyb3VuZENvbG9yMyA9IENvbG9yMy5mcm9tUkdCKDUwLCAyMDAsIDUwKQogICAgfSlDb3JuZXIoSWNvbkxhYmVsKQogICAgCiAgICBsb2NhbCB0aW1lID0gdGljaygpCiAgICBDbGlja0NvbnRlciA9IDAKICAgIEpvaW5CdXR0b24uTW91c2VCdXR0b24xQ2xpY2s6Q29ubmVjdChmdW5jdGlvbigpCiAgICAgIGlmIENsaWNrQ29udGVyID09IDAgb3IgdGljaygpIC0gdGltZSA+IDUgdGhlbiB0aW1lID0gdGljaygpIHNldGNsaXBib2FyZChEaXNjb3JkTGluaykgQ2xpY2tDb250ZXIgPSBDbGlja0NvbnRlciArIDEKICAgICAgICBKb2luQnV0dG9uLlRleHQgPSAiQ29waWVkIHRvIENsaXBib2FyZCIKICAgICAgICBKb2luQnV0dG9uLkJhY2tncm91bmRDb2xvcjMgPSBDb2xvcjMuZnJvbVJHQigxMDAsIDEwMCwgMTAwKQogICAgICAgIEpvaW5CdXR0b24uVGV4dENvbG9yMyA9IENvbG9yMy5mcm9tUkdCKDE1MCwgMTUwLCAxNTApCiAgICAgICAgdGFzay53YWl0KDUpCiAgICAgICAgSm9pbkJ1dHRvbi5UZXh0ID0gIkpvaW4iCiAgICAgICAgSm9pbkJ1dHRvbi5CYWNrZ3JvdW5kQ29sb3IzID0gQ29sb3IzLmZyb21SR0IoNTAsIDIwMCwgNTApCiAgICAgICAgSm9pbkJ1dHRvbi5UZXh0Q29sb3IzID0gQ29sb3IzLmZyb21SR0IoMjIwLCAyMjAsIDIyMCkKICAgICAgZW5kCiAgICBlbmQpCiAgZW5kCiAgcmV0dXJuIE1lbnUKZW5k
]]))()
